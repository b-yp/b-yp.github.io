<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>JavaScript 高级 | 菜鸡白</title>
    <meta name="generator" content="VuePress 1.7.1">
    <script>
            var _hmt = _hmt || [];
            (function() {
              var hm = document.createElement("script");
              hm.src = "https://hm.baidu.com/hm.js?79265c513a9ad13e0f451d8a4d580df2";
              var s = document.getElementsByTagName("script")[0]; 
              s.parentNode.insertBefore(hm, s);
            })();
            
            </script>
    <script src="/assets/js/autopush-baidu.js"></script>
    <meta name="description" content="自主、跨界、终生学习">
    <meta name="keywords" content="菜鸡白、白亚鹏、前端、后端、java、python">
    <meta name="baidu-site-verification" content="code-vmZR2p48j9">
    
    <link rel="preload" href="/assets/css/0.styles.85051b5f.css" as="style"><link rel="preload" href="/assets/js/app.1b64b8f6.js" as="script"><link rel="preload" href="/assets/js/8.78de4c0a.js" as="script"><link rel="preload" href="/assets/js/18.0a391090.js" as="script"><link rel="prefetch" href="/assets/js/10.a4c3c0d8.js"><link rel="prefetch" href="/assets/js/11.35a075fd.js"><link rel="prefetch" href="/assets/js/12.96ea9ee6.js"><link rel="prefetch" href="/assets/js/13.d66514f3.js"><link rel="prefetch" href="/assets/js/14.cba52797.js"><link rel="prefetch" href="/assets/js/15.14fe690a.js"><link rel="prefetch" href="/assets/js/16.0e79c2d3.js"><link rel="prefetch" href="/assets/js/17.6bc5c79c.js"><link rel="prefetch" href="/assets/js/19.b33be37a.js"><link rel="prefetch" href="/assets/js/2.d56125bd.js"><link rel="prefetch" href="/assets/js/20.35ed9343.js"><link rel="prefetch" href="/assets/js/21.6745a2a1.js"><link rel="prefetch" href="/assets/js/22.9c480348.js"><link rel="prefetch" href="/assets/js/23.d010aa61.js"><link rel="prefetch" href="/assets/js/24.577ccb08.js"><link rel="prefetch" href="/assets/js/25.c95f8440.js"><link rel="prefetch" href="/assets/js/26.a371244a.js"><link rel="prefetch" href="/assets/js/27.a3d689da.js"><link rel="prefetch" href="/assets/js/28.800bfc29.js"><link rel="prefetch" href="/assets/js/29.a0512e4f.js"><link rel="prefetch" href="/assets/js/3.0fb7dd2f.js"><link rel="prefetch" href="/assets/js/30.cfca40c7.js"><link rel="prefetch" href="/assets/js/31.a860c9e5.js"><link rel="prefetch" href="/assets/js/32.b6c35af9.js"><link rel="prefetch" href="/assets/js/33.75478728.js"><link rel="prefetch" href="/assets/js/34.f4a2aeb1.js"><link rel="prefetch" href="/assets/js/35.f796ea16.js"><link rel="prefetch" href="/assets/js/36.f0e46069.js"><link rel="prefetch" href="/assets/js/37.d6c19fd6.js"><link rel="prefetch" href="/assets/js/38.f0458dd7.js"><link rel="prefetch" href="/assets/js/39.98f9f395.js"><link rel="prefetch" href="/assets/js/4.d0ac3b7b.js"><link rel="prefetch" href="/assets/js/40.3b244258.js"><link rel="prefetch" href="/assets/js/41.5a5bed69.js"><link rel="prefetch" href="/assets/js/42.b3b48570.js"><link rel="prefetch" href="/assets/js/43.3b86fb01.js"><link rel="prefetch" href="/assets/js/44.62a3a656.js"><link rel="prefetch" href="/assets/js/5.e3422018.js"><link rel="prefetch" href="/assets/js/6.91247d69.js"><link rel="prefetch" href="/assets/js/7.a1d116bf.js"><link rel="prefetch" href="/assets/js/9.d1da5b1f.js">
    <link rel="stylesheet" href="/assets/css/0.styles.85051b5f.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/assets/images/cjb.png " alt="菜鸡白" class="logo"> <span class="site-name can-hide">菜鸡白</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="文档1" class="dropdown-title"><span class="title">文档1</span> <span class="arrow down"></span></button> <button type="button" aria-label="文档1" class="mobile-dropdown-title"><span class="title">文档1</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/documents1/html/html.html" class="nav-link">
  html
</a></li><li class="dropdown-item"><!----> <a href="/documents1/css/css.html" class="nav-link">
  css
</a></li><li class="dropdown-item"><!----> <a href="/documents1/h5c3/h5c3.html" class="nav-link">
  h5c3
</a></li><li class="dropdown-item"><!----> <a href="/documents1/flex/flex.html" class="nav-link">
  布局
</a></li><li class="dropdown-item"><!----> <a href="/documents1/jquery/jquery.html" class="nav-link">
  jQuery
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="文档2" class="dropdown-title"><span class="title">文档2</span> <span class="arrow down"></span></button> <button type="button" aria-label="文档2" class="mobile-dropdown-title"><span class="title">文档2</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/documents2/html/html.html" class="nav-link">
  html
</a></li><li class="dropdown-item"><!----> <a href="/documents2/css/css.html" class="nav-link">
  css
</a></li><li class="dropdown-item"><!----> <a href="/documents2/js1/javascript基础.html" class="nav-link">
  JavaScript基础
</a></li><li class="dropdown-item"><!----> <a href="/documents2/web-api/web-api.html" class="nav-link">
  web api
</a></li><li class="dropdown-item"><!----> <a href="/documents2/js2/javascript高级.html" class="nav-link">
  JavaScript高级
</a></li><li class="dropdown-item"><!----> <a href="/documents2/canvas/canvas.html" class="nav-link">
  canvas
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="文档3" class="dropdown-title"><span class="title">文档3</span> <span class="arrow down"></span></button> <button type="button" aria-label="文档3" class="mobile-dropdown-title"><span class="title">文档3</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/documents3/html/01-HTML.html" class="nav-link">
  html
</a></li><li class="dropdown-item"><!----> <a href="/documents3/css/CSS.html" class="nav-link">
  css
</a></li><li class="dropdown-item"><!----> <a href="/documents3/js1/01-JavaScript基础.html" class="nav-link">
  JavaScript基础
</a></li><li class="dropdown-item"><!----> <a href="/documents3/web-api/02-Web API.html" class="nav-link">
  web api
</a></li><li class="dropdown-item"><!----> <a href="/documents3/js2/03-JavaScript高级.html" class="nav-link">
  JavaScript高级
</a></li><li class="dropdown-item"><!----> <a href="/documents3/jQuery/04-jQuery.html" class="nav-link">
  jQuery
</a></li><li class="dropdown-item"><!----> <a href="/documents3/canvas/canvas.html" class="nav-link">
  canvas
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="JAVA" class="dropdown-title"><span class="title">JAVA</span> <span class="arrow down"></span></button> <button type="button" aria-label="JAVA" class="mobile-dropdown-title"><span class="title">JAVA</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/JAVA/JavaWeb/JavaWeb.html" class="nav-link">
  Java Web
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="KS-JAVA" class="dropdown-title"><span class="title">KS-JAVA</span> <span class="arrow down"></span></button> <button type="button" aria-label="KS-JAVA" class="mobile-dropdown-title"><span class="title">KS-JAVA</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/ks_java/JavaSE/JavaSE.html" class="nav-link">
  JavaSE
</a></li><li class="dropdown-item"><!----> <a href="/ks_java/mysql/MySQL.html" class="nav-link">
  MySQL
</a></li><li class="dropdown-item"><!----> <a href="/ks_java/JavaWeb/JavaWeb.html" class="nav-link">
  JavaWeb
</a></li><li class="dropdown-item"><!----> <a href="/ks_java/MyBatis/MyBatis.html" class="nav-link">
  MyBatis
</a></li></ul></div></div><div class="nav-item"><a href="/tools/" class="nav-link">
  工具
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="零碎" class="dropdown-title"><span class="title">零碎</span> <span class="arrow down"></span></button> <button type="button" aria-label="零碎" class="mobile-dropdown-title"><span class="title">零碎</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/piecemeal/html.html" class="nav-link">
  html
</a></li><li class="dropdown-item"><!----> <a href="/piecemeal/css.html" class="nav-link">
  css
</a></li><li class="dropdown-item"><!----> <a href="/piecemeal/javascript.html" class="nav-link">
  JavaScript
</a></li><li class="dropdown-item"><!----> <a href="/piecemeal/vue.html" class="nav-link">
  Vue
</a></li><li class="dropdown-item"><!----> <a href="/piecemeal/node.html" class="nav-link">
  node
</a></li><li class="dropdown-item"><!----> <a href="/piecemeal/small-program.html" class="nav-link">
  小程序
</a></li><li class="dropdown-item"><!----> <a href="/piecemeal/git.html" class="nav-link">
  git
</a></li><li class="dropdown-item"><!----> <a href="/piecemeal/markdown/" class="nav-link">
  markdown
</a></li><li class="dropdown-item"><!----> <a href="/piecemeal/interview/simpread-一位前端小姐姐的五万字面试宝典.html" class="nav-link">
  面试
</a></li><li class="dropdown-item"><!----> <a href="/piecemeal/interview/simpread-2019 前端最全面试题.html" class="nav-link">
  面试2
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="分享" class="dropdown-title"><span class="title">分享</span> <span class="arrow down"></span></button> <button type="button" aria-label="分享" class="mobile-dropdown-title"><span class="title">分享</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/share/site.html" class="nav-link">
  站点
</a></li><li class="dropdown-item"><h4>
          搜商
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/share/search/engine/" class="nav-link">
  搜索引擎
</a></li><li class="dropdown-subitem"><a href="/share/search/skill/google搜索技巧.html" class="nav-link">
  搜索艺术
</a></li><li class="dropdown-subitem"><a href="/share/search/skill/github高级搜索.html" class="nav-link">
  github高级搜索
</a></li></ul></li></ul></div></div><div class="nav-item"><a href="/about/" class="nav-link">
  关于
</a></div><div class="nav-item"><a href="http://ypll.xyz/python" target="_blank" rel="noopener noreferrer" class="nav-link external">
  python基础教程
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://github.com/b-yp/b-yp.github.io" target="_blank" rel="noopener noreferrer" class="nav-link external">
  github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="文档1" class="dropdown-title"><span class="title">文档1</span> <span class="arrow down"></span></button> <button type="button" aria-label="文档1" class="mobile-dropdown-title"><span class="title">文档1</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/documents1/html/html.html" class="nav-link">
  html
</a></li><li class="dropdown-item"><!----> <a href="/documents1/css/css.html" class="nav-link">
  css
</a></li><li class="dropdown-item"><!----> <a href="/documents1/h5c3/h5c3.html" class="nav-link">
  h5c3
</a></li><li class="dropdown-item"><!----> <a href="/documents1/flex/flex.html" class="nav-link">
  布局
</a></li><li class="dropdown-item"><!----> <a href="/documents1/jquery/jquery.html" class="nav-link">
  jQuery
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="文档2" class="dropdown-title"><span class="title">文档2</span> <span class="arrow down"></span></button> <button type="button" aria-label="文档2" class="mobile-dropdown-title"><span class="title">文档2</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/documents2/html/html.html" class="nav-link">
  html
</a></li><li class="dropdown-item"><!----> <a href="/documents2/css/css.html" class="nav-link">
  css
</a></li><li class="dropdown-item"><!----> <a href="/documents2/js1/javascript基础.html" class="nav-link">
  JavaScript基础
</a></li><li class="dropdown-item"><!----> <a href="/documents2/web-api/web-api.html" class="nav-link">
  web api
</a></li><li class="dropdown-item"><!----> <a href="/documents2/js2/javascript高级.html" class="nav-link">
  JavaScript高级
</a></li><li class="dropdown-item"><!----> <a href="/documents2/canvas/canvas.html" class="nav-link">
  canvas
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="文档3" class="dropdown-title"><span class="title">文档3</span> <span class="arrow down"></span></button> <button type="button" aria-label="文档3" class="mobile-dropdown-title"><span class="title">文档3</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/documents3/html/01-HTML.html" class="nav-link">
  html
</a></li><li class="dropdown-item"><!----> <a href="/documents3/css/CSS.html" class="nav-link">
  css
</a></li><li class="dropdown-item"><!----> <a href="/documents3/js1/01-JavaScript基础.html" class="nav-link">
  JavaScript基础
</a></li><li class="dropdown-item"><!----> <a href="/documents3/web-api/02-Web API.html" class="nav-link">
  web api
</a></li><li class="dropdown-item"><!----> <a href="/documents3/js2/03-JavaScript高级.html" class="nav-link">
  JavaScript高级
</a></li><li class="dropdown-item"><!----> <a href="/documents3/jQuery/04-jQuery.html" class="nav-link">
  jQuery
</a></li><li class="dropdown-item"><!----> <a href="/documents3/canvas/canvas.html" class="nav-link">
  canvas
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="JAVA" class="dropdown-title"><span class="title">JAVA</span> <span class="arrow down"></span></button> <button type="button" aria-label="JAVA" class="mobile-dropdown-title"><span class="title">JAVA</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/JAVA/JavaWeb/JavaWeb.html" class="nav-link">
  Java Web
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="KS-JAVA" class="dropdown-title"><span class="title">KS-JAVA</span> <span class="arrow down"></span></button> <button type="button" aria-label="KS-JAVA" class="mobile-dropdown-title"><span class="title">KS-JAVA</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/ks_java/JavaSE/JavaSE.html" class="nav-link">
  JavaSE
</a></li><li class="dropdown-item"><!----> <a href="/ks_java/mysql/MySQL.html" class="nav-link">
  MySQL
</a></li><li class="dropdown-item"><!----> <a href="/ks_java/JavaWeb/JavaWeb.html" class="nav-link">
  JavaWeb
</a></li><li class="dropdown-item"><!----> <a href="/ks_java/MyBatis/MyBatis.html" class="nav-link">
  MyBatis
</a></li></ul></div></div><div class="nav-item"><a href="/tools/" class="nav-link">
  工具
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="零碎" class="dropdown-title"><span class="title">零碎</span> <span class="arrow down"></span></button> <button type="button" aria-label="零碎" class="mobile-dropdown-title"><span class="title">零碎</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/piecemeal/html.html" class="nav-link">
  html
</a></li><li class="dropdown-item"><!----> <a href="/piecemeal/css.html" class="nav-link">
  css
</a></li><li class="dropdown-item"><!----> <a href="/piecemeal/javascript.html" class="nav-link">
  JavaScript
</a></li><li class="dropdown-item"><!----> <a href="/piecemeal/vue.html" class="nav-link">
  Vue
</a></li><li class="dropdown-item"><!----> <a href="/piecemeal/node.html" class="nav-link">
  node
</a></li><li class="dropdown-item"><!----> <a href="/piecemeal/small-program.html" class="nav-link">
  小程序
</a></li><li class="dropdown-item"><!----> <a href="/piecemeal/git.html" class="nav-link">
  git
</a></li><li class="dropdown-item"><!----> <a href="/piecemeal/markdown/" class="nav-link">
  markdown
</a></li><li class="dropdown-item"><!----> <a href="/piecemeal/interview/simpread-一位前端小姐姐的五万字面试宝典.html" class="nav-link">
  面试
</a></li><li class="dropdown-item"><!----> <a href="/piecemeal/interview/simpread-2019 前端最全面试题.html" class="nav-link">
  面试2
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="分享" class="dropdown-title"><span class="title">分享</span> <span class="arrow down"></span></button> <button type="button" aria-label="分享" class="mobile-dropdown-title"><span class="title">分享</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/share/site.html" class="nav-link">
  站点
</a></li><li class="dropdown-item"><h4>
          搜商
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/share/search/engine/" class="nav-link">
  搜索引擎
</a></li><li class="dropdown-subitem"><a href="/share/search/skill/google搜索技巧.html" class="nav-link">
  搜索艺术
</a></li><li class="dropdown-subitem"><a href="/share/search/skill/github高级搜索.html" class="nav-link">
  github高级搜索
</a></li></ul></li></ul></div></div><div class="nav-item"><a href="/about/" class="nav-link">
  关于
</a></div><div class="nav-item"><a href="http://ypll.xyz/python" target="_blank" rel="noopener noreferrer" class="nav-link external">
  python基础教程
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://github.com/b-yp/b-yp.github.io" target="_blank" rel="noopener noreferrer" class="nav-link external">
  github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>JavaScript 高级</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/documents3/js2/03-JavaScript%E9%AB%98%E7%BA%A7.html#课程介绍" class="sidebar-link">课程介绍</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/documents3/js2/03-JavaScript%E9%AB%98%E7%BA%A7.html#课程大纲" class="sidebar-link">课程大纲</a></li><li class="sidebar-sub-header"><a href="/documents3/js2/03-JavaScript%E9%AB%98%E7%BA%A7.html#目标" class="sidebar-link">目标</a></li><li class="sidebar-sub-header"><a href="/documents3/js2/03-JavaScript%E9%AB%98%E7%BA%A7.html#案例演示" class="sidebar-link">案例演示</a></li></ul></li><li><a href="/documents3/js2/03-JavaScript%E9%AB%98%E7%BA%A7.html#基本概念复习" class="sidebar-link">基本概念复习</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/documents3/js2/03-JavaScript%E9%AB%98%E7%BA%A7.html#重新介绍-javascript" class="sidebar-link">重新介绍 JavaScript</a></li><li class="sidebar-sub-header"><a href="/documents3/js2/03-JavaScript%E9%AB%98%E7%BA%A7.html#基本概念" class="sidebar-link">基本概念</a></li><li class="sidebar-sub-header"><a href="/documents3/js2/03-JavaScript%E9%AB%98%E7%BA%A7.html#javascript-中的数据类型" class="sidebar-link">JavaScript 中的数据类型</a></li><li class="sidebar-sub-header"><a href="/documents3/js2/03-JavaScript%E9%AB%98%E7%BA%A7.html#javascript-执行过程" class="sidebar-link">JavaScript 执行过程</a></li></ul></li><li><a href="/documents3/js2/03-JavaScript%E9%AB%98%E7%BA%A7.html#javascript-面向对象编程" class="sidebar-link">JavaScript 面向对象编程</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/documents3/js2/03-JavaScript%E9%AB%98%E7%BA%A7.html#面向对象介绍" class="sidebar-link">面向对象介绍</a></li><li class="sidebar-sub-header"><a href="/documents3/js2/03-JavaScript%E9%AB%98%E7%BA%A7.html#创建对象" class="sidebar-link">创建对象</a></li><li class="sidebar-sub-header"><a href="/documents3/js2/03-JavaScript%E9%AB%98%E7%BA%A7.html#构造函数" class="sidebar-link">构造函数</a></li><li class="sidebar-sub-header"><a href="/documents3/js2/03-JavaScript%E9%AB%98%E7%BA%A7.html#原型" class="sidebar-link">原型</a></li><li class="sidebar-sub-header"><a href="/documents3/js2/03-JavaScript%E9%AB%98%E7%BA%A7.html#案例-随机方块" class="sidebar-link">案例：随机方块</a></li></ul></li><li><a href="/documents3/js2/03-JavaScript%E9%AB%98%E7%BA%A7.html#面向对象游戏案例-贪吃蛇" class="sidebar-link">面向对象游戏案例：贪吃蛇</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/documents3/js2/03-JavaScript%E9%AB%98%E7%BA%A7.html#案例介绍" class="sidebar-link">案例介绍</a></li><li class="sidebar-sub-header"><a href="/documents3/js2/03-JavaScript%E9%AB%98%E7%BA%A7.html#功能实现" class="sidebar-link">功能实现</a></li><li class="sidebar-sub-header"><a href="/documents3/js2/03-JavaScript%E9%AB%98%E7%BA%A7.html#游戏的逻辑" class="sidebar-link">游戏的逻辑</a></li><li class="sidebar-sub-header"><a href="/documents3/js2/03-JavaScript%E9%AB%98%E7%BA%A7.html#其它处理" class="sidebar-link">其它处理</a></li></ul></li><li><a href="/documents3/js2/03-JavaScript%E9%AB%98%E7%BA%A7.html#继承" class="sidebar-link">继承</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/documents3/js2/03-JavaScript%E9%AB%98%E7%BA%A7.html#什么是继承" class="sidebar-link">什么是继承</a></li><li class="sidebar-sub-header"><a href="/documents3/js2/03-JavaScript%E9%AB%98%E7%BA%A7.html#构造函数的属性继承-借用构造函数" class="sidebar-link">构造函数的属性继承：借用构造函数</a></li><li class="sidebar-sub-header"><a href="/documents3/js2/03-JavaScript%E9%AB%98%E7%BA%A7.html#构造函数的原型方法继承-拷贝继承-for-in" class="sidebar-link">构造函数的原型方法继承：拷贝继承（for-in）</a></li><li class="sidebar-sub-header"><a href="/documents3/js2/03-JavaScript%E9%AB%98%E7%BA%A7.html#另一种继承方式-原型继承" class="sidebar-link">另一种继承方式：原型继承</a></li></ul></li><li><a href="/documents3/js2/03-JavaScript%E9%AB%98%E7%BA%A7.html#函数进阶" class="sidebar-link">函数进阶</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/documents3/js2/03-JavaScript%E9%AB%98%E7%BA%A7.html#函数的定义方式" class="sidebar-link">函数的定义方式</a></li><li class="sidebar-sub-header"><a href="/documents3/js2/03-JavaScript%E9%AB%98%E7%BA%A7.html#函数的调用方式" class="sidebar-link">函数的调用方式</a></li><li class="sidebar-sub-header"><a href="/documents3/js2/03-JavaScript%E9%AB%98%E7%BA%A7.html#函数内-this-指向的不同场景" class="sidebar-link">函数内 this 指向的不同场景</a></li><li class="sidebar-sub-header"><a href="/documents3/js2/03-JavaScript%E9%AB%98%E7%BA%A7.html#函数也是对象" class="sidebar-link">函数也是对象</a></li><li class="sidebar-sub-header"><a href="/documents3/js2/03-JavaScript%E9%AB%98%E7%BA%A7.html#call、apply、bind" class="sidebar-link">call、apply、bind</a></li><li class="sidebar-sub-header"><a href="/documents3/js2/03-JavaScript%E9%AB%98%E7%BA%A7.html#函数的其它成员" class="sidebar-link">函数的其它成员</a></li><li class="sidebar-sub-header"><a href="/documents3/js2/03-JavaScript%E9%AB%98%E7%BA%A7.html#高阶函数" class="sidebar-link">高阶函数</a></li><li class="sidebar-sub-header"><a href="/documents3/js2/03-JavaScript%E9%AB%98%E7%BA%A7.html#函数闭包" class="sidebar-link">函数闭包</a></li><li class="sidebar-sub-header"><a href="/documents3/js2/03-JavaScript%E9%AB%98%E7%BA%A7.html#函数递归" class="sidebar-link">函数递归</a></li></ul></li><li><a href="/documents3/js2/03-JavaScript%E9%AB%98%E7%BA%A7.html#正则表达式" class="sidebar-link">正则表达式</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/documents3/js2/03-JavaScript%E9%AB%98%E7%BA%A7.html#正则表达式简介" class="sidebar-link">正则表达式简介</a></li><li class="sidebar-sub-header"><a href="/documents3/js2/03-JavaScript%E9%AB%98%E7%BA%A7.html#正则表达式的测试" class="sidebar-link">正则表达式的测试</a></li><li class="sidebar-sub-header"><a href="/documents3/js2/03-JavaScript%E9%AB%98%E7%BA%A7.html#正则表达式的组成" class="sidebar-link">正则表达式的组成</a></li><li class="sidebar-sub-header"><a href="/documents3/js2/03-JavaScript%E9%AB%98%E7%BA%A7.html#元字符串" class="sidebar-link">元字符串</a></li><li class="sidebar-sub-header"><a href="/documents3/js2/03-JavaScript%E9%AB%98%E7%BA%A7.html#案例" class="sidebar-link">案例</a></li></ul></li><li><a href="/documents3/js2/03-JavaScript%E9%AB%98%E7%BA%A7.html#javascript-中使用正则表达式" class="sidebar-link">JavaScript 中使用正则表达式</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/documents3/js2/03-JavaScript%E9%AB%98%E7%BA%A7.html#创建正则对象" class="sidebar-link">创建正则对象</a></li><li class="sidebar-sub-header"><a href="/documents3/js2/03-JavaScript%E9%AB%98%E7%BA%A7.html#正则匹配" class="sidebar-link">正则匹配</a></li><li class="sidebar-sub-header"><a href="/documents3/js2/03-JavaScript%E9%AB%98%E7%BA%A7.html#正则提取" class="sidebar-link">正则提取</a></li><li class="sidebar-sub-header"><a href="/documents3/js2/03-JavaScript%E9%AB%98%E7%BA%A7.html#正则替换" class="sidebar-link">正则替换</a></li><li class="sidebar-sub-header"><a href="/documents3/js2/03-JavaScript%E9%AB%98%E7%BA%A7.html#案例-表单验证" class="sidebar-link">案例：表单验证</a></li></ul></li><li><a href="/documents3/js2/03-JavaScript%E9%AB%98%E7%BA%A7.html#补充" class="sidebar-link">补充</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/documents3/js2/03-JavaScript%E9%AB%98%E7%BA%A7.html#伪数组和数组" class="sidebar-link">伪数组和数组</a></li><li class="sidebar-sub-header"><a href="/documents3/js2/03-JavaScript%E9%AB%98%E7%BA%A7.html#javascript-垃圾回收机制" class="sidebar-link">JavaScript 垃圾回收机制</a></li><li class="sidebar-sub-header"><a href="/documents3/js2/03-JavaScript%E9%AB%98%E7%BA%A7.html#javascript-运行机制-event-loop" class="sidebar-link">JavaScript 运行机制：Event Loop</a></li><li class="sidebar-sub-header"><a href="/documents3/js2/03-JavaScript%E9%AB%98%E7%BA%A7.html#object" class="sidebar-link">Object</a></li></ul></li><li><a href="/documents3/js2/03-JavaScript%E9%AB%98%E7%BA%A7.html#附录" class="sidebar-link">附录</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/documents3/js2/03-JavaScript%E9%AB%98%E7%BA%A7.html#a-代码规范" class="sidebar-link">A 代码规范</a></li><li class="sidebar-sub-header"><a href="/documents3/js2/03-JavaScript%E9%AB%98%E7%BA%A7.html#b-chrome-开发者工具" class="sidebar-link">B Chrome 开发者工具</a></li><li class="sidebar-sub-header"><a href="/documents3/js2/03-JavaScript%E9%AB%98%E7%BA%A7.html#c-文档相关工具" class="sidebar-link">C 文档相关工具</a></li></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="javascript-高级"><a href="#javascript-高级" class="header-anchor">#</a> JavaScript 高级</h1> <img src="/assets/img/Unofficial_JavaScript_logo_2.svg.30e13bf7.png" width="400" alt=""> <h2 id="课程介绍"><a href="#课程介绍" class="header-anchor">#</a> 课程介绍</h2> <h3 id="课程大纲"><a href="#课程大纲" class="header-anchor">#</a> 课程大纲</h3> <p>在线地址：<a href="http://naotu.baidu.com/file/5bcd79bc4f1eaf83f96d1ad23baab345?token=d22135c63546f5ee" target="_blank" rel="noopener noreferrer">JavaScript 高级<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p><img src="/assets/img/outline.124992b3.png" alt="课程大纲"></p> <h3 id="目标"><a href="#目标" class="header-anchor">#</a> 目标</h3> <ul><li>理解面向对象开发思想</li> <li>掌握 JavaScript 面向对象开发相关模式</li> <li>掌握在 JavaScript 中使用正则表达式</li></ul> <h3 id="案例演示"><a href="#案例演示" class="header-anchor">#</a> 案例演示</h3> <ul><li><a href="https://lipengzhou.github.io/new-snake/" target="_blank" rel="noopener noreferrer">贪吃蛇<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <hr> <h2 id="基本概念复习"><a href="#基本概念复习" class="header-anchor">#</a> 基本概念复习</h2> <blockquote><p>由于 JavaScript 高级还是针对 JavaScript 语言本身的一个进阶学习，所以在开始之前我们先对以前所学过的 JavaScript 相关知识点做一个快速复习总结。</p></blockquote> <h3 id="重新介绍-javascript"><a href="#重新介绍-javascript" class="header-anchor">#</a> 重新介绍 JavaScript</h3> <h4 id="javascript-是什么"><a href="#javascript-是什么" class="header-anchor">#</a> JavaScript 是什么</h4> <ul><li>解析执行：轻量级解释型的，或是 JIT 编译型的程序设计语言</li> <li>语言特点：动态，头等函数 (First-class Function)
<ul><li>又称函数是 JavaScript 中的一等公民</li></ul></li> <li>执行环境：在宿主环境（host environment）下运行，浏览器是最常见的 JavaScript 宿主环境
<ul><li>但是在很多非浏览器环境中也使用 JavaScript ，例如 node.js</li></ul></li> <li>编程范式：基于原型、多范式的动态脚本语言，并且支持面向对象、命令式和声明式（如：函数式编程）编程风格</li></ul> <h4 id="javascript-与浏览器的关系"><a href="#javascript-与浏览器的关系" class="header-anchor">#</a> JavaScript 与浏览器的关系</h4> <img src="/assets/img/browser-js.a315564c.png" alt=""> <h4 id="javascript-的组成"><a href="#javascript-的组成" class="header-anchor">#</a> JavaScript 的组成</h4> <table><thead><tr><th>组成部分</th> <th>说明</th></tr></thead> <tbody><tr><td>Ecmascript</td> <td>描述了该语言的语法和基本对象</td></tr> <tr><td>DOM</td> <td>描述了处理网页内容的方法和接口</td></tr> <tr><td>BOM</td> <td>描述了与浏览器进行交互的方法和接口</td></tr></tbody></table> <h4 id="javascript-可以做什么"><a href="#javascript-可以做什么" class="header-anchor">#</a> JavaScript 可以做什么</h4> <blockquote><p>Any application that can be written in JavaScript, will eventually be written in JavaScript.<br>
凡是能用 JavaScript 写出来的，最终都会用 JavaScript 写出来</p></blockquote> <ul><li><a href="https://www.zhihu.com/question/20796866" target="_blank" rel="noopener noreferrer">知乎 - JavaScript 能做什么，该做什么？<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://github.com/phodal/articles/issues/1" target="_blank" rel="noopener noreferrer">最流行的编程语言 JavaScript 能做什么？<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <h4 id="javascript-发展历史"><a href="#javascript-发展历史" class="header-anchor">#</a> JavaScript 发展历史</h4> <blockquote><p><a href="http://javascript.ruanyifeng.com/introduction/history.html" target="_blank" rel="noopener noreferrer">JavaScript 标准参考教程 - JavaScript 语言的历史<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></blockquote> <ul><li>JavaScript 的诞生</li> <li>JavaScript 与 Ecmascript 的关系</li> <li>JavaScript 与 Java 的关系</li> <li>JavaScript 的版本</li> <li>JavaScript 周边大事记</li></ul> <h4 id="小结"><a href="#小结" class="header-anchor">#</a> 小结</h4> <h3 id="基本概念"><a href="#基本概念" class="header-anchor">#</a> 基本概念</h3> <blockquote><p>本小节快速过即可，主要是对学过的内容做知识点梳理。</p></blockquote> <ul><li>语法
<ul><li>区分大小写</li> <li>标识符</li> <li>注释</li> <li>严格模式</li> <li>语句</li></ul></li> <li>关键字和保留字</li> <li>变量</li> <li>数据类型
<ul><li>typeof 操作符</li> <li>Undefined</li> <li>Null</li> <li>Boolean</li> <li>Number</li> <li>String</li> <li>Object</li></ul></li> <li>操作符</li> <li>流程控制语句</li> <li>函数</li></ul> <h3 id="javascript-中的数据类型"><a href="#javascript-中的数据类型" class="header-anchor">#</a> JavaScript 中的数据类型</h3> <p>JavaScript 有 5 种简单数据类型：<code>Undefined、Null、Boolean、Number、String</code> 和 1 种复杂数据类型 <code>Object</code> 。</p> <h4 id="基本类型-值类型"><a href="#基本类型-值类型" class="header-anchor">#</a> 基本类型（值类型）</h4> <ul><li>Undefined</li> <li>Null</li> <li>Boolean</li> <li>Number</li> <li>String</li></ul> <h4 id="复杂类型-引用类型"><a href="#复杂类型-引用类型" class="header-anchor">#</a> 复杂类型（引用类型）</h4> <ul><li>Object</li> <li>Array</li> <li>Date</li> <li>RegExp</li> <li>Function</li> <li>基本包装类型
<ul><li>Boolean</li> <li>Number</li> <li>String</li></ul></li> <li>单体内置对象
<ul><li>Global</li> <li>Math</li></ul></li></ul> <h4 id="类型检测"><a href="#类型检测" class="header-anchor">#</a> 类型检测</h4> <ul><li><code>typeof</code></li> <li><code>instanceof</code></li> <li><code>Object.prototype.toString.call()</code></li></ul> <h4 id="值类型和引用类型在内存中的存储方式-画图说明"><a href="#值类型和引用类型在内存中的存储方式-画图说明" class="header-anchor">#</a> 值类型和引用类型在内存中的存储方式（画图说明）</h4> <ul><li>值类型按值存储</li> <li>引用类型按引用存储</li></ul> <h4 id="值类型复制和引用类型复制-画图说明"><a href="#值类型复制和引用类型复制-画图说明" class="header-anchor">#</a> 值类型复制和引用类型复制（画图说明）</h4> <ul><li>值类型按值复制</li> <li>引用类型按引用复制</li></ul> <h4 id="值类型和引用类型参数传递-画图说明"><a href="#值类型和引用类型参数传递-画图说明" class="header-anchor">#</a> 值类型和引用类型参数传递（画图说明）</h4> <ul><li>值类型按值传递</li> <li>引用类型按引用传递</li></ul> <h4 id="值类型与引用类型的差别"><a href="#值类型与引用类型的差别" class="header-anchor">#</a> 值类型与引用类型的差别</h4> <ul><li>基本类型在内存中占据固定大小的空间，因此被保存在栈内存中</li> <li>从一个变量向另一个变量复制基本类型的值，复制的是值的副本</li> <li>引用类型的值是对象，保存在堆内存</li> <li>包含引用类型值的变量实际上包含的并不是对象本身，而是一个指向该对象的指针</li> <li>从一个变量向另一个变量复制引用类型的值的时候，复制是引用指针，因此两个变量最终都指向同一个对象</li></ul> <h4 id="小结-2"><a href="#小结-2" class="header-anchor">#</a> 小结</h4> <ul><li>类型检测方式</li> <li>值类型和引用类型的存储方式</li> <li>值类型复制和引用类型复制</li> <li>方法参数中 值类型数据传递 和 引用类型数据传递</li></ul> <h3 id="javascript-执行过程"><a href="#javascript-执行过程" class="header-anchor">#</a> JavaScript 执行过程</h3> <p>JavaScript 运行分为两个阶段：</p> <ul><li>预解析
<ul><li>全局预解析（所有变量和函数声明都会提前；同名的函数和变量函数的优先级高）</li> <li>函数内部预解析（所有的变量、函数和形参都会参与预解析）
<ul><li>函数</li> <li>形参</li> <li>普通变量</li></ul></li></ul></li> <li>执行</li></ul> <p>先预解析全局作用域，然后执行全局作用域中的代码，
在执行全局代码的过程中遇到函数调用就会先进行函数预解析，然后再执行函数内代码。</p> <hr> <h2 id="javascript-面向对象编程"><a href="#javascript-面向对象编程" class="header-anchor">#</a> JavaScript 面向对象编程</h2> <img src="/assets/img/mxdxkf.2fdd9b2a.png" width="400" alt=""> <h3 id="面向对象介绍"><a href="#面向对象介绍" class="header-anchor">#</a> 面向对象介绍</h3> <h4 id="什么是对象"><a href="#什么是对象" class="header-anchor">#</a> 什么是对象</h4> <blockquote><p>Everything is object （万物皆对象）</p></blockquote> <img src="/assets/img/20160823024542444.01ca5f3c.jpg" alt=""> <p>对象到底是什么，我们可以从两次层次来理解。</p> <p><strong>(1) 对象是单个事物的抽象。</strong></p> <p>一本书、一辆汽车、一个人都可以是对象，一个数据库、一张网页、一个与远程服务器的连接也可以是对象。当实物被抽象成对象，实物之间的关系就变成了对象之间的关系，从而就可以模拟现实情况，针对对象进行编程。</p> <p><strong>(2) 对象是一个容器，封装了属性（property）和方法（method）。</strong></p> <p>属性是对象的状态，方法是对象的行为（完成某种任务）。比如，我们可以把动物抽象为animal对象，使用“属性”记录具体是那一种动物，使用“方法”表示动物的某种行为（奔跑、捕猎、休息等等）。</p> <p>在实际开发中，对象是一个抽象的概念，可以将其简单理解为：<strong>数据集或功能集</strong>。</p> <p>ECMAScript-262 把对象定义为：<strong>无序属性的集合，其属性可以包含基本值、对象或者函数</strong>。
严格来讲，这就相当于说对象是一组没有特定顺序的值。对象的每个属性或方法都有一个名字，而每个名字都
映射到一个值。</p> <p class="tip">
  提示：每个对象都是基于一个引用类型创建的，这些类型可以是系统内置的原生类型，也可以是开发人员自定义的类型。
</p> <h4 id="什么是面向对象"><a href="#什么是面向对象" class="header-anchor">#</a> 什么是面向对象</h4> <blockquote><p>面向对象不是新的东西，它只是过程式代码的一种高度封装，目的在于提高代码的开发效率和可维护性。</p></blockquote> <img src="/assets/img/664ba37eeee9f4623c06c066867f1d38_r.664ba37e.jpg" width="400" alt=""> <p>面向对象编程 —— Object Oriented Programming，简称 OOP ，是一种编程开发思想。
它将真实世界各种复杂的关系，抽象为一个个对象，然后由对象之间的分工与合作，完成对真实世界的模拟。</p> <p>在面向对象程序开发思想中，每一个对象都是功能中心，具有明确分工，可以完成接受信息、处理数据、发出信息等任务。
因此，面向对象编程具有灵活、代码可复用、高度模块化等特点，容易维护和开发，比起由一系列函数或指令组成的传统的过程式编程（procedural programming），更适合多人合作的大型软件项目。</p> <p>面向对象与面向过程：</p> <ul><li>面向过程就是亲力亲为，事无巨细，面面俱到，步步紧跟，有条不紊</li> <li>面向对象就是找一个对象，指挥得结果</li> <li>面向对象将执行者转变成指挥者</li> <li>面向对象不是面向过程的替代，而是面向过程的封装</li></ul> <p>面向对象的特性：</p> <ul><li>封装性</li> <li>继承性</li> <li>[多态性]</li></ul> <p>扩展阅读：</p> <ul><li><a href="https://zh.wikipedia.org/wiki/%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1" target="_blank" rel="noopener noreferrer">维基百科 - 面向对象程序设计<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://www.zhihu.com/question/19854505" target="_blank" rel="noopener noreferrer">知乎：如何用一句话说明什么是面向对象思想？<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://www.zhihu.com/question/31021366" target="_blank" rel="noopener noreferrer">知乎：什么是面向对象编程思想？<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <h4 id="程序中面向对象的基本体现"><a href="#程序中面向对象的基本体现" class="header-anchor">#</a> 程序中面向对象的基本体现</h4> <p>在 JavaScript 中，所有数据类型都可以视为对象，当然也可以自定义对象。
自定义的对象数据类型就是面向对象中的类（ Class ）的概念。</p> <p>我们以一个例子来说明面向过程和面向对象在程序流程上的不同之处。</p> <p>假设我们要处理学生的成绩表，为了表示一个学生的成绩，面向过程的程序可以用一个对象表示：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> std1 <span class="token operator">=</span> <span class="token punctuation">{</span> name<span class="token operator">:</span> <span class="token string">'Michael'</span><span class="token punctuation">,</span> score<span class="token operator">:</span> <span class="token number">98</span> <span class="token punctuation">}</span>
<span class="token keyword">var</span> std2 <span class="token operator">=</span> <span class="token punctuation">{</span> name<span class="token operator">:</span> <span class="token string">'Bob'</span><span class="token punctuation">,</span> score<span class="token operator">:</span> <span class="token number">81</span> <span class="token punctuation">}</span>
</code></pre></div><p>而处理学生成绩可以通过函数实现，比如打印学生的成绩：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">printScore</span> <span class="token punctuation">(</span><span class="token parameter">student</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'姓名：'</span> <span class="token operator">+</span> student<span class="token punctuation">.</span>name <span class="token operator">+</span> <span class="token string">'  '</span> <span class="token operator">+</span> <span class="token string">'成绩：'</span> <span class="token operator">+</span> student<span class="token punctuation">.</span>score<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p>如果采用面向对象的程序设计思想，我们首选思考的不是程序的执行流程，
而是 <code>Student</code> 这种数据类型应该被视为一个对象，这个对象拥有 <code>name</code> 和 <code>score</code> 这两个属性（Property）。
如果要打印一个学生的成绩，首先必须创建出这个学生对应的对象，然后，给对象发一个 <code>printScore</code> 消息，让对象自己把自己的数据打印出来。</p> <p>抽象数据行为模板（Class）：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">Student</span> <span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> score</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name
  <span class="token keyword">this</span><span class="token punctuation">.</span>score <span class="token operator">=</span> score
<span class="token punctuation">}</span>

<span class="token class-name">Student</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">printScore</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'姓名：'</span> <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">+</span> <span class="token string">'  '</span> <span class="token operator">+</span> <span class="token string">'成绩：'</span> <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>score<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p>根据模板创建具体实例对象（Instance）：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> std1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Student</span><span class="token punctuation">(</span><span class="token string">'Michael'</span><span class="token punctuation">,</span> <span class="token number">98</span><span class="token punctuation">)</span>
<span class="token keyword">var</span> std2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Student</span><span class="token punctuation">(</span><span class="token string">'Bob'</span><span class="token punctuation">,</span> <span class="token number">81</span><span class="token punctuation">)</span>
</code></pre></div><p>实例对象具有自己的具体行为（给对象发消息）：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>std1<span class="token punctuation">.</span><span class="token function">printScore</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// =&gt; 姓名：Michael  成绩：98</span>
std2<span class="token punctuation">.</span><span class="token function">printScore</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// =&gt; 姓名：Bob  成绩 81</span>
</code></pre></div><p>面向对象的设计思想是从自然界中来的，因为在自然界中，类（Class）和实例（Instance）的概念是很自然的。
Class 是一种抽象概念，比如我们定义的 Class——Student ，是指学生这个概念，
而实例（Instance）则是一个个具体的 Student ，比如， Michael 和 Bob 是两个具体的 Student 。</p> <p>所以，面向对象的设计思想是：</p> <ul><li>抽象出 Class</li> <li>根据 Class 创建 Instance</li> <li>指挥 Instance 得结果</li></ul> <p>面向对象的抽象程度又比函数要高，因为一个 Class 既包含数据，又包含操作数据的方法。</p> <h3 id="创建对象"><a href="#创建对象" class="header-anchor">#</a> 创建对象</h3> <h4 id="简单方式"><a href="#简单方式" class="header-anchor">#</a> 简单方式</h4> <p>我们可以直接通过 <code>new Object()</code> 创建：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> person <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Object</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
person<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">'Jack'</span>
person<span class="token punctuation">.</span>age <span class="token operator">=</span> <span class="token number">18</span>

person<span class="token punctuation">.</span><span class="token function-variable function">sayName</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p>每次创建通过 <code>new Object()</code> 比较麻烦，所以可以通过它的简写形式对象字面量来创建：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> person <span class="token operator">=</span> <span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token string">'Jack'</span><span class="token punctuation">,</span>
  age<span class="token operator">:</span> <span class="token number">18</span><span class="token punctuation">,</span>
  <span class="token function-variable function">sayName</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>对于上面的写法固然没有问题，但是假如我们要生成两个 <code>person</code> 实例对象呢？</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> person1 <span class="token operator">=</span> <span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token string">'Jack'</span><span class="token punctuation">,</span>
  age<span class="token operator">:</span> <span class="token number">18</span><span class="token punctuation">,</span>
  <span class="token function-variable function">sayName</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">var</span> person2 <span class="token operator">=</span> <span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token string">'Mike'</span><span class="token punctuation">,</span>
  age<span class="token operator">:</span> <span class="token number">16</span><span class="token punctuation">,</span>
  <span class="token function-variable function">sayName</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>通过上面的代码我们不难看出，这样写的代码太过冗余，重复性太高。</p> <h4 id="简单方式的改进-工厂函数"><a href="#简单方式的改进-工厂函数" class="header-anchor">#</a> 简单方式的改进：工厂函数</h4> <p>我们可以写一个函数，解决代码重复问题：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">createPerson</span> <span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> age</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span>
    name<span class="token operator">:</span> name<span class="token punctuation">,</span>
    age<span class="token operator">:</span> age<span class="token punctuation">,</span>
    <span class="token function-variable function">sayName</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>然后生成实例对象：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> p1 <span class="token operator">=</span> <span class="token function">createPerson</span><span class="token punctuation">(</span><span class="token string">'Jack'</span><span class="token punctuation">,</span> <span class="token number">18</span><span class="token punctuation">)</span>
<span class="token keyword">var</span> p2 <span class="token operator">=</span> <span class="token function">createPerson</span><span class="token punctuation">(</span><span class="token string">'Mike'</span><span class="token punctuation">,</span> <span class="token number">18</span><span class="token punctuation">)</span>
</code></pre></div><p>这样封装确实爽多了，通过工厂模式我们解决了创建多个相似对象代码冗余的问题，
但却没有解决对象识别的问题（即怎样知道一个对象的类型）。</p> <h3 id="构造函数"><a href="#构造函数" class="header-anchor">#</a> 构造函数</h3> <p>内容引导：</p> <ul><li>构造函数语法</li> <li>分析构造函数</li> <li>构造函数和实例对象的关系
<ul><li>实例的 constructor 属性</li> <li>instanceof 操作符</li></ul></li> <li>普通函数调用和构造函数调用的区别</li> <li>构造函数的返回值</li> <li>构造函数的静态成员和实例成员
<ul><li>函数也是对象</li> <li>实例成员</li> <li>静态成员</li></ul></li> <li>构造函数的问题</li></ul> <h4 id="更优雅的工厂函数-构造函数"><a href="#更优雅的工厂函数-构造函数" class="header-anchor">#</a> 更优雅的工厂函数：构造函数</h4> <p>一种更优雅的工厂函数就是下面这样，构造函数：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">Person</span> <span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> age</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name
  <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> age
  <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function-variable function">sayName</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">var</span> p1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token string">'Jack'</span><span class="token punctuation">,</span> <span class="token number">18</span><span class="token punctuation">)</span>
p1<span class="token punctuation">.</span><span class="token function">sayName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// =&gt; Jack</span>

<span class="token keyword">var</span> p2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token string">'Mike'</span><span class="token punctuation">,</span> <span class="token number">23</span><span class="token punctuation">)</span>
p2<span class="token punctuation">.</span><span class="token function">sayName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// =&gt; Mike</span>
</code></pre></div><h4 id="解析构造函数代码的执行"><a href="#解析构造函数代码的执行" class="header-anchor">#</a> 解析构造函数代码的执行</h4> <p>在上面的示例中，<code>Person()</code> 函数取代了 <code>createPerson()</code> 函数，但是实现效果是一样的。
这是为什么呢？</p> <p>我们注意到，<code>Person()</code> 中的代码与 <code>createPerson()</code> 有以下几点不同之处：</p> <ul><li>没有显示的创建对象</li> <li>直接将属性和方法赋给了 <code>this</code> 对象</li> <li>没有 <code>return</code> 语句</li> <li>函数名使用的是大写的 <code>Person</code></li></ul> <p>而要创建 <code>Person</code> 实例，则必须使用 <code>new</code> 操作符。
以这种方式调用构造函数会经历以下 4 个步骤：</p> <ol><li>创建一个新对象</li> <li>将构造函数的作用域赋给新对象（因此 this 就指向了这个新对象）</li> <li>执行构造函数中的代码</li> <li>返回新对象</li></ol> <p>下面是具体的伪代码：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">Person</span> <span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> age</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 当使用 new 操作符调用 Person() 的时候，实际上这里会先创建一个对象</span>
  <span class="token comment">// var instance = {}</span>
  <span class="token comment">// 然后让内部的 this 指向 instance 对象</span>
  <span class="token comment">// this = instance</span>
  <span class="token comment">// 接下来所有针对 this 的操作实际上操作的就是 instance</span>

  <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name
  <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> age
  <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function-variable function">sayName</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// 在函数的结尾处会将 this 返回，也就是 instance</span>
  <span class="token comment">// return this</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="构造函数和实例对象的关系"><a href="#构造函数和实例对象的关系" class="header-anchor">#</a> 构造函数和实例对象的关系</h4> <p>使用构造函数的好处不仅仅在于代码的简洁性，更重要的是我们可以识别对象的具体类型了。
在每一个实例对象中的__proto__中同时有一个 <code>constructor</code> 属性，该属性指向创建该实例的构造函数：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>p1<span class="token punctuation">.</span>constructor <span class="token operator">===</span> Person<span class="token punctuation">)</span> <span class="token comment">// =&gt; true</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>p2<span class="token punctuation">.</span>constructor <span class="token operator">===</span> Person<span class="token punctuation">)</span> <span class="token comment">// =&gt; true</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>p1<span class="token punctuation">.</span>constructor <span class="token operator">===</span> p2<span class="token punctuation">.</span>constructor<span class="token punctuation">)</span> <span class="token comment">// =&gt; true</span>
</code></pre></div><p>对象的 <code>constructor</code> 属性最初是用来标识对象类型的，
但是，如果要检测对象的类型，还是使用 <code>instanceof</code> 操作符更可靠一些：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>p1 <span class="token keyword">instanceof</span> <span class="token class-name">Person</span><span class="token punctuation">)</span> <span class="token comment">// =&gt; true</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>p2 <span class="token keyword">instanceof</span> <span class="token class-name">Person</span><span class="token punctuation">)</span> <span class="token comment">// =&gt; true</span>
</code></pre></div><p>总结：</p> <ul><li>构造函数是根据具体的事物抽象出来的抽象模板</li> <li>实例对象是根据抽象的构造函数模板得到的具体实例对象</li> <li>每一个实例对象都具有一个 <code>constructor</code> 属性，指向创建该实例的构造函数
<ul><li>注意： <code>constructor</code> 是实例的属性的说法不严谨，具体后面的原型会讲到</li></ul></li> <li>可以通过实例的 <code>constructor</code> 属性判断实例和构造函数之间的关系
<ul><li>注意：这种方式不严谨，推荐使用 <code>instanceof</code> 操作符，后面学原型会解释为什么</li></ul></li></ul> <h4 id="构造函数的问题"><a href="#构造函数的问题" class="header-anchor">#</a> 构造函数的问题</h4> <p>使用构造函数带来的最大的好处就是创建对象更方便了，但是其本身也存在一个浪费内存的问题：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">Person</span> <span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> age</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name
  <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> age
  <span class="token keyword">this</span><span class="token punctuation">.</span>type <span class="token operator">=</span> <span class="token string">'human'</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function-variable function">sayHello</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'hello '</span> <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">var</span> p1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token string">'lpz'</span><span class="token punctuation">,</span> <span class="token number">18</span><span class="token punctuation">)</span>
<span class="token keyword">var</span> p2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token string">'Jack'</span><span class="token punctuation">,</span> <span class="token number">16</span><span class="token punctuation">)</span>
</code></pre></div><p>在该示例中，从表面上好像没什么问题，但是实际上这样做，有一个很大的弊端。
那就是对于每一个实例对象，<code>type</code> 和 <code>sayHello</code> 都是一模一样的内容，
每一次生成一个实例，都必须为重复的内容，多占用一些内存，如果实例对象很多，会造成极大的内存浪费。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>p1<span class="token punctuation">.</span>sayHello <span class="token operator">===</span> p2<span class="token punctuation">.</span>sayHello<span class="token punctuation">)</span> <span class="token comment">// =&gt; false</span>
</code></pre></div><p>对于这种问题我们可以把需要共享的函数定义到构造函数外部：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function-variable function">sayHello</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'hello '</span> <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">Person</span> <span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> age</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name
  <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> age
  <span class="token keyword">this</span><span class="token punctuation">.</span>type <span class="token operator">=</span> <span class="token string">'human'</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>sayHello <span class="token operator">=</span> sayHello
<span class="token punctuation">}</span>

<span class="token keyword">var</span> p1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token string">'lpz'</span><span class="token punctuation">,</span> <span class="token number">18</span><span class="token punctuation">)</span>
<span class="token keyword">var</span> p2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token string">'Jack'</span><span class="token punctuation">,</span> <span class="token number">16</span><span class="token punctuation">)</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>p1<span class="token punctuation">.</span>sayHello <span class="token operator">===</span> p2<span class="token punctuation">.</span>sayHello<span class="token punctuation">)</span> <span class="token comment">// =&gt; true</span>
</code></pre></div><p>这样确实可以了，但是如果有多个需要共享的函数的话就会造成全局命名空间冲突的问题。</p> <p>你肯定想到了可以把多个函数放到一个对象中用来避免全局命名空间冲突的问题：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> fns <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token function-variable function">sayHello</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'hello '</span> <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function-variable function">sayAge</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>age<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">Person</span> <span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> age</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name
  <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> age
  <span class="token keyword">this</span><span class="token punctuation">.</span>type <span class="token operator">=</span> <span class="token string">'human'</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>sayHello <span class="token operator">=</span> fns<span class="token punctuation">.</span>sayHello
  <span class="token keyword">this</span><span class="token punctuation">.</span>sayAge <span class="token operator">=</span> fns<span class="token punctuation">.</span>sayAge
<span class="token punctuation">}</span>

<span class="token keyword">var</span> p1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token string">'lpz'</span><span class="token punctuation">,</span> <span class="token number">18</span><span class="token punctuation">)</span>
<span class="token keyword">var</span> p2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token string">'Jack'</span><span class="token punctuation">,</span> <span class="token number">16</span><span class="token punctuation">)</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>p1<span class="token punctuation">.</span>sayHello <span class="token operator">===</span> p2<span class="token punctuation">.</span>sayHello<span class="token punctuation">)</span> <span class="token comment">// =&gt; true</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>p1<span class="token punctuation">.</span>sayAge <span class="token operator">===</span> p2<span class="token punctuation">.</span>sayAge<span class="token punctuation">)</span> <span class="token comment">// =&gt; true</span>
</code></pre></div><p>至此，我们利用自己的方式基本上解决了构造函数的内存浪费问题。
但是代码看起来还是那么的格格不入，那有没有更好的方式呢？</p> <h4 id="小结-3"><a href="#小结-3" class="header-anchor">#</a> 小结</h4> <ul><li>构造函数语法</li> <li>分析构造函数</li> <li>构造函数和实例对象的关系
<ul><li>实例的 constructor 属性</li> <li>instanceof 操作符</li></ul></li> <li>构造函数的问题</li></ul> <h3 id="原型"><a href="#原型" class="header-anchor">#</a> 原型</h3> <p>内容引导：</p> <ul><li>使用 prototype 原型对象解决构造函数的问题</li> <li>分析 构造函数、prototype 原型对象、实例对象 三者之间的关系</li> <li>属性成员搜索原则：原型链</li> <li>实例对象读写原型对象中的成员</li> <li>原型对象的简写形式</li> <li>原生对象的原型
<ul><li>Object</li> <li>Array</li> <li>String</li> <li>...</li></ul></li> <li>原型对象的问题</li> <li>构造的函数和原型对象使用建议</li></ul> <h4 id="更好的解决方案-prototype"><a href="#更好的解决方案-prototype" class="header-anchor">#</a> 更好的解决方案： <code>prototype</code></h4> <p>Javascript 规定，每一个构造函数都有一个 <code>prototype</code> 属性，指向另一个对象。
这个对象的所有属性和方法，都会被构造函数的实例继承。</p> <p>这也就意味着，我们可以把所有对象实例需要共享的属性和方法直接定义在 <code>prototype</code> 对象上。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">Person</span> <span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> age</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name
  <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> age
<span class="token punctuation">}</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token class-name">Person</span><span class="token punctuation">.</span>prototype<span class="token punctuation">)</span>

<span class="token class-name">Person</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>type <span class="token operator">=</span> <span class="token string">'human'</span>

<span class="token class-name">Person</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">sayName</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">var</span> p1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token operator">...</span><span class="token punctuation">)</span>
<span class="token keyword">var</span> p2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token operator">...</span><span class="token punctuation">)</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>p1<span class="token punctuation">.</span>sayName <span class="token operator">===</span> p2<span class="token punctuation">.</span>sayName<span class="token punctuation">)</span> <span class="token comment">// =&gt; true</span>
</code></pre></div><p>这时所有实例的 <code>type</code> 属性和 <code>sayName()</code> 方法，
其实都是同一个内存地址，指向 <code>prototype</code> 对象，因此就提高了运行效率。</p> <h4 id="构造函数、实例、原型三者之间的关系"><a href="#构造函数、实例、原型三者之间的关系" class="header-anchor">#</a> 构造函数、实例、原型三者之间的关系</h4> <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAApMAAAG0CAYAAABuV6zuAAAa3klEQVR4nO3dy5LbuAEF0OnU1EyySv7/KzOrTLzpmHFxTMMACYAvPM6pctktiRTVllq3LwDq47//+ffnLwAAUOFvbx8AAAD9EiYBAKgmTAIAUE2YBACgmjAJAEA1YRIAgGrCJAAA1YRJAACqCZMAAFQTJgEAqCZMAgBQTZgEAKCaMAkAQDVhEgCAasIkAADVhEkAAKoJkwAAVBMmAQCoJkwCAFBNmAQAoJowCQBANWESAIBqwiQAANWESf7v93/8K/rvM/sL93nFfgGAtvx6dgdrQPjvf/59+mDOWo7l7uOIBaIWHvsZ4fdt+fcV38vYPgE45ufl+3p/b3/SqTC5DRxPBbm9+3jiPz4WtJ547ADM5fPz8+1DmNbHx8fbh9CVy4a5hak+pYKwJhHgHcvPXkHyXcv333tgvqpmMja/bttQpr5O/Tu17/C2sf2H28SCUez6nGOplTqeo/uMPfa3HgMAQI6Pr+Gj+tefVKu1NwwcC5upofLS4eTY9bXHsuco9B19HW6Tc5xXP4bU/eZe9/Q+AWaglWzLMtztPevY6QU4NXL/Y56aA3n1dkfV+NGw8vLvkuNq7YmeWsAjSALAeF4Jk6M7G1CFLoD5aCXbs/x/aCeP3X6eyTMTWPe27WVibO5xhnMin3p8qfsSaAGAHNVzJvfmDW6vT4WV8PJwDmBsn+F+U8eyd33qfo7ud29fubfJXWAT2/eVjyF2vFcPSRvmBsinlWybdnLfqQU4jOPqc4YerfIH4Dthsm3C5D5hEgBeJEj2QaBM89ncAABUEyYB4CVayX74VJw0YRIAgGrCJAAA1YRJAHiBIe7+GOqOe/QTcPwHjMOKNgBg8fjHKfotrH/L6REAqKeV7JePWPyZYW4AAKo93kwCnPHbP/71y5dNI/Bb5vSZL0GLEO4ndRlcTSvZP+3kj4RJ4BY1IS+1zXKbvaB3FABzjwWAcsIkcJswKB6FvjA05jaFZ8OiRpKnaCXHoZ38TpgEbrUNemHouyrAlQxXp8Lqemzr38IlQB5hErhdLJiFwTIVOmvbye3XOcPjR0PpcJZWcjzayW+ESeB2OcPQqbawJNztNY57xyZAAtQTJoHb5TST62W1i2zCfdau8oY7aCXHpZ0UJoEH5AS7WJCMzYVMyV3scxRszZkEKCNMArc6G/LCeY0xqZbzaP/hdYa8AcoJk8DtYicaLxn63soJo+v+t3/DWwxxj2/2oW5hErhVavg6d1i7pCmsmTMJwDnCJHC5sBlcL9s6un67r1A4LL03zzFnNXfqa0PenKWVnMfM7eTH1wf92LPci2oMs75YAEp535vLrO+Pf3v7AABgRILkfJb/798nnGIjTAIAUE2YBICLaSXnNWM7KUwCAFBNmASAC2klma2dFCYBAKgmTALARbSSrGZqJ4VJAJjMcj7EkstTt8m5fc1xXLFvnuMTcABgMuunteS2qNtgt92mdD+51vsLA6XWt03CJABcoJch7rBZXANh7Pr18ax/HzWJ28cfu23O9ycVTntsKmf5iEVhEgAmkgp8YcuYG95SATG8PNU2xu7zaBi+h9A+E2ESAE7qpZXcqh3m3ga6miHuMMweDZvnNJ4tm6GdFCYBYFK5reD2NuGweHh5eNva49r7mrZYzQ0AJ/TaSi62wXA7P/KKOYvbfZcMn4f3v36dOq4ejH6aIGESACYSG1o+s31pAxlrNsP9r/uMLQ7qNVCOrLlh7pIn6d6Kr70nW85vRVccH4zqt7//8+1DeNWXP/94+xBoRI+t5N576vbv8LrUHMm9YFozrzJsMGPtaY9GnjvZdTMZVugl28X+rNfFmL8BwMj2hrlzhr2PQujR/rbbxJrJo0aT9zQdJrdBcftnK2wJY9vE9hm7r73VYjkvrBzhY/HCAGhbaq5bj61kSuxxlIzS5ey/5FRD6+1Tq717fe8cde5kM8PcqTkRqfNUhZeVDj2nVpzFtk0F0thk4qP7zTntAcys9vXgdcSd1gAw4hBlqfA9OrekCa87ujy1YMfrvD3NhMnYaQeOTi9wZg5FSaiLzd8Ib++NDGB821ap95/5pW1k6TYlcyvPHFNvRpw72UyYXJQ0fOttUnV3zm8yJUPX25AbzuW4+ome+j4cTUY+mgIQXj7a5Gaes3ceuu31Oc/VWPuQej6WbhfevnTxXenPpJ6MONQGvKOpMLkqbfzOzF/MaSZTczbOvLnsBcbU16k5JKntjvYZ25+G9Rm9v5EfNfulz9XthP/c12HOduFxHo165F7X+//fYqRW5G4j/H/DnZoJk0fD20chZ69xyHljWm+Xujzc5mzgqn0sqW3DBqjk+Goeix+u58zyRt7CLybb13XpL0up1+Is/3/8bPt/f+aX76N2n3GNNsS9aCZMlk7Szd1HavuS+Ro5w29Xqt33k+3iaC8EiPHmzurqn3kl8/ZnZCFeX5o+NdDasOU+MWpOu5Nzm20bmdtmXiU3TJfODYMe1D6PY/OHr5yawlxSQXK53POCEiO2kotmmskjd82bzN1ubyFByRvVuo+9leNHC3BKFifs7TM8lqNjg1DNc3XvOR5ef8V2tY/h6P7gbq0vxrQQj1U3YfIoyB3Ze6GV3ncsQOYGypwnYskQfO5+U8G19Nhgq+a5eub6O36pPPO6grWdvGLu5N6Qd4uLMY+G6kuPczv618NCvFKjtpKL5sJkyZvI9olxdv8l26Tu1xsPs+ilxd5rFHp5DIxt77nXw2LMN/dbegxXL8Tju+bCJNC+Ft4ccmgdecLZdjLl7PQtvyhd44rv4cit5EKYBIp9+fOPtw8BplIyL790+lXOPtf9veGqld1XfD8E9DhhEgBOKm0nR1qMaSHe8b5HbiUXwiQAPKynxZhvLZizEK8fTZ9nEgB6Mdt5J8PmsVXrivLUqvLt33fc9+it5EIzCQAU66Wx0zreTzMJAEA1YRIALjLbUDdpswxxL4RJAACqCZMAcCHtJDO1kgthEgCAasIkAFxMOzmv2VrJhTAJAEA1YRIAbqCdnM+MreRCmAQAoJowCQA30U7OY9ZWciFMAgBQTZgEgBtpJ8c3cyu5ECYBAKgmTAIAUE2YBICbGeoe1+xD3AthEgCAasIkADxAOzkereQ3wiQAANWESQB4iHZyHFrJ74RJAACqCZMA8CDtZP+0kj8SJgEAqCZMAsDDtJP90kr+TJgEAKCaMAkAL9BO9kcrGSdMAgBQ7den79BvYQAA4/j473/+/fn2QYzo93/8SxUOwKHl/eLz01tx6wxxpxnmvsnyhFt+QCx/AABGJUzeaAmUa6gEgBgLcdqnldwnTD7AExAAGJUwCQAv0062Syt5TJh8mCFvAGAkwuTDLMwBIEY72R6tZB5h8gUW5gAAoxAmX+S3HQC2tJPt0ErmEyYBAKgmTDbEsDcA2sn3aSXLPP7Z3KRt51F6EgPMTaCkFz6bu1E+2xuAnoSja97D5mGYu1FehAD0YD3d3fq+5f1rPoa5O6ClBKA1qWlZ3rPmI0x2wFxKAFpxFCItJp2PMNmJ9UXrNz4A3nBUanhvmpcw2RkvVgDe4P2HFAtwAIBqhrURJjvmBQzAm0y9YiFMdmyd6CxUAvC0WJAULudkzmTntgtztl8DwF2ERraEyUF4UQPwFO85bBnmBgCgmjA5KPMoAbja0XuLxnJOwuSgLM4B4ErmSZIiTA5sedH7aCsAzhIk2SNMTsAPAABqCZIcESYno6UEoIQgyRFhcjLmUgIAVxImJ7SdSylUAhDj/YFcTlo+MUMXAMBZmkkA4AcW3VBCmOQvhjQAgFLCJH8xjxIArSSlPr4+YT7fPgja44cJAJBDM0mUIAkA5BAmAWBypjdxhjDJIT9kAMZlWhNnCZMcsjAHAEhx0nKyrL+1roHSb7EA/dNKcgWruQEAqGaYm1MMfQPA3IRJTlnnUwLQBz+zuZowyWkCJUAfzJHkDsIklxAoAWBOwiSX8dsuQLu0ktxFmOQWWkqAtgiS3EWY5BZOdA4AcxAmuc0SKIVKgPf42csTfAIOtzO0AvA8cyR5imYSAIBqwiSPM+wCcC+tJE/y2dy8Yg2UftgBQN80k7xiuzgHAOiXMMmrNJMA0DdhEgAGYKSHtwiTNMMPQoA6FtzwJmGSZjjBOQD0x0nLacr6m7XV3gB5tJK8zamBAACoZpibLhj6BoA2CZN0wXxKgO/8LKQlwiTdcKJzAHMkaY8wSXf8EAWAdgiTANAJrSQtEibpmiFvYCaCJC0SJumahTkA8C5hku5tF+YIlcBo/FyjdT4Bh2EY/gFGY44kPRAmucRvf/9n9PKPj49fPj+PP2QpvN3edqnrju5ruX7P0ba5x5dzm7Pbf/nzj91tAeApwiTdWQLWGrRyw+q6XUxJ6CsNx7mhcXuM26/D64B5aCXphTDJpWLtX3hZbrja2y4MeLF/54TAo7AYblPasoaBMnYc2+vCr8PrgHkIkvRCmORye+EsDEVhENyGsNTt9vZdMnR8FPJSxxoLeEdhMWcIPmwlw/soaWEB4CnCJK8KQ9hRwFsv325ben+5ITS3MQybzFjwzZ2PmTouQRKAVjk1EK8rnRe4DVjbP6nLUtvn3GdsqDkVGMN9rn9yxB5D+G9gDk4FRG80k1xub6j2aLuSJq62qcttJlOt49UNYU4DCszBoht6JExyudI5k3vD22dO95N7+qBUSIwdwxPhzmpumJMgSa+ESV61d0qeM/vIHeLO3UfNPM3cbVIryDWTMA9Bkp4JkzRnr8mMqZlTmLNNrDFNXZfafnt/qTmU4Xkz945TuIQxCZL0TJjkcrVzJmPumjdZcqLzWMNYc9L0I7UnSAeANwmTXK52juPe7VNBruRYzt53LEDGAuXRsaXmjaauSz0eoH+GtxmBMMmlapvEkstrFsPUnpMy5373jrFkv7XHCfRJkGQUzjMJAA8TJBmJZpJLfPnzj7cPAaALgiSj0UxCBp9IAVxFkGQ0wiRkWH74L4FSqASAHwmTkGkJlGuoBCjlZwejEiahkCEqoJR5koxMmISTtA3AHkGS0QmTcJL5lECKIMkMPr4+yZ0lGS7ijQOA2Wgm4UKCJACzESYBAKgmTMJNzKGEeXn9MxNhEm5iYQ7MydxpZiNMwo2c6ByA0QmT8AAtBcxBK8mMhEkAuIggyYyESXiBYW8ARiFMwgsszoFxeB0zO2ESXmJxDvTPHEkQJuF13ogA6JkwCQ3RUkI/tJLwjTAJDTHsDf0QJOEbYRIaI1AC0BNhEhokUEKbvC7hZ8IkNMoQGrTFHEmIEyahExoRAFokTEInnOgc3qOVhLSPry+Oz7cPAijjjQ2AVvz69gEA5QRJRvXb3//59iG86suff7x9CFDMMDcAANWESeicOZQAvEmYhM5ZmAP3+vj4ePsQoGnCJAxgCZROdA7AGyzAgYFYmMOsYu3h5+fnT9cvl23/Hdt+vXx7WWyb1HYwG2ESgO6tITEMiOvX6/XhbcLbbb/ehspYUNy7P5iJYW4YmGFv+JGwB9cTJmFgFucAcDdhEgZncQ5cx8pu+Jk5kzAJi3OYQWpBzHp5bCHNdlFOeF14fcl2MAvNJExIS8mo1oUzsUCYum5vu/D60u1gBppJmNB22FtjSUtSw8hhC5i6roUV1bWPAXolTMKk1hC5hEqBklbshara657Wy3HCVT6+vol4ZgMwDb9AwbXMmQRgGoIkXE+YBP5iYQ4ApYRJ4C9Ocs7ItJJwD3MmgSirvQHIYTU3ECVEApDDMDcAwzJlA+4nTAJZvCkDECNMAlkszqE3FtzAM4RJINvyxrz9KEYAECaBYtoeWqeVhOcIk8ApWkpaJEjCc4RJ4BRzKQHmJkwCp23nUgqVvMnz79hvhd+jvduX7osxOWk5cBlDi7xptHmSuUHty+Yxp7ZZbrNc9+XC7896X+F9Xnkf9EGYBKB7owXJVRgUj4JaGBqPtomFz5wwmNqvpnJOwiRwm1Hf4GnL6M+zbUC7ugUMt0+1jWFAjd0m3IeGch7CJHCb7Tkpj97sRw8E3GeG501OC5gKnTXD23uNaGzIPPY18xAmgVutb/RHYXENnjMEAyiVE85iQ9s5w9y1DeJemGUuwiTwCCGRq830y0fu/MS9cBi7fNsyloTQcMg7NVzOHIRJoBnaSXLN9jzJCWexAFgb8o5Wf4chsiSIMh5hEnjcbEGAa832/Mld0Z1qL8P5jrHtSgNgrJm08GZewiTwuL2FOdpJ9sz63Dha8LK9/OiyWFsZC5Q5pxRKhUqBci7CJPCK7cKc7dewZ8bnSWr4OndYOzfYlQTBo2ZSSzkXYRJ4VSwcaCeZXWpRzNbR9dt9hXLmN+bsb+/YmMfH1x/Wn28fBMBqDZHCJFueD9AuYRJ41O9BgxELCNvbCBAIktA2w9zAo8JQEIbL7e1S1wHQDs0k0Izc8KilmodWEtqnmQRulxsSPz/zfrf9+PjIup0Q0jdBEvqgmQRusQ2QuSHxatvQKZQA3EMzCVwibB/fCpCpYwjbTOES4BrCJFCthfYxV3h8Wst2Gd6GvgiTQLYW28daWss2CZLQH2ESOLSGyJ7D455UaynUABwTJoGk0UNkyvp4hcpnaSWhT1ZzAz+ZNUSmCJUAaZpJ4C9CZJymEiDtb28fANCGJUguoUmQTFu/Pz7m8Tq+l9A/zSRMThtZbvleaSnPM0cSxiBMwqSEyHMMfQN8I0zChNYhbc7bhkqBMp9WEsZhziRMRpC8h7mUZQRJGIdmEiZhWPt+5lICM9JMwgSs1H6OFd9pvicwJmESBmdY+x0CJTALw9wwKMPa7zPs/Z0FNzAuYRIGpI1sh9XewOgMc8NgBMk2zTzsrZWEsQmTMBBBsm2zBkpBEsYmTMIgBMk+zBoogXEJkzAAQbIvMwTK0R8f8J0wCZ0TJPs0cqA0RxLmIkxCxwTJvo0cKIF5CJMAXEYrCfMRJqFTWskxjNZOCpIwH2ESOiRIjmW0QAnMRZiEzgiSY+o5UPZ63MA1hEnoiCA5th4DpTmSgDAJnRAk59BjoATmJkwCUEUrCSyESeiAVnIuvbSTgiSwECYBAKgmTELjtJJzarWdbPGYgHcJk9AwQXJurQZKgC1hEoAsFtwAMcIkNEoryUI7CbROmATgkFYSSBEmoUFaSbZaaCcFSSBFmAQAoJowCY3RShLzRjv5dhsK9EGYBOAn5kgCuYRJaIhWkj0tzJ0ECAmTAPxAKwmUECYB+IEgCZQQJqERhrjJYagbaI0wCcD/CalADWESAPMkgWrCJDTAEDclrh7qFiSBM4RJgIkJksBZwiTAxARJ4CxhEl5miJsaVnUDrRAmASYkiAJXESYBJmOeJHAlYRJeZIibMwx1Ay0QJgEmopUEriZMAkxCkATuIEwCTEKQBO4gTAIAUE2YBBicRTrAnYRJgIGZJwncTZgEhvfx8XHJ7XL30wpBEnjCr28fAMCVUoEvdnnsHJ/h7Xo9D6ggCTxFmISXtHbC8tyw1YOc4w4f7/L1ut3237GvW7Ic13J8YXAUJIGnGOYG/m8NS8vf65/ehnUXYQiM/Tu8HQD1hElgWLmBOHab5bIew7SV28DTDHMD2bbhKtYAbsNbqiHcu247zLy3v9xjXRvWI9v7CYe7e2KeJPAGYRL4wV5gTH29hrHY3MLYdkf7jO2vdN7iug/D2QD3EibhQT0MQe6Fr6OmLrZt2C6WBsJSsYU1qetSwbfHEKqVBN4iTMLNegiQuWoDVm27eOa+tnLvN2xaewqUgiTwFgtw4GajvsnXnAj8jRXi4VB5zf33FCoBniZMwgtaDJjbBSgx23mMqXmQqbCW2i61z/BYjo4t9Xhi95cTaHtrJQHeZJgbbtbLMHfJMHDJtkf7Tc2zLD22Vc7q771h7NQiIgDihEm4UbgoYvv18rcG7Hq5389UYM0Jty2JffoNwJOESbjB2kb6iDsARidMwsWcogWAmQiTcJFUGwkAIxMm4QLaSABm5dRAcJIgCcDMNJNQybA2AAiTUEUbCQDfCJNQQBsJAD8SJiHTHW2kE5dzhhOWAy2wAAcyGNYGgDjNJOwwrA0A+4RJSHiqjTTUTQ1D3EArhEkIaCMBIJ8wCRvmRgJAGWESfnm/jTTUTQlD3EBLhEmmp40EgHpODcTUBEkAOEczyZTeHtaOMdRNDkPcQGuESaajjQSA6wiTTKPFNhIAeidMMoVe2khD3ewxxA20SJhkaNpIALiXMMmwemkjQ9pJYrSSQKucGogh9RokAaA3mkmGMsqwtnaSLa0k0DJhkmFoIwHgecIk3RuljQxpJ1loJYHWCZN0TRsJAO96NUyujRL9eyPQzRAktZNz00oCPXi9mfQm2b/lDe9Jow5rpwiUcxIkgV68HiahxAxtJAD0RJikC7O1kSHt5Fy0kkBPhEmap40EgHYJkzRr9jYypJ2cg1YS6I0wSZO0kXEC5dgESaBHPpub5giS+9ZAyVgESaBXmkmaYVg7n4ZyLIIk0DNhkiZoI8sJlGMQJIHeCZO8ShsJAH0TJnmNNvI87WTftJLACCzA4RWC5HUsyOmTIAmMQjPJowxr30ND2RdBEhiJMMljtJH3Eij7IEgCoxEmuZ028jkCZdsESWBEwiS30kY+T6BskyAJjEqY5BbayHdtF+UIle9a/x+8FoBRCZNcThvZhvX/QEv5Hm0kMANh8mKxU7TM9EYuSLbHsPc7BElgFsLkxZY37PCNe4Y3csPabTPs/RzD2sBshEku4Y2zfYa976eNBGbkE3BgMj4x5x6CJDArzSRMyLD3dQxrA7MTJm+ybX68WdOi7bD3wvO0jBAJ8I0weRNvzPTCXMpyhrQBvjNn8mJrW2FOGr1Zh749d9PW748gCfCdZvJimh16Zug7zpA2QJowCfxEqPxGiAQ4JkwCSbOGSiESIJ8wCRwKQ+VqlHAZPi4hEiCfMAlkC0NWz6fA2h678AhQT5gEqm1DWOutpfYR4B7CJHCJFltL7SPA/YRJ4BZ7rWVKbujM3Z8ACXA/YRK4XW6oExIB+iNMAs0QEgH64+MUAQCoJkwCAFBNmAQAoJowCQBANWESAIBqr6/mzj0VCAAA7Xk1TDoNCABA3wxzAwBQTZgEAKCaMAkAQDVhEgCAasIkAADVhEkAAKoJkwAAVBMmAQCoJkwCAFBNmAQAoJowCQBANWESAIBqwiQAANWESQAAqgmTAABUEyYBAKgmTAIAUO1/vL6pEYxyTUQAAAAASUVORK5CYII=" alt=""> <p>任何函数都具有一个 <code>prototype</code> 属性，该属性是一个对象。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token constant">F</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token class-name">F</span><span class="token punctuation">.</span>prototype<span class="token punctuation">)</span> <span class="token comment">// =&gt; object</span>

<span class="token class-name">F</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">sayHi</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'hi!'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p>构造函数的 <code>prototype</code> 对象默认都有一个 <code>constructor</code> 属性，指向 <code>prototype</code> 对象所在函数。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token class-name">F</span><span class="token punctuation">.</span>constructor <span class="token operator">===</span> <span class="token constant">F</span><span class="token punctuation">)</span> <span class="token comment">// =&gt; true</span>
</code></pre></div><p>通过构造函数得到的实例对象内部会包含一个指向构造函数的 <code>prototype</code> 对象的指针 <code>__proto__</code>。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> instance <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">F</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>instance<span class="token punctuation">.</span>__proto__ <span class="token operator">===</span> <span class="token class-name">F</span><span class="token punctuation">.</span>prototype<span class="token punctuation">)</span> <span class="token comment">// =&gt; true</span>
</code></pre></div><p class="tip">
  `__proto__` 是非标准属性。
</p> <p>实例对象可以直接访问原型对象成员。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>instance<span class="token punctuation">.</span><span class="token function">sayHi</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// =&gt; hi!</span>
</code></pre></div><p>总结：</p> <ul><li>任何函数都具有一个 <code>prototype</code> 属性，该属性是一个对象</li> <li>构造函数的 <code>prototype</code> 对象默认都有一个 <code>constructor</code> 属性，指向 <code>prototype</code> 对象所在函数</li> <li>通过构造函数得到的实例对象内部会包含一个指向构造函数的 <code>prototype</code> 对象的指针 <code>__proto__</code></li> <li>所有实例都直接或间接继承了原型对象的成员</li></ul> <h4 id="属性成员的搜索原则-原型链"><a href="#属性成员的搜索原则-原型链" class="header-anchor">#</a> 属性成员的搜索原则：原型链</h4> <p>了解了 <strong>构造函数-实例-原型对象</strong> 三者之间的关系后，接下来我们来解释一下为什么实例对象可以访问原型对象中的成员。</p> <p>每当代码读取某个对象的某个属性时，都会执行一次搜索，目标是具有给定名字的属性</p> <ul><li>搜索首先从对象实例本身开始</li> <li>如果在实例中找到了具有给定名字的属性，则返回该属性的值</li> <li>如果没有找到，则继续搜索指针指向的原型对象，在原型对象中查找具有给定名字的属性</li> <li>如果在原型对象中找到了这个属性，则返回该属性的值</li></ul> <p>也就是说，在我们调用 <code>person1.sayName()</code> 的时候，会先后执行两次搜索：</p> <ul><li>首先，解析器会问：“实例 person1 有 sayName 属性吗？”答：“没有。</li> <li>”然后，它继续搜索，再问：“ person1 的原型有 sayName 属性吗？”答：“有。</li> <li>”于是，它就读取那个保存在原型对象中的函数。</li> <li>当我们调用 person2.sayName() 时，将会重现相同的搜索过程，得到相同的结果。</li></ul> <p>而这正是多个对象实例共享原型所保存的属性和方法的基本原理。</p> <p>总结：</p> <ul><li>先在自己身上找，找到即返回</li> <li>自己身上找不到，则沿着原型链向上查找，找到即返回</li> <li>如果一直到原型链的末端还没有找到，则返回 <code>undefined</code></li></ul> <h4 id="实例对象读写原型对象成员"><a href="#实例对象读写原型对象成员" class="header-anchor">#</a> 实例对象读写原型对象成员</h4> <p>读取：</p> <ul><li>先在自己身上找，找到即返回</li> <li>自己身上找不到，则沿着原型链向上查找，找到即返回</li> <li>如果一直到原型链的末端还没有找到，则返回 <code>undefined</code></li></ul> <p>值类型成员写入（<code>实例对象.值类型成员 = xx</code>）：</p> <ul><li>当实例期望重写原型对象中的某个普通数据成员时实际上会把该成员添加到自己身上</li> <li>也就是说该行为实际上会屏蔽掉对原型对象成员的访问</li></ul> <p>引用类型成员写入（<code>实例对象.引用类型成员 = xx</code>）：</p> <ul><li>同上</li></ul> <p>复杂类型修改（<code>实例对象.成员.xx = xx</code>）：</p> <ul><li>同样会先在自己身上找该成员，如果自己身上找到则直接修改</li> <li>如果自己身上找不到，则沿着原型链继续查找，如果找到则修改</li> <li>如果一直到原型链的末端还没有找到该成员，则报错（<code>实例对象.undefined.xx = xx</code>）</li></ul> <h4 id="更简单的原型语法"><a href="#更简单的原型语法" class="header-anchor">#</a> 更简单的原型语法</h4> <p>我们注意到，前面例子中每添加一个属性和方法就要敲一遍 <code>Person.prototype</code> 。
为减少不必要的输入，更常见的做法是用一个包含所有属性和方法的对象字面量来重写整个原型对象：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">Person</span> <span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> age</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name
  <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> age
<span class="token punctuation">}</span>

<span class="token class-name">Person</span><span class="token punctuation">.</span>prototype <span class="token operator">=</span> <span class="token punctuation">{</span>
  type<span class="token operator">:</span> <span class="token string">'human'</span><span class="token punctuation">,</span>
  <span class="token function-variable function">sayHello</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'我叫'</span> <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">+</span> <span class="token string">'，我今年'</span> <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">+</span> <span class="token string">'岁了'</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>在该示例中，我们将 <code>Person.prototype</code> 重置到了一个新的对象。
这样做的好处就是为 <code>Person.prototype</code> 添加成员简单了，但是也会带来一个问题，那就是原型对象丢失了 <code>constructor</code> 成员。</p> <p>所以，我们为了保持 <code>constructor</code> 的指向正确，建议的写法是：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">Person</span> <span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> age</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name
  <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> age
<span class="token punctuation">}</span>

<span class="token class-name">Person</span><span class="token punctuation">.</span>prototype <span class="token operator">=</span> <span class="token punctuation">{</span>
  constructor<span class="token operator">:</span> Person<span class="token punctuation">,</span> <span class="token comment">// =&gt; 手动将 constructor 指向正确的构造函数</span>
  type<span class="token operator">:</span> <span class="token string">'human'</span><span class="token punctuation">,</span>
  <span class="token function-variable function">sayHello</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'我叫'</span> <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">+</span> <span class="token string">'，我今年'</span> <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">+</span> <span class="token string">'岁了'</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="原生对象的原型"><a href="#原生对象的原型" class="header-anchor">#</a> 原生对象的原型</h4> <p class="tip">
  所有函数都有 prototype 属性对象。
</p> <ul><li>Object.prototype</li> <li>Function.prototype</li> <li>Array.prototype</li> <li>String.prototype</li> <li>Number.prototype</li> <li>Date.prototype</li> <li>...</li></ul> <p>练习：为数组对象和字符串对象扩展原型方法。</p> <h4 id="原型对象的问题"><a href="#原型对象的问题" class="header-anchor">#</a> 原型对象的问题</h4> <ul><li>共享数组</li> <li>共享对象</li></ul> <p>如果真的希望可以被实例对象之间共享和修改这些共享数据那就不是问题。但是如果不希望实例之间共享和修改这些共享数据则就是问题。</p> <p>一个更好的建议是，最好不要让实例之间互相共享这些数组或者对象成员，一旦修改的话会导致数据的走向很不明确而且难以维护。</p> <h4 id="原型对象使用建议"><a href="#原型对象使用建议" class="header-anchor">#</a> 原型对象使用建议</h4> <ul><li>私有成员（一般就是非函数成员）放到构造函数中</li> <li>共享成员（一般就是函数）放到原型对象中</li> <li>如果重置了 <code>prototype</code> 记得修正 <code>constructor</code> 的指向</li></ul> <h3 id="案例-随机方块"><a href="#案例-随机方块" class="header-anchor">#</a> 案例：随机方块</h3> <hr> <h2 id="面向对象游戏案例-贪吃蛇"><a href="#面向对象游戏案例-贪吃蛇" class="header-anchor">#</a> 面向对象游戏案例：贪吃蛇</h2> <p>案例相关源码以上传到 GitHub ：https://github.com/lipengzhou/new-snake</p> <h3 id="案例介绍"><a href="#案例介绍" class="header-anchor">#</a> 案例介绍</h3> <h4 id="游戏演示"><a href="#游戏演示" class="header-anchor">#</a> 游戏演示</h4> <p>在线演示地址：<a href="https://lipengzhou.github.io/new-snake/" target="_blank" rel="noopener noreferrer">贪吃蛇<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h4 id="案例目标"><a href="#案例目标" class="header-anchor">#</a> 案例目标</h4> <p>游戏的目的是用来体会js高级语法的使用 不需要具备抽象对象的能力，使用面向对象的方式分析问题，需要一个漫长的过程。</p> <h3 id="功能实现"><a href="#功能实现" class="header-anchor">#</a> 功能实现</h3> <h4 id="搭建页面"><a href="#搭建页面" class="header-anchor">#</a> 搭建页面</h4> <p>放一个容器盛放游戏场景 div#map，设置样式</p> <div class="language-css extra-class"><pre class="language-css"><code><span class="token selector">#map</span> <span class="token punctuation">{</span>
  <span class="token property">width</span><span class="token punctuation">:</span> 800px<span class="token punctuation">;</span>
  <span class="token property">height</span><span class="token punctuation">:</span> 600px<span class="token punctuation">;</span>
  <span class="token property">background-color</span><span class="token punctuation">:</span> #ccc<span class="token punctuation">;</span>
  <span class="token property">position</span><span class="token punctuation">:</span> relative<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="分析对象"><a href="#分析对象" class="header-anchor">#</a> 分析对象</h4> <ul><li>游戏对象</li> <li>蛇对象</li> <li>食物对象</li></ul> <h4 id="创建食物对象"><a href="#创建食物对象" class="header-anchor">#</a> 创建食物对象</h4> <ul><li><p>Food</p> <ul><li><p>属性</p> <ul><li>x</li> <li>y</li> <li>width</li> <li>height</li> <li>color</li></ul></li> <li><p>方法</p> <ul><li>render       随机创建一个食物对象，并输出到map上</li></ul></li></ul></li> <li><p>创建Food的构造函数，并设置属性</p></li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> position <span class="token operator">=</span> <span class="token string">'absolute'</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> elements <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token function">Food</span><span class="token punctuation">(</span><span class="token parameter">x<span class="token punctuation">,</span> y<span class="token punctuation">,</span> width<span class="token punctuation">,</span> height<span class="token punctuation">,</span> color</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>x <span class="token operator">=</span> x <span class="token operator">||</span> <span class="token number">0</span><span class="token punctuation">;</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>y <span class="token operator">=</span> y <span class="token operator">||</span> <span class="token number">0</span><span class="token punctuation">;</span>
  <span class="token comment">// 食物的宽度和高度(像素)</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>width <span class="token operator">=</span> width <span class="token operator">||</span> <span class="token number">20</span><span class="token punctuation">;</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>height <span class="token operator">=</span> height <span class="token operator">||</span> <span class="token number">20</span><span class="token punctuation">;</span>
  <span class="token comment">// 食物的颜色</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>color <span class="token operator">=</span> color <span class="token operator">||</span> <span class="token string">'green'</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li>通过原型设置render方法，实现随机产生食物对象，并渲染到map上</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token class-name">Food</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">render</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">map</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 随机食物的位置，map.宽度/food.宽度，总共有多少分food的宽度，随机一下。然后再乘以food的宽度</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>x <span class="token operator">=</span> <span class="token function">parseInt</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> map<span class="token punctuation">.</span>offsetWidth <span class="token operator">/</span> <span class="token keyword">this</span><span class="token punctuation">.</span>width<span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token keyword">this</span><span class="token punctuation">.</span>width<span class="token punctuation">;</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>y <span class="token operator">=</span> <span class="token function">parseInt</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> map<span class="token punctuation">.</span>offsetHeight <span class="token operator">/</span> <span class="token keyword">this</span><span class="token punctuation">.</span>height<span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token keyword">this</span><span class="token punctuation">.</span>height<span class="token punctuation">;</span>

  <span class="token comment">// 动态创建食物对应的div</span>
  <span class="token keyword">var</span> div <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'div'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  map<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>div<span class="token punctuation">)</span><span class="token punctuation">;</span>
  div<span class="token punctuation">.</span>style<span class="token punctuation">.</span>position <span class="token operator">=</span> position<span class="token punctuation">;</span>
  div<span class="token punctuation">.</span>style<span class="token punctuation">.</span>left <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>x <span class="token operator">+</span> <span class="token string">'px'</span><span class="token punctuation">;</span>
  div<span class="token punctuation">.</span>style<span class="token punctuation">.</span>top <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>y <span class="token operator">+</span> <span class="token string">'px'</span><span class="token punctuation">;</span>
  div<span class="token punctuation">.</span>style<span class="token punctuation">.</span>width <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>width <span class="token operator">+</span> <span class="token string">'px'</span><span class="token punctuation">;</span>
  div<span class="token punctuation">.</span>style<span class="token punctuation">.</span>height <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>height <span class="token operator">+</span> <span class="token string">'px'</span><span class="token punctuation">;</span>
  div<span class="token punctuation">.</span>style<span class="token punctuation">.</span>backgroundColor <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>color<span class="token punctuation">;</span>
  elements<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>div<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li>通过自调用函数，进行封装，通过window暴露Food对象</li></ul> <div class="language-js extra-class"><pre class="language-js"><code>window<span class="token punctuation">.</span>Food <span class="token operator">=</span> Food<span class="token punctuation">;</span>
</code></pre></div><h4 id="创建蛇对象"><a href="#创建蛇对象" class="header-anchor">#</a> 创建蛇对象</h4> <ul><li><p>Snake</p></li> <li><p>属性</p> <ul><li>width    蛇节的宽度 默认20</li> <li>height   蛇节的高度 默认20</li> <li>body     数组，蛇的头部和身体，第一个位置是蛇头</li> <li>direction    蛇运动的方向  默认right  可以是 left  top bottom</li></ul></li> <li><p>方法</p> <ul><li>render  把蛇渲染到map上</li></ul></li> <li><p>Snake构造函数</p></li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> position <span class="token operator">=</span> <span class="token string">'absolute'</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> elements <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token function">Snake</span><span class="token punctuation">(</span><span class="token parameter">width<span class="token punctuation">,</span> height<span class="token punctuation">,</span> direction</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 设置每一个蛇节的宽度</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>width <span class="token operator">=</span> width <span class="token operator">||</span> <span class="token number">20</span><span class="token punctuation">;</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>height <span class="token operator">=</span> height <span class="token operator">||</span> <span class="token number">20</span><span class="token punctuation">;</span>
  <span class="token comment">// 蛇的每一部分, 第一部分是蛇头</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>body <span class="token operator">=</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>x<span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span> y<span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span> color<span class="token operator">:</span> <span class="token string">'red'</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>x<span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span> y<span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span> color<span class="token operator">:</span> <span class="token string">'red'</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>x<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> y<span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span> color<span class="token operator">:</span> <span class="token string">'red'</span><span class="token punctuation">}</span>
  <span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>direction <span class="token operator">=</span> direction <span class="token operator">||</span> <span class="token string">'right'</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li>render方法</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token class-name">Snake</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">render</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">map</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>body<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> obj <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>body<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token keyword">var</span> div <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'div'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    map<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>div<span class="token punctuation">)</span><span class="token punctuation">;</span>
    div<span class="token punctuation">.</span>style<span class="token punctuation">.</span>left <span class="token operator">=</span> obj<span class="token punctuation">.</span>x <span class="token operator">*</span> <span class="token keyword">this</span><span class="token punctuation">.</span>width <span class="token operator">+</span> <span class="token string">'px'</span><span class="token punctuation">;</span>
    div<span class="token punctuation">.</span>style<span class="token punctuation">.</span>top <span class="token operator">=</span> obj<span class="token punctuation">.</span>y <span class="token operator">*</span> <span class="token keyword">this</span><span class="token punctuation">.</span>height <span class="token operator">+</span> <span class="token string">'px'</span><span class="token punctuation">;</span>
    div<span class="token punctuation">.</span>style<span class="token punctuation">.</span>position <span class="token operator">=</span> position<span class="token punctuation">;</span>
    div<span class="token punctuation">.</span>style<span class="token punctuation">.</span>backgroundColor <span class="token operator">=</span> obj<span class="token punctuation">.</span>color<span class="token punctuation">;</span>
    div<span class="token punctuation">.</span>style<span class="token punctuation">.</span>width <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>width <span class="token operator">+</span> <span class="token string">'px'</span><span class="token punctuation">;</span>
    div<span class="token punctuation">.</span>style<span class="token punctuation">.</span>height <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>height <span class="token operator">+</span> <span class="token string">'px'</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li>在自调用函数中暴露Snake对象</li></ul> <div class="language-js extra-class"><pre class="language-js"><code>window<span class="token punctuation">.</span>Snake <span class="token operator">=</span> Snake<span class="token punctuation">;</span>
</code></pre></div><h4 id="创建游戏对象"><a href="#创建游戏对象" class="header-anchor">#</a> 创建游戏对象</h4> <p>游戏对象，用来管理游戏中的所有对象和开始游戏</p> <ul><li><p>Game</p> <ul><li><p>属性</p> <ul><li><p>food</p></li> <li><p>snake</p></li> <li><p>map</p></li></ul></li> <li><p>方法</p> <ul><li>start            开始游戏（绘制所有游戏对象）</li></ul></li></ul></li> <li><p>构造函数</p></li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">Game</span><span class="token punctuation">(</span><span class="token parameter">map</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>food <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Food</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>snake <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Snake</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>map <span class="token operator">=</span> map<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li>开始游戏，渲染食物对象和蛇对象</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token class-name">Game</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">start</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>food<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>map<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>snake<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>map<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="游戏的逻辑"><a href="#游戏的逻辑" class="header-anchor">#</a> 游戏的逻辑</h3> <h4 id="写蛇的move方法"><a href="#写蛇的move方法" class="header-anchor">#</a> 写蛇的move方法</h4> <ul><li>在蛇对象(snake.js)中，在Snake的原型上新增move方法</li></ul> <ol><li>让蛇移动起来，把蛇身体的每一部分往前移动一下</li> <li>蛇头部分根据不同的方向决定 往哪里移动</li></ol> <div class="language-js extra-class"><pre class="language-js"><code><span class="token class-name">Snake</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">move</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">food<span class="token punctuation">,</span> map</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 让蛇身体的每一部分往前移动一下</span>
  <span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>body<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span>
  <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token punctuation">;</span> i <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">--</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>body<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>x <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>body<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>x<span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>body<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>y <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>body<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>y<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// 根据移动的方向，决定蛇头如何处理</span>
  <span class="token keyword">switch</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>direction<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">case</span> <span class="token string">'left'</span><span class="token operator">:</span> 
      <span class="token keyword">this</span><span class="token punctuation">.</span>body<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>x <span class="token operator">-=</span> <span class="token number">1</span><span class="token punctuation">;</span>
      <span class="token keyword">break</span><span class="token punctuation">;</span>
    <span class="token keyword">case</span> <span class="token string">'right'</span><span class="token operator">:</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>body<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>x <span class="token operator">+=</span> <span class="token number">1</span><span class="token punctuation">;</span>
      <span class="token keyword">break</span><span class="token punctuation">;</span>
    <span class="token keyword">case</span> <span class="token string">'top'</span><span class="token operator">:</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>body<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>y <span class="token operator">-=</span> <span class="token number">1</span><span class="token punctuation">;</span>
      <span class="token keyword">break</span><span class="token punctuation">;</span>
    <span class="token keyword">case</span> <span class="token string">'bottom'</span><span class="token operator">:</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>body<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>y <span class="token operator">+=</span> <span class="token number">1</span><span class="token punctuation">;</span>
      <span class="token keyword">break</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li>在game中测试</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">this</span><span class="token punctuation">.</span>snake<span class="token punctuation">.</span><span class="token function">move</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>food<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>map<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">this</span><span class="token punctuation">.</span>snake<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>map<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="让蛇自己动起来"><a href="#让蛇自己动起来" class="header-anchor">#</a> 让蛇自己动起来</h4> <ul><li><p>私有方法</p> <div class="language- extra-class"><pre class="language-text"><code>什么是私有方法？
  不能被外部访问的方法
如何创建私有方法？
  使用自调用函数包裹
</code></pre></div></li> <li><p>在game.js中 添加runSnake的私有方法，开启定时器调用蛇的move和render方法，让蛇动起来</p></li> <li><p>判断蛇是否撞墙</p></li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">runSnake</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> timerId <span class="token operator">=</span> <span class="token function">setInterval</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>snake<span class="token punctuation">.</span><span class="token function">move</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>food<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>map<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 在渲染前，删除之前的蛇</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>snake<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>map<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// 判断蛇是否撞墙</span>
    <span class="token keyword">var</span> maxX <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>map<span class="token punctuation">.</span>offsetWidth <span class="token operator">/</span> <span class="token keyword">this</span><span class="token punctuation">.</span>snake<span class="token punctuation">.</span>width<span class="token punctuation">;</span>
    <span class="token keyword">var</span> maxY <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>map<span class="token punctuation">.</span>offsetHeight <span class="token operator">/</span> <span class="token keyword">this</span><span class="token punctuation">.</span>snake<span class="token punctuation">.</span>height<span class="token punctuation">;</span>
    <span class="token keyword">var</span> headX <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>snake<span class="token punctuation">.</span>body<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>x<span class="token punctuation">;</span>
    <span class="token keyword">var</span> headY <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>snake<span class="token punctuation">.</span>body<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>y<span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>headX <span class="token operator">&lt;</span> <span class="token number">0</span> <span class="token operator">||</span> headX <span class="token operator">&gt;=</span> maxX<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">clearInterval</span><span class="token punctuation">(</span>timerId<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">'Game Over'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span>headY <span class="token operator">&lt;</span> <span class="token number">0</span> <span class="token operator">||</span> headY <span class="token operator">&gt;=</span> maxY<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">clearInterval</span><span class="token punctuation">(</span>timerId<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">'Game Over'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

  <span class="token punctuation">}</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span>that<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">150</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li>在snake中添加删除蛇的私有方法，在render中调用</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">remove</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 删除渲染的蛇</span>
  <span class="token keyword">var</span> i <span class="token operator">=</span> elements<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span>
  <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token punctuation">;</span> i <span class="token operator">&gt;=</span> <span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">--</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 删除页面上渲染的蛇</span>
    elements<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>parentNode<span class="token punctuation">.</span><span class="token function">removeChild</span><span class="token punctuation">(</span>elements<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 删除elements数组中的元素</span>
    elements<span class="token punctuation">.</span><span class="token function">splice</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li>在game中通过键盘控制蛇的移动方向</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">bindKey</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  document<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'keydown'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">switch</span> <span class="token punctuation">(</span>e<span class="token punctuation">.</span>keyCode<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">case</span> <span class="token number">37</span><span class="token operator">:</span>
        <span class="token comment">// left</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>snake<span class="token punctuation">.</span>direction <span class="token operator">=</span> <span class="token string">'left'</span><span class="token punctuation">;</span>
        <span class="token keyword">break</span><span class="token punctuation">;</span>
      <span class="token keyword">case</span> <span class="token number">38</span><span class="token operator">:</span>
        <span class="token comment">// top</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>snake<span class="token punctuation">.</span>direction <span class="token operator">=</span> <span class="token string">'top'</span><span class="token punctuation">;</span>
        <span class="token keyword">break</span><span class="token punctuation">;</span>
      <span class="token keyword">case</span> <span class="token number">39</span><span class="token operator">:</span>
        <span class="token comment">// right</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>snake<span class="token punctuation">.</span>direction <span class="token operator">=</span> <span class="token string">'right'</span><span class="token punctuation">;</span>
        <span class="token keyword">break</span><span class="token punctuation">;</span>
      <span class="token keyword">case</span> <span class="token number">40</span><span class="token operator">:</span>
        <span class="token comment">// bottom</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>snake<span class="token punctuation">.</span>direction <span class="token operator">=</span> <span class="token string">'bottom'</span><span class="token punctuation">;</span>
        <span class="token keyword">break</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span>that<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li>在start方法中调用</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">bindKey</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="判断蛇是否吃到食物"><a href="#判断蛇是否吃到食物" class="header-anchor">#</a> 判断蛇是否吃到食物</h4> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 在Snake的move方法中</span>

<span class="token comment">// 在移动的过程中判断蛇是否吃到食物</span>
<span class="token comment">// 如果蛇头和食物的位置重合代表吃到食物</span>
<span class="token comment">// 食物的坐标是像素，蛇的坐标是几个宽度，进行转换</span>
<span class="token keyword">var</span> headX <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>body<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>x <span class="token operator">*</span> <span class="token keyword">this</span><span class="token punctuation">.</span>width<span class="token punctuation">;</span>
<span class="token keyword">var</span> headY <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>body<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>y <span class="token operator">*</span> <span class="token keyword">this</span><span class="token punctuation">.</span>height<span class="token punctuation">;</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>headX <span class="token operator">===</span> food<span class="token punctuation">.</span>x <span class="token operator">&amp;&amp;</span> headY <span class="token operator">===</span> food<span class="token punctuation">.</span>y<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 吃到食物，往蛇节的最后加一节</span>
  <span class="token keyword">var</span> last <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>body<span class="token punctuation">[</span><span class="token keyword">this</span><span class="token punctuation">.</span>body<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    x<span class="token operator">:</span> last<span class="token punctuation">.</span>x<span class="token punctuation">,</span>
    y<span class="token operator">:</span> last<span class="token punctuation">.</span>y<span class="token punctuation">,</span>
    color<span class="token operator">:</span> last<span class="token punctuation">.</span>color
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token comment">// 把现在的食物对象删除，并重新随机渲染一个食物对象</span>
  food<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span>map<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="其它处理"><a href="#其它处理" class="header-anchor">#</a> 其它处理</h3> <h4 id="把html中的js代码放到index-js中"><a href="#把html中的js代码放到index-js中" class="header-anchor">#</a> 把html中的js代码放到index.js中</h4> <p>避免html中出现js代码</p> <h4 id="自调用函数的参数"><a href="#自调用函数的参数" class="header-anchor">#</a> 自调用函数的参数</h4> <div class="language-js extra-class"><pre class="language-js"><code><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">window<span class="token punctuation">,</span> <span class="token keyword">undefined</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> document <span class="token operator">=</span> window<span class="token punctuation">.</span>document<span class="token punctuation">;</span>

<span class="token punctuation">}</span><span class="token punctuation">(</span>window<span class="token punctuation">,</span> <span class="token keyword">undefined</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></div><ul><li>传入window对象</li></ul> <p>将来代码压缩的时候，可以吧 function (window)  压缩成 function (w)</p> <ul><li>传入undefined</li></ul> <p>在将来会看到别人写的代码中会把undefined作为函数的参数(当前案例没有使用)
因为在有的老版本的浏览器中 undefined可以被重新赋值，防止undefined 被重新赋值</p> <h4 id="整理代码"><a href="#整理代码" class="header-anchor">#</a> 整理代码</h4> <p>现在的代码结构清晰，谁出问题就找到对应的js文件即可。
通过自调用函数，已经防止了变量命名污染的问题</p> <p>但是，由于js文件数较多，需要在页面上引用，会产生文件依赖的问题(先引入那个js，再引入哪个js)
将来通过工具把js文件合并并压缩。现在手工合并js文件演示</p> <ul><li>问题1</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 如果存在多个自调用函数要用分号分割，否则语法错误</span>
<span class="token comment">// 下面代码会报错</span>
<span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token punctuation">}</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token punctuation">}</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token comment">// 所以代码规范中会建议在自调用函数之前加上分号</span>
<span class="token comment">// 下面代码没有问题</span>
<span class="token punctuation">;</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token punctuation">}</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token punctuation">;</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token punctuation">}</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></div><ul><li>问题2</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 当自调用函数 前面有函数声明时，会把自调用函数作为参数</span>
<span class="token comment">// 所以建议自调用函数前，加上;</span>
<span class="token keyword">var</span> <span class="token function-variable function">a</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">'11'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
    
<span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">'22'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></div><hr> <h2 id="继承"><a href="#继承" class="header-anchor">#</a> 继承</h2> <h3 id="什么是继承"><a href="#什么是继承" class="header-anchor">#</a> 什么是继承</h3> <ul><li>现实生活中的继承</li> <li>程序中的继承</li></ul> <h3 id="构造函数的属性继承-借用构造函数"><a href="#构造函数的属性继承-借用构造函数" class="header-anchor">#</a> 构造函数的属性继承：借用构造函数</h3> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">Person</span> <span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> age</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>type <span class="token operator">=</span> <span class="token string">'human'</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name
  <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> age
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">Student</span> <span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> age</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 借用构造函数继承属性成员</span>
  <span class="token function">Person</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> name<span class="token punctuation">,</span> age<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">var</span> s1 <span class="token operator">=</span> <span class="token function">Student</span><span class="token punctuation">(</span><span class="token string">'张三'</span><span class="token punctuation">,</span> <span class="token number">18</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>s1<span class="token punctuation">.</span>type<span class="token punctuation">,</span> s1<span class="token punctuation">.</span>name<span class="token punctuation">,</span> s1<span class="token punctuation">.</span>age<span class="token punctuation">)</span> <span class="token comment">// =&gt; human 张三 18</span>
</code></pre></div><h3 id="构造函数的原型方法继承-拷贝继承-for-in"><a href="#构造函数的原型方法继承-拷贝继承-for-in" class="header-anchor">#</a> 构造函数的原型方法继承：拷贝继承（for-in）</h3> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">Person</span> <span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> age</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>type <span class="token operator">=</span> <span class="token string">'human'</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name
  <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> age
<span class="token punctuation">}</span>

<span class="token class-name">Person</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">sayName</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'hello '</span> <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">Student</span> <span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> age</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">Person</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> name<span class="token punctuation">,</span> age<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">// 原型对象拷贝继承原型对象成员</span>
<span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">var</span> key <span class="token keyword">in</span> <span class="token class-name">Person</span><span class="token punctuation">.</span>prototype<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token class-name">Student</span><span class="token punctuation">.</span>prototype<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token class-name">Person</span><span class="token punctuation">.</span>prototype<span class="token punctuation">[</span>key<span class="token punctuation">]</span>
<span class="token punctuation">}</span>

<span class="token keyword">var</span> s1 <span class="token operator">=</span> <span class="token function">Student</span><span class="token punctuation">(</span><span class="token string">'张三'</span><span class="token punctuation">,</span> <span class="token number">18</span><span class="token punctuation">)</span>

s1<span class="token punctuation">.</span><span class="token function">sayName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// =&gt; hello 张三</span>
</code></pre></div><h3 id="另一种继承方式-原型继承"><a href="#另一种继承方式-原型继承" class="header-anchor">#</a> 另一种继承方式：原型继承</h3> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">Person</span> <span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> age</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>type <span class="token operator">=</span> <span class="token string">'human'</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name
  <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> age
<span class="token punctuation">}</span>

<span class="token class-name">Person</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">sayName</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'hello '</span> <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">Student</span> <span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> age</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">Person</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> name<span class="token punctuation">,</span> age<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">// 利用原型的特性实现继承</span>
<span class="token class-name">Student</span><span class="token punctuation">.</span>prototype <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token keyword">var</span> s1 <span class="token operator">=</span> <span class="token function">Student</span><span class="token punctuation">(</span><span class="token string">'张三'</span><span class="token punctuation">,</span> <span class="token number">18</span><span class="token punctuation">)</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>s1<span class="token punctuation">.</span>type<span class="token punctuation">)</span> <span class="token comment">// =&gt; human</span>

s1<span class="token punctuation">.</span><span class="token function">sayName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// =&gt; hello 张三</span>
</code></pre></div><hr> <h2 id="函数进阶"><a href="#函数进阶" class="header-anchor">#</a> 函数进阶</h2> <h3 id="函数的定义方式"><a href="#函数的定义方式" class="header-anchor">#</a> 函数的定义方式</h3> <ul><li>函数声明</li> <li>函数表达式</li> <li><code>new Function</code></li></ul> <h4 id="函数声明"><a href="#函数声明" class="header-anchor">#</a> 函数声明</h4> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">foo</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

<span class="token punctuation">}</span>
</code></pre></div><h4 id="函数表达式"><a href="#函数表达式" class="header-anchor">#</a> 函数表达式</h4> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> <span class="token function-variable function">foo</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

<span class="token punctuation">}</span>
</code></pre></div><h4 id="函数声明与函数表达式的区别"><a href="#函数声明与函数表达式的区别" class="header-anchor">#</a> 函数声明与函数表达式的区别</h4> <ul><li>函数声明必须有名字</li> <li>函数声明会函数提升，在预解析阶段就已创建，声明前后都可以调用</li> <li>函数表达式类似于变量赋值</li> <li>函数表达式可以没有名字，例如匿名函数</li> <li>函数表达式没有变量提升，在执行阶段创建，必须在表达式执行之后才可以调用</li></ul> <p>下面是一个根据条件定义函数的例子：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">function</span> <span class="token function">f</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
  <span class="token keyword">function</span> <span class="token function">f</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>以上代码执行结果在不同浏览器中结果不一致。</p> <p>不过我们可以使用函数表达式解决上面的问题：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> f

<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function-variable function">f</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
  <span class="token function-variable function">f</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="函数的调用方式"><a href="#函数的调用方式" class="header-anchor">#</a> 函数的调用方式</h3> <ul><li>普通函数</li> <li>构造函数</li> <li>对象方法</li></ul> <h3 id="函数内-this-指向的不同场景"><a href="#函数内-this-指向的不同场景" class="header-anchor">#</a> 函数内 <code>this</code> 指向的不同场景</h3> <p>函数的调用方式决定了 <code>this</code> 指向的不同：</p> <table><thead><tr><th>调用方式</th> <th>非严格模式</th> <th>备注</th></tr></thead> <tbody><tr><td>普通函数调用</td> <td>window</td> <td>严格模式下是 undefined</td></tr> <tr><td>构造函数调用</td> <td>实例对象</td> <td>原型方法中 this 也是实例对象</td></tr> <tr><td>对象方法调用</td> <td>该方法所属对象</td> <td>紧挨着的对象</td></tr> <tr><td>事件绑定方法</td> <td>绑定事件对象</td> <td></td></tr> <tr><td>定时器函数</td> <td>window</td> <td></td></tr></tbody></table> <p>这就是对函数内部 this 指向的基本整理，写代码写多了自然而然就熟悉了。</p> <h3 id="函数也是对象"><a href="#函数也是对象" class="header-anchor">#</a> 函数也是对象</h3> <ul><li>所有函数都是 <code>Function</code> 的实例</li></ul> <h3 id="call、apply、bind"><a href="#call、apply、bind" class="header-anchor">#</a> call、apply、bind</h3> <p>那了解了函数 this 指向的不同场景之后，我们知道有些情况下我们为了使用某种特定环境的 this 引用，
这时候时候我们就需要采用一些特殊手段来处理了，例如我们经常在定时器外部备份 this 引用，然后在定时器函数内部使用外部 this 的引用。
然而实际上对于这种做法我们的 JavaScript 为我们专门提供了一些函数方法用来帮我们更优雅的处理函数内部 this 指向问题。
这就是接下来我们要学习的 call、apply、bind 三个函数方法。</p> <h4 id="call"><a href="#call" class="header-anchor">#</a> call</h4> <p><code>call()</code> 方法调用一个函数, 其具有一个指定的 <code>this</code> 值和分别地提供的参数(参数的列表)。</p> <p class="danger">
  注意：该方法的作用和 `apply()` 方法类似，只有一个区别，就是 `call()` 方法接受的是若干个参数的列表，而 `apply()` 方法接受的是一个包含多个参数的数组。
</p> <p>语法：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token function">fun</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>thisArg<span class="token punctuation">[</span><span class="token punctuation">,</span> arg1<span class="token punctuation">[</span><span class="token punctuation">,</span> arg2<span class="token punctuation">[</span><span class="token punctuation">,</span> <span class="token operator">...</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre></div><p>参数：</p> <ul><li><p><code>thisArg</code></p> <ul><li>在 fun 函数运行时指定的 this 值</li> <li>如果指定了 null 或者 undefined 则内部 this 指向 window</li></ul></li> <li><p><code>arg1, arg2, ...</code></p> <ul><li>指定的参数列表</li></ul></li></ul> <h4 id="apply"><a href="#apply" class="header-anchor">#</a> apply</h4> <p><code>apply()</code> 方法调用一个函数, 其具有一个指定的 <code>this</code> 值，以及作为一个数组（或类似数组的对象）提供的参数。</p> <p class="danger">
  注意：该方法的作用和 `call()` 方法类似，只有一个区别，就是 `call()` 方法接受的是若干个参数的列表，而 `apply()` 方法接受的是一个包含多个参数的数组。
</p> <p>语法：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token function">fun</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>thisArg<span class="token punctuation">,</span> <span class="token punctuation">[</span>argsArray<span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre></div><p>参数：</p> <ul><li><code>thisArg</code></li> <li><code>argsArray</code></li></ul> <p><code>apply()</code> 与 <code>call()</code> 非常相似，不同之处在于提供参数的方式。
<code>apply()</code> 使用参数数组而不是一组参数列表。例如：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token function">fun</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">'eat'</span><span class="token punctuation">,</span> <span class="token string">'bananas'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre></div><h4 id="bind"><a href="#bind" class="header-anchor">#</a> bind</h4> <p>bind() 函数会创建一个新函数（称为绑定函数），新函数与被调函数（绑定函数的目标函数）具有相同的函数体（在 ECMAScript 5 规范中内置的call属性）。
当目标函数被调用时 this 值绑定到 bind() 的第一个参数，该参数不能被重写。绑定函数被调用时，bind() 也接受预设的参数提供给原函数。
一个绑定函数也能使用new操作符创建对象：这种行为就像把原函数当成构造器。提供的 this 值被忽略，同时调用时的参数被提供给模拟函数。</p> <p>语法：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token function">fun</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span>thisArg<span class="token punctuation">[</span><span class="token punctuation">,</span> arg1<span class="token punctuation">[</span><span class="token punctuation">,</span> arg2<span class="token punctuation">[</span><span class="token punctuation">,</span> <span class="token operator">...</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre></div><p>参数：</p> <ul><li><p>thisArg</p> <ul><li>当绑定函数被调用时，该参数会作为原函数运行时的 this 指向。当使用new 操作符调用绑定函数时，该参数无效。</li></ul></li> <li><p>arg1, arg2, ...</p> <ul><li>当绑定函数被调用时，这些参数将置于实参之前传递给被绑定的方法。</li></ul></li></ul> <p>返回值：</p> <p>返回由指定的this值和初始化参数改造的原函数拷贝。</p> <p>示例1：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">this</span><span class="token punctuation">.</span>x <span class="token operator">=</span> <span class="token number">9</span><span class="token punctuation">;</span> 
<span class="token keyword">var</span> module <span class="token operator">=</span> <span class="token punctuation">{</span>
  x<span class="token operator">:</span> <span class="token number">81</span><span class="token punctuation">,</span>
  <span class="token function-variable function">getX</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>x<span class="token punctuation">;</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span><span class="token function">getX</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 返回 81</span>

<span class="token keyword">var</span> retrieveX <span class="token operator">=</span> module<span class="token punctuation">.</span>getX<span class="token punctuation">;</span>
<span class="token function">retrieveX</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 返回 9, 在这种情况下，&quot;this&quot;指向全局作用域</span>

<span class="token comment">// 创建一个新函数，将&quot;this&quot;绑定到module对象</span>
<span class="token comment">// 新手可能会被全局的x变量和module里的属性x所迷惑</span>
<span class="token keyword">var</span> boundGetX <span class="token operator">=</span> <span class="token function">retrieveX</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span>module<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">boundGetX</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 返回 81</span>
</code></pre></div><p>示例2：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">LateBloomer</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>petalCount <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">ceil</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">12</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// Declare bloom after a delay of 1 second</span>
<span class="token class-name">LateBloomer</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">bloom</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  window<span class="token punctuation">.</span><span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">declare</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token class-name">LateBloomer</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">declare</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'I am a beautiful flower with '</span> <span class="token operator">+</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>petalCount <span class="token operator">+</span> <span class="token string">' petals!'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> flower <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">LateBloomer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
flower<span class="token punctuation">.</span><span class="token function">bloom</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 一秒钟后, 调用'declare'方法</span>
</code></pre></div><h4 id="小结-4"><a href="#小结-4" class="header-anchor">#</a> 小结</h4> <ul><li><p>call 和 apply 特性一样</p> <ul><li>都是用来调用函数，而且是立即调用</li> <li>但是可以在调用函数的同时，通过第一个参数指定函数内部 <code>this</code> 的指向</li> <li>call 调用的时候，参数必须以参数列表的形式进行传递，也就是以逗号分隔的方式依次传递即可</li> <li>apply 调用的时候，参数必须是一个数组，然后在执行的时候，会将数组内部的元素一个一个拿出来，与形参一一对应进行传递</li> <li>如果第一个参数指定了 <code>null</code> 或者 <code>undefined</code> 则内部 this 指向 window</li></ul></li> <li><p>bind</p> <ul><li>可以用来指定内部 this 的指向，然后生成一个改变了 this 指向的新的函数</li> <li>它和 call、apply 最大的区别是：bind 不会调用</li> <li>bind 支持传递参数，它的传参方式比较特殊，一共有两个位置可以传递
<ul><li><ol><li>在 bind 的同时，以参数列表的形式进行传递</li></ol></li> <li><ol start="2"><li>在调用的时候，以参数列表的形式进行传递</li></ol></li> <li>那到底以谁 bind 的时候传递的参数为准呢还是以调用的时候传递的参数为准</li> <li>两者合并：bind 的时候传递的参数和调用的时候传递的参数会合并到一起，传递到函数内部</li></ul></li></ul></li></ul> <h3 id="函数的其它成员"><a href="#函数的其它成员" class="header-anchor">#</a> 函数的其它成员</h3> <ul><li>arguments
<ul><li>实参集合</li></ul></li> <li>caller
<ul><li>函数的调用者</li></ul></li> <li>length
<ul><li>形参的个数</li></ul></li> <li>name
<ul><li>函数的名称</li></ul></li></ul> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">fn</span><span class="token punctuation">(</span><span class="token parameter">x<span class="token punctuation">,</span> y<span class="token punctuation">,</span> z</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>fn<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token comment">// =&gt; 形参的个数</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arguments<span class="token punctuation">)</span> <span class="token comment">// 伪数组实参参数集合</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arguments<span class="token punctuation">.</span>callee <span class="token operator">===</span> fn<span class="token punctuation">)</span> <span class="token comment">// 函数本身</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>fn<span class="token punctuation">.</span>caller<span class="token punctuation">)</span> <span class="token comment">// 函数的调用者</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>fn<span class="token punctuation">.</span>name<span class="token punctuation">)</span> <span class="token comment">// =&gt; 函数的名字</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">fn</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">,</span> <span class="token number">30</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="高阶函数"><a href="#高阶函数" class="header-anchor">#</a> 高阶函数</h3> <ul><li>函数可以作为参数</li> <li>函数可以作为返回值</li></ul> <h4 id="作为参数"><a href="#作为参数" class="header-anchor">#</a> 作为参数</h4> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">eat</span> <span class="token punctuation">(</span><span class="token parameter">callback</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'吃完了'</span><span class="token punctuation">)</span>
    <span class="token function">callback</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token function">eat</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'去唱歌'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h4 id="作为返回值"><a href="#作为返回值" class="header-anchor">#</a> 作为返回值</h4> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">genFun</span> <span class="token punctuation">(</span><span class="token parameter">type</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">obj</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span> <span class="token operator">===</span> type
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">var</span> isArray <span class="token operator">=</span> <span class="token function">genFun</span><span class="token punctuation">(</span><span class="token string">'[object Array]'</span><span class="token punctuation">)</span>
<span class="token keyword">var</span> isObject <span class="token operator">=</span> <span class="token function">genFun</span><span class="token punctuation">(</span><span class="token string">'[object Object]'</span><span class="token punctuation">)</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">isArray</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// =&gt; true</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">isArray</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// =&gt; true</span>
</code></pre></div><h3 id="函数闭包"><a href="#函数闭包" class="header-anchor">#</a> 函数闭包</h3> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">fn</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> count <span class="token operator">=</span> <span class="token number">0</span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span>
    <span class="token function-variable function">getCount</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>count<span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function-variable function">setCount</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      count<span class="token operator">++</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">var</span> fns <span class="token operator">=</span> <span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

fns<span class="token punctuation">.</span><span class="token function">getCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// =&gt; 0</span>
fns<span class="token punctuation">.</span><span class="token function">setCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
fns<span class="token punctuation">.</span><span class="token function">getCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// =&gt; 1</span>
</code></pre></div><h4 id="作用域、作用域链、预解析"><a href="#作用域、作用域链、预解析" class="header-anchor">#</a> 作用域、作用域链、预解析</h4> <ul><li>全局作用域</li> <li>函数作用域</li> <li><strong>没有块级作用域</strong></li></ul> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token punctuation">{</span>
  <span class="token keyword">var</span> foo <span class="token operator">=</span> <span class="token string">'bar'</span>
<span class="token punctuation">}</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>foo<span class="token punctuation">)</span>

<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token number">123</span>
<span class="token punctuation">}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span>
</code></pre></div><p>作用域链示例代码：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token number">10</span>

<span class="token keyword">function</span> <span class="token function">fn</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> b <span class="token operator">=</span> <span class="token number">20</span>

  <span class="token keyword">function</span> <span class="token function">fn1</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> c <span class="token operator">=</span> <span class="token number">30</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a <span class="token operator">+</span> b <span class="token operator">+</span> c<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">function</span> <span class="token function">fn2</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> d <span class="token operator">=</span> <span class="token number">40</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>c <span class="token operator">+</span> d<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token function">fn1</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token function">fn2</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li>内层作用域可以访问外层作用域，反之不行</li></ul> <h4 id="什么是闭包"><a href="#什么是闭包" class="header-anchor">#</a> 什么是闭包</h4> <p>闭包就是能够读取其他函数内部变量的函数，
由于在 Javascript 语言中，只有函数内部的子函数才能读取局部变量，
因此可以把闭包简单理解成 “定义在一个函数内部的函数”。
所以，在本质上，闭包就是将函数内部和函数外部连接起来的一座桥梁。</p> <p>闭包的用途：</p> <ul><li>可以在函数外部读取函数内部成员</li> <li>让函数内成员始终存活在内存中</li></ul> <h4 id="一些关于闭包的例子"><a href="#一些关于闭包的例子" class="header-anchor">#</a> 一些关于闭包的例子</h4> <p>示例1：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">,</span> <span class="token number">30</span><span class="token punctuation">]</span>
<span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> arr<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>示例2：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">111</span><span class="token punctuation">)</span>

<span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">3</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">222</span><span class="token punctuation">)</span>
</code></pre></div><p>示例3：投票</p> <p>示例4：判断类型</p> <p>示例5：沙箱模式</p> <h4 id="闭包的思考题"><a href="#闭包的思考题" class="header-anchor">#</a> 闭包的思考题</h4> <p>思考题 1：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> name <span class="token operator">=</span> <span class="token string">&quot;The Window&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> object <span class="token operator">=</span> <span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token string">&quot;My Object&quot;</span><span class="token punctuation">,</span>
  <span class="token function-variable function">getNameFunc</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>object<span class="token punctuation">.</span><span class="token function">getNameFunc</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></div><p>思考题 2：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> name <span class="token operator">=</span> <span class="token string">&quot;The Window&quot;</span><span class="token punctuation">;</span>　　
<span class="token keyword">var</span> object <span class="token operator">=</span> <span class="token punctuation">{</span>　　　　
  name<span class="token operator">:</span> <span class="token string">&quot;My Object&quot;</span><span class="token punctuation">,</span>
  <span class="token function-variable function">getNameFunc</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> that <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> that<span class="token punctuation">.</span>name<span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>object<span class="token punctuation">.</span><span class="token function">getNameFunc</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></div><h4 id="小结-5"><a href="#小结-5" class="header-anchor">#</a> 小结</h4> <h3 id="函数递归"><a href="#函数递归" class="header-anchor">#</a> 函数递归</h3> <h4 id="递归执行模型"><a href="#递归执行模型" class="header-anchor">#</a> 递归执行模型</h4> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">fn1</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">111</span><span class="token punctuation">)</span>
  <span class="token function">fn2</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'fn1'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">fn2</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">222</span><span class="token punctuation">)</span>
  <span class="token function">fn3</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'fn2'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">fn3</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">333</span><span class="token punctuation">)</span>
  <span class="token function">fn4</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'fn3'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">fn4</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">444</span><span class="token punctuation">)</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'fn4'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token function">fn1</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><h4 id="举个栗子-计算阶乘的递归函数"><a href="#举个栗子-计算阶乘的递归函数" class="header-anchor">#</a> 举个栗子：计算阶乘的递归函数</h4> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">factorial</span> <span class="token punctuation">(</span><span class="token parameter">num</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>num <span class="token operator">&lt;=</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token number">1</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> num <span class="token operator">*</span> <span class="token function">factorial</span><span class="token punctuation">(</span>num <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="递归应用场景"><a href="#递归应用场景" class="header-anchor">#</a> 递归应用场景</h4> <ul><li>深拷贝</li> <li>菜单树</li> <li>遍历 DOM 树</li></ul> <hr> <h2 id="正则表达式"><a href="#正则表达式" class="header-anchor">#</a> 正则表达式</h2> <ul><li>了解正则表达式基本语法</li> <li>能够使用JavaScript的正则对象</li></ul> <h3 id="正则表达式简介"><a href="#正则表达式简介" class="header-anchor">#</a> 正则表达式简介</h3> <h4 id="什么是正则表达式"><a href="#什么是正则表达式" class="header-anchor">#</a> 什么是正则表达式</h4> <p>正则表达式：用于匹配规律规则的表达式，正则表达式最初是科学家对人类神经系统的工作原理的早期研究，现在在编程语言中有广泛的应用。正则表通常被用来检索、替换那些符合某个模式(规则)的文本。
正则表达式是对字符串操作的一种逻辑公式，就是用事先定义好的一些特定字符、及这些特定字符的组合，组成一个“规则字符串”，这个“规则字符串”用来表达对字符串的一种过滤逻辑。</p> <h4 id="正则表达式的作用"><a href="#正则表达式的作用" class="header-anchor">#</a> 正则表达式的作用</h4> <ol><li>给定的字符串是否符合正则表达式的过滤逻辑(匹配)</li> <li>可以通过正则表达式，从字符串中获取我们想要的特定部分(提取)</li> <li>强大的字符串替换能力(替换)</li></ol> <h4 id="正则表达式的特点"><a href="#正则表达式的特点" class="header-anchor">#</a> 正则表达式的特点</h4> <ol><li>灵活性、逻辑性和功能性非常的强</li> <li>可以迅速地用极简单的方式达到字符串的复杂控制</li> <li>对于刚接触的人来说，比较晦涩难懂</li></ol> <h3 id="正则表达式的测试"><a href="#正则表达式的测试" class="header-anchor">#</a> 正则表达式的测试</h3> <ul><li><a href="https://c.runoob.com/front-end/854" target="_blank" rel="noopener noreferrer">在线测试正则<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li>工具中使用正则表达式
<ul><li>sublime/vscode/word</li> <li>演示替换所有的数字</li></ul></li></ul> <h3 id="正则表达式的组成"><a href="#正则表达式的组成" class="header-anchor">#</a> 正则表达式的组成</h3> <ul><li>普通字符</li> <li>特殊字符(元字符)：正则表达式中有特殊意义的字符</li></ul> <p>示例演示：</p> <ul><li><code>\d</code> 匹配数字</li> <li><code>ab\d</code> 匹配 ab1、ab2</li></ul> <h3 id="元字符串"><a href="#元字符串" class="header-anchor">#</a> 元字符串</h3> <p>通过测试工具演示下面元字符的使用</p> <h4 id="常用元字符串"><a href="#常用元字符串" class="header-anchor">#</a> 常用元字符串</h4> <table><thead><tr><th>元字符</th> <th>说明</th></tr></thead> <tbody><tr><td>\d</td> <td>匹配数字</td></tr> <tr><td>\D</td> <td>匹配任意非数字的字符</td></tr> <tr><td>\w</td> <td>匹配字母或数字或下划线</td></tr> <tr><td>\W</td> <td>匹配任意不是字母，数字，下划线</td></tr> <tr><td>\s</td> <td>匹配任意的空白符</td></tr> <tr><td>\S</td> <td>匹配任意不是空白符的字符</td></tr> <tr><td>.</td> <td>匹配除换行符以外的任意单个字符</td></tr> <tr><td>^</td> <td>表示匹配行首的文本(以谁开始)</td></tr> <tr><td>$</td> <td>表示匹配行尾的文本(以谁结束)</td></tr></tbody></table> <h4 id="限定符"><a href="#限定符" class="header-anchor">#</a> 限定符</h4> <table><thead><tr><th>限定符</th> <th>说明</th></tr></thead> <tbody><tr><td>*</td> <td>重复零次或更多次</td></tr> <tr><td>+</td> <td>重复一次或更多次</td></tr> <tr><td>?</td> <td>重复零次或一次</td></tr> <tr><td>{n}</td> <td>重复n次</td></tr> <tr><td>{n,}</td> <td>重复n次或更多次</td></tr> <tr><td>{n,m}</td> <td>重复n到m次</td></tr></tbody></table> <h4 id="其它"><a href="#其它" class="header-anchor">#</a> 其它</h4> <div class="language- extra-class"><pre class="language-text"><code>[] 字符串用中括号括起来，表示匹配其中的任一字符，相当于或的意思
[^]  匹配除中括号以内的内容
\ 转义符
| 或者，选择两者中的一个。注意|将左右两边分为两部分，而不管左右两边有多长多乱
() 从两个直接量中选择一个，分组
   eg：gr(a|e)y匹配gray和grey
[\u4e00-\u9fa5]  匹配汉字
</code></pre></div><h3 id="案例"><a href="#案例" class="header-anchor">#</a> 案例</h3> <p>验证手机号：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token operator">^</span>\d<span class="token punctuation">{</span><span class="token number">11</span><span class="token punctuation">}</span>$
</code></pre></div><p>验证邮编：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token operator">^</span>\d<span class="token punctuation">{</span><span class="token number">6</span><span class="token punctuation">}</span>$
</code></pre></div><p>验证日期 2012-5-01</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token operator">^</span>\d<span class="token punctuation">{</span><span class="token number">4</span><span class="token punctuation">}</span><span class="token operator">-</span>\d<span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">}</span><span class="token operator">-</span>\d<span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">}</span>$
</code></pre></div><p>验证邮箱 xxx@itcast.cn：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token operator">^</span>\w<span class="token operator">+</span>@\w<span class="token operator">+</span>\<span class="token punctuation">.</span>\w<span class="token operator">+</span>$
</code></pre></div><p>验证IP地址 192.168.1.10</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token operator">^</span>\d<span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">}</span>\<span class="token punctuation">(</span><span class="token punctuation">.</span>\d<span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token number">3</span><span class="token punctuation">}</span>$
</code></pre></div><h2 id="javascript-中使用正则表达式"><a href="#javascript-中使用正则表达式" class="header-anchor">#</a> JavaScript 中使用正则表达式</h2> <h3 id="创建正则对象"><a href="#创建正则对象" class="header-anchor">#</a> 创建正则对象</h3> <p>方式1：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> reg <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Regex</span><span class="token punctuation">(</span><span class="token string">'\d'</span><span class="token punctuation">,</span> <span class="token string">'i'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> reg <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Regex</span><span class="token punctuation">(</span><span class="token string">'\d'</span><span class="token punctuation">,</span> <span class="token string">'gi'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>方式2：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> reg <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\d</span><span class="token regex-delimiter">/</span><span class="token regex-flags">i</span></span><span class="token punctuation">;</span>
<span class="token keyword">var</span> reg <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\d</span><span class="token regex-delimiter">/</span><span class="token regex-flags">gi</span></span><span class="token punctuation">;</span>
</code></pre></div><h4 id="参数"><a href="#参数" class="header-anchor">#</a> 参数</h4> <table><thead><tr><th>标志</th> <th>说明</th></tr></thead> <tbody><tr><td>i</td> <td>忽略大小写</td></tr> <tr><td>g</td> <td>全局匹配</td></tr> <tr><td>gi</td> <td>全局匹配+忽略大小写</td></tr></tbody></table> <h3 id="正则匹配"><a href="#正则匹配" class="header-anchor">#</a> 正则匹配</h3> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// 匹配日期</span>
<span class="token keyword">var</span> dateStr <span class="token operator">=</span> <span class="token string">'2015-10-10'</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> reg <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^\d{4}-\d{1,2}-\d{1,2}$</span><span class="token regex-delimiter">/</span></span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>reg<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>dateStr<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>###匹配正则表达式
//        console.log(/./.test(&quot;除了回车换行以为的任意字符&quot;));//true
//        console.log(/.*/.test(&quot;0个到多个&quot;));//true
//        console.log(/.+/.test(&quot;1个到多个&quot;));//true
//        console.log(/.?/.test(&quot;哈哈&quot;));//true
//        console.log(/[0-9]/.test(&quot;9527&quot;));//true
//        console.log(/[a-z]/.test(&quot;what&quot;));//true
//        console.log(/[A-Z]/.test(&quot;Are&quot;));//true
//        console.log(/[a-zA-Z]/.test(&quot;干啥子&quot;));//false
//        console.log(/[0-9a-zA-Z]/.test(&quot;9ebg&quot;));//true
//        console.log(/b|(ara)/.test(&quot;abra&quot;));//true
//        console.log(/[a-z]{2,3}/.test(&quot;arfsf&quot;));//true</p> <div class="language- extra-class"><pre><code>    console.log(/\d/.test(&quot;998&quot;));//true
    console.log(/\d*/.test(&quot;998&quot;));//true
    console.log(/\d+/.test(&quot;998&quot;));//true
    console.log(/\d{0,}/.test(&quot;998&quot;));//true
    console.log(/\d{2,3}/.test(&quot;998&quot;));//true
    console.log(/\D/.test(&quot;eat&quot;));//true
    console.log(/\s/.test(&quot;  &quot;));//true
    console.log(/\S/.test(&quot;嘎嘎&quot;));//true
    console.log(/\w/.test(&quot;_&quot;));//true
    console.log(/\W/.test(&quot;_&quot;));//true
</code></pre></div><p>###正则表达式案例
1.验证密码强弱
2.验证邮箱：[0-9a-zA-Z_.-]+[@][0-9a-zA-Z._-]+([.][a-zA-Z]+){1,2}
3.验证中文名字[\u4e00-\u9fa5]</p> <h3 id="正则提取"><a href="#正则提取" class="header-anchor">#</a> 正则提取</h3> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// 1. 提取工资</span>
<span class="token keyword">var</span> str <span class="token operator">=</span> <span class="token string">&quot;张三：1000，李四：5000，王五：8000。&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> array <span class="token operator">=</span> str<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\d+</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>array<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 2. 提取email地址</span>
<span class="token keyword">var</span> str <span class="token operator">=</span> <span class="token string">&quot;123123@xx.com,fangfang@valuedopinions.cn 286669312@qq.com 2、emailenglish@emailenglish.englishtown.com 286669312@qq.com...&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> array <span class="token operator">=</span> str<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\w+@\w+\.\w+(\.\w+)?</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>array<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 3. 分组提取  </span>
<span class="token comment">// 3. 提取日期中的年部分  2015-5-10</span>
<span class="token keyword">var</span> dateStr <span class="token operator">=</span> <span class="token string">'2016-1-5'</span><span class="token punctuation">;</span>
<span class="token comment">// 正则表达式中的()作为分组来使用，获取分组匹配到的结果用Regex.$1 $2 $3....来获取</span>
<span class="token keyword">var</span> reg <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">(\d{4})-\d{1,2}-\d{1,2}</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">;</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>reg<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>dateStr<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>RegExp<span class="token punctuation">.</span>$<span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// 4. 提取邮件中的每一部分</span>
<span class="token keyword">var</span> reg <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">(\w+)@(\w+)\.(\w+)(\.\w+)?</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">;</span>
<span class="token keyword">var</span> str <span class="token operator">=</span> <span class="token string">&quot;123123@xx.com&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>reg<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>RegExp<span class="token punctuation">.</span>$<span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>RegExp<span class="token punctuation">.</span>$<span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>RegExp<span class="token punctuation">.</span>$<span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="正则替换"><a href="#正则替换" class="header-anchor">#</a> 正则替换</h3> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// 1. 替换所有空白</span>
<span class="token keyword">var</span> str <span class="token operator">=</span> <span class="token string">&quot;   123AD  asadf   asadfasf  adf &quot;</span><span class="token punctuation">;</span>
str <span class="token operator">=</span> str<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\s</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">,</span><span class="token string">&quot;xx&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 2. 替换所有,|，</span>
<span class="token keyword">var</span> str <span class="token operator">=</span> <span class="token string">&quot;abc,efg,123，abc,123，a&quot;</span><span class="token punctuation">;</span>
str <span class="token operator">=</span> str<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">,|，</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">,</span> <span class="token string">&quot;.&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="案例-表单验证"><a href="#案例-表单验证" class="header-anchor">#</a> 案例：表单验证</h3> <div class="language-html extra-class"><pre class="language-html"><code>QQ号：<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text<span class="token punctuation">&quot;</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>txtQQ<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span><span class="token punctuation">&gt;</span></span>
邮箱：<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text<span class="token punctuation">&quot;</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>txtEMail<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span><span class="token punctuation">&gt;</span></span>
手机：<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text<span class="token punctuation">&quot;</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>txtPhone<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span><span class="token punctuation">&gt;</span></span>
生日：<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text<span class="token punctuation">&quot;</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>txtBirthday<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span><span class="token punctuation">&gt;</span></span>
姓名：<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text<span class="token punctuation">&quot;</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>txtName<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">//获取文本框</span>
<span class="token keyword">var</span> txtQQ <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&quot;txtQQ&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> txtEMail <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&quot;txtEMail&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> txtPhone <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&quot;txtPhone&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> txtBirthday <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&quot;txtBirthday&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> txtName <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&quot;txtName&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//</span>
txtQQ<span class="token punctuation">.</span><span class="token function-variable function">onblur</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">//获取当前文本框对应的span</span>
  <span class="token keyword">var</span> span <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>nextElementSibling<span class="token punctuation">;</span>
  <span class="token keyword">var</span> reg <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^\d{5,12}$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">;</span>
  <span class="token comment">//判断验证是否成功</span>
  <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>reg<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>value<span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token comment">//验证不成功</span>
    span<span class="token punctuation">.</span>innerText <span class="token operator">=</span> <span class="token string">&quot;请输入正确的QQ号&quot;</span><span class="token punctuation">;</span>
    span<span class="token punctuation">.</span>style<span class="token punctuation">.</span>color <span class="token operator">=</span> <span class="token string">&quot;red&quot;</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
    <span class="token comment">//验证成功</span>
    span<span class="token punctuation">.</span>innerText <span class="token operator">=</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span>
    span<span class="token punctuation">.</span>style<span class="token punctuation">.</span>color <span class="token operator">=</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">//txtEMail</span>
txtEMail<span class="token punctuation">.</span><span class="token function-variable function">onblur</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">//获取当前文本框对应的span</span>
  <span class="token keyword">var</span> span <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>nextElementSibling<span class="token punctuation">;</span>
  <span class="token keyword">var</span> reg <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^\w+@\w+\.\w+(\.\w+)?$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">;</span>
  <span class="token comment">//判断验证是否成功</span>
  <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>reg<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>value<span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token comment">//验证不成功</span>
    span<span class="token punctuation">.</span>innerText <span class="token operator">=</span> <span class="token string">&quot;请输入正确的EMail地址&quot;</span><span class="token punctuation">;</span>
    span<span class="token punctuation">.</span>style<span class="token punctuation">.</span>color <span class="token operator">=</span> <span class="token string">&quot;red&quot;</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
    <span class="token comment">//验证成功</span>
    span<span class="token punctuation">.</span>innerText <span class="token operator">=</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span>
    span<span class="token punctuation">.</span>style<span class="token punctuation">.</span>color <span class="token operator">=</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p>表单验证部分，封装成函数：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> regBirthday <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^\d{4}-\d{1,2}-\d{1,2}$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">;</span>
<span class="token function">addCheck</span><span class="token punctuation">(</span>txtBirthday<span class="token punctuation">,</span> regBirthday<span class="token punctuation">,</span> <span class="token string">&quot;请输入正确的出生日期&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//给文本框添加验证</span>
<span class="token keyword">function</span> <span class="token function">addCheck</span><span class="token punctuation">(</span><span class="token parameter">element<span class="token punctuation">,</span> reg<span class="token punctuation">,</span> tip</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  element<span class="token punctuation">.</span><span class="token function-variable function">onblur</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">//获取当前文本框对应的span</span>
    <span class="token keyword">var</span> span <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>nextElementSibling<span class="token punctuation">;</span>
    <span class="token comment">//判断验证是否成功</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>reg<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>value<span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">{</span>
      <span class="token comment">//验证不成功</span>
      span<span class="token punctuation">.</span>innerText <span class="token operator">=</span> tip<span class="token punctuation">;</span>
      span<span class="token punctuation">.</span>style<span class="token punctuation">.</span>color <span class="token operator">=</span> <span class="token string">&quot;red&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
      <span class="token comment">//验证成功</span>
      span<span class="token punctuation">.</span>innerText <span class="token operator">=</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span>
      span<span class="token punctuation">.</span>style<span class="token punctuation">.</span>color <span class="token operator">=</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>通过给元素增加自定义验证属性对表单进行验证：</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>form</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>frm<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  QQ号：<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text<span class="token punctuation">&quot;</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>txtQQ<span class="token punctuation">&quot;</span></span> <span class="token attr-name">data-rule</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>qq<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span><span class="token punctuation">&gt;</span></span>
  邮箱：<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text<span class="token punctuation">&quot;</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>txtEMail<span class="token punctuation">&quot;</span></span> <span class="token attr-name">data-rule</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>email<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span><span class="token punctuation">&gt;</span></span>
  手机：<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text<span class="token punctuation">&quot;</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>txtPhone<span class="token punctuation">&quot;</span></span> <span class="token attr-name">data-rule</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>phone<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span><span class="token punctuation">&gt;</span></span>
  生日：<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text<span class="token punctuation">&quot;</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>txtBirthday<span class="token punctuation">&quot;</span></span> <span class="token attr-name">data-rule</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>date<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span><span class="token punctuation">&gt;</span></span>
  姓名：<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text<span class="token punctuation">&quot;</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>txtName<span class="token punctuation">&quot;</span></span> <span class="token attr-name">data-rule</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>cn<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>form</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// 所有的验证规则</span>
<span class="token keyword">var</span> rules <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token punctuation">{</span>
    name<span class="token operator">:</span> <span class="token string">'qq'</span><span class="token punctuation">,</span>
    reg<span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^\d{5,12}$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
    tip<span class="token operator">:</span> <span class="token string">&quot;请输入正确的QQ&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    name<span class="token operator">:</span> <span class="token string">'email'</span><span class="token punctuation">,</span>
    reg<span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^\w+@\w+\.\w+(\.\w+)?$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
    tip<span class="token operator">:</span> <span class="token string">&quot;请输入正确的邮箱地址&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    name<span class="token operator">:</span> <span class="token string">'phone'</span><span class="token punctuation">,</span>
    reg<span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^\d{11}$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
    tip<span class="token operator">:</span> <span class="token string">&quot;请输入正确的手机号码&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    name<span class="token operator">:</span> <span class="token string">'date'</span><span class="token punctuation">,</span>
    reg<span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^\d{4}-\d{1,2}-\d{1,2}$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
    tip<span class="token operator">:</span> <span class="token string">&quot;请输入正确的出生日期&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    name<span class="token operator">:</span> <span class="token string">'cn'</span><span class="token punctuation">,</span>
    reg<span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^[\u4e00-\u9fa5]{2,4}$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
    tip<span class="token operator">:</span> <span class="token string">&quot;请输入正确的姓名&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token function">addCheck</span><span class="token punctuation">(</span><span class="token string">'frm'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>


<span class="token comment">//给文本框添加验证</span>
<span class="token keyword">function</span> <span class="token function">addCheck</span><span class="token punctuation">(</span><span class="token parameter">formId</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span>
      len <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span>
      frm <span class="token operator">=</span>document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span>formId<span class="token punctuation">)</span><span class="token punctuation">;</span>
  len <span class="token operator">=</span> frm<span class="token punctuation">.</span>children<span class="token punctuation">.</span>length<span class="token punctuation">;</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> len<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> element <span class="token operator">=</span> frm<span class="token punctuation">.</span>children<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token comment">// 表单元素中有name属性的元素添加验证</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>element<span class="token punctuation">.</span>name<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      element<span class="token punctuation">.</span><span class="token function-variable function">onblur</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 使用dataset获取data-自定义属性的值</span>
        <span class="token keyword">var</span> ruleName <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>dataset<span class="token punctuation">.</span>rule<span class="token punctuation">;</span>
        <span class="token keyword">var</span> rule <span class="token operator">=</span><span class="token function">getRuleByRuleName</span><span class="token punctuation">(</span>rules<span class="token punctuation">,</span> ruleName<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">var</span> span <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>nextElementSibling<span class="token punctuation">;</span>
        <span class="token comment">//判断验证是否成功</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>rule<span class="token punctuation">.</span>reg<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>value<span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">{</span>
          <span class="token comment">//验证不成功</span>
          span<span class="token punctuation">.</span>innerText <span class="token operator">=</span> rule<span class="token punctuation">.</span>tip<span class="token punctuation">;</span>
          span<span class="token punctuation">.</span>style<span class="token punctuation">.</span>color <span class="token operator">=</span> <span class="token string">&quot;red&quot;</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
          <span class="token comment">//验证成功</span>
          span<span class="token punctuation">.</span>innerText <span class="token operator">=</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span>
          span<span class="token punctuation">.</span>style<span class="token punctuation">.</span>color <span class="token operator">=</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// 根据规则的名称获取规则对象</span>
<span class="token keyword">function</span> <span class="token function">getRuleByRuleName</span><span class="token punctuation">(</span><span class="token parameter">rules<span class="token punctuation">,</span> ruleName</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span>
      len <span class="token operator">=</span> rules<span class="token punctuation">.</span>length<span class="token punctuation">;</span>
  <span class="token keyword">var</span> rule <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> len<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>rules<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>name <span class="token operator">==</span> ruleName<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      rule <span class="token operator">=</span> rules<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
      <span class="token keyword">break</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> rule<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="补充"><a href="#补充" class="header-anchor">#</a> 补充</h2> <h3 id="伪数组和数组"><a href="#伪数组和数组" class="header-anchor">#</a> 伪数组和数组</h3> <p>在JavaScript中，除了5种原始数据类型之外，其他所有的都是对象，包括函数（Function）。</p> <h4 id="对象与数组的关系"><a href="#对象与数组的关系" class="header-anchor">#</a> 对象与数组的关系</h4> <p>在说区别之前，需要先提到另外一个知识，就是 JavaScript 的原型继承。
所有 JavaScript 的内置构造函数都是继承自 <code>Object.prototype</code> 。
在这个前提下，可以理解为使用 <code>new Array()</code> 或 <code>[]</code> 创建出来的数组对象，都会拥有 <code>Object.prototype</code> 的属性值。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token comment">// 拥有 Object.prototype 的属性值</span>
<span class="token keyword">var</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token comment">//使用数组直接量创建的数组，由于 Array.prototype 的属性继承自 Object.prototype，</span>
<span class="token comment">//那么，它将同时拥有 Array.prototype 和 Object.prototype 的属性值</span>
</code></pre></div><p>可以得到对象和数组的第一个区别：对象没有数组 Array.prototype 的属性值。</p> <h4 id="什么是数组"><a href="#什么是数组" class="header-anchor">#</a> 什么是数组</h4> <p>数组具有一个最基本特征：索引，这是对象所没有的，下面来看一段代码：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
 
obj<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">'a'</span><span class="token punctuation">;</span>
arr<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">'a'</span><span class="token punctuation">;</span>
 
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>obj<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// =&gt; a</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arr<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// =&gt; a</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>obj<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// =&gt; undefined</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arr<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// =&gt; 3</span>
</code></pre></div><ul><li>obj[2]输出'a'，是因为对象就是普通的键值对存取数据</li> <li>而arr[2]输出'a' 则不同，数组是通过索引来存取数据，arr[2]之所以输出'a'，是因为数组arr索引2的位置已经存储了数据</li> <li>obj.length并不具有数组的特性，并且obj没有保存属性length，那么自然就会输出undefined</li> <li>而对于数组来说，length是数组的一个内置属性，数组会根据索引长度来更改length的值</li> <li>为什么arr.length输出3，而不是1
<ul><li>在给数组添加元素时，并没有按照连续的索引添加，所以导致数组的索引不连续，那么就导致索引长度大于元素个数</li></ul></li></ul> <h4 id="什么是伪数组"><a href="#什么是伪数组" class="header-anchor">#</a> 什么是伪数组</h4> <ol><li>拥有 length 属性，其它属性（索引）为非负整数(对象中的索引会被当做字符串来处理，这里你可以当做是个非负整数串来理解)</li> <li>不具有数组所具有的方法</li></ol> <p>伪数组，就是像数组一样有 <code>length</code> 属性，也有 <code>0、1、2、3</code> 等属性的对象，看起来就像数组一样，但不是数组，比如:</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> fakeArray <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token string">&quot;0&quot;</span><span class="token operator">:</span> <span class="token string">&quot;first&quot;</span><span class="token punctuation">,</span>
  <span class="token string">&quot;1&quot;</span><span class="token operator">:</span> <span class="token string">&quot;second&quot;</span><span class="token punctuation">,</span>
  <span class="token string">&quot;2&quot;</span><span class="token operator">:</span> <span class="token string">&quot;third&quot;</span><span class="token punctuation">,</span>
  length<span class="token operator">:</span> <span class="token number">3</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
 
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> fakeArray<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>fakeArray<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
 
<span class="token class-name">Array</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>fakeArray<span class="token punctuation">,</span><span class="token string">'+'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>常见的伪数组有：</p> <ul><li>函数内部的 <code>arguments</code></li> <li>DOM 对象列表（比如通过 <code>document.getElementsByTags</code> 得到的列表）</li> <li>jQuery 对象（比如 <code>$(&quot;div&quot;)</code> ）</li></ul> <p>伪数组是一个 Object，而真实的数组是一个 Array。</p> <p>伪数组存在的意义，是可以让普通的对象也能正常使用数组的很多方法，比如：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> arr <span class="token operator">=</span> <span class="token class-name">Array</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>arguments<span class="token punctuation">)</span><span class="token punctuation">;</span>
 
<span class="token class-name">Array</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>arguments<span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">v</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 循环arguments对象</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// push</span>
<span class="token comment">// some</span>
<span class="token comment">// every</span>
<span class="token comment">// filter</span>
<span class="token comment">// map</span>
<span class="token comment">// ...</span>
</code></pre></div><p>以上在借用数组的原型方法的时候都可以通过数组直接量来简化使用：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token number">0</span><span class="token operator">:</span> <span class="token string">'a'</span><span class="token punctuation">,</span>
  <span class="token number">1</span><span class="token operator">:</span> <span class="token string">'b'</span><span class="token punctuation">,</span>
  <span class="token number">2</span><span class="token operator">:</span> <span class="token string">'c'</span><span class="token punctuation">,</span>
  length<span class="token operator">:</span> <span class="token number">3</span>
<span class="token punctuation">}</span>

<span class="token punctuation">;</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> <span class="token string">'d'</span><span class="token punctuation">)</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token punctuation">;</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">num<span class="token punctuation">,</span> index</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>num<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h4 id="小结-6"><a href="#小结-6" class="header-anchor">#</a> 小结</h4> <ul><li>对象没有数组 Array.prototype 的属性值，类型是 Object ，而数组类型是 Array</li> <li>数组是基于索引的实现， length 会自动更新，而对象是键值对</li> <li>使用对象可以创建伪数组，伪数组可以正常使用数组的大部分方法</li></ul> <h3 id="javascript-垃圾回收机制"><a href="#javascript-垃圾回收机制" class="header-anchor">#</a> JavaScript 垃圾回收机制</h3> <h3 id="javascript-运行机制-event-loop"><a href="#javascript-运行机制-event-loop" class="header-anchor">#</a> JavaScript 运行机制：Event Loop</h3> <h3 id="object"><a href="#object" class="header-anchor">#</a> Object</h3> <h4 id="静态成员"><a href="#静态成员" class="header-anchor">#</a> 静态成员</h4> <ul><li>Object.assign()</li> <li>Object.create()</li> <li>Object.keys()</li> <li>Object.defineProperty()</li></ul> <h4 id="实例成员"><a href="#实例成员" class="header-anchor">#</a> 实例成员</h4> <ul><li>constructor</li> <li>hasOwnProperty()</li> <li>isPrototypeOf</li> <li>propertyIsEnumerable()</li> <li>toString()</li> <li>valueOf()</li></ul> <hr> <h2 id="附录"><a href="#附录" class="header-anchor">#</a> 附录</h2> <h3 id="a-代码规范"><a href="#a-代码规范" class="header-anchor">#</a> A 代码规范</h3> <h4 id="代码风格"><a href="#代码风格" class="header-anchor">#</a> 代码风格</h4> <ul><li><a href="https://github.com/feross/standard" target="_blank" rel="noopener noreferrer">JavaScript Standard Style <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://github.com/airbnb/javascript" target="_blank" rel="noopener noreferrer">Airbnb JavaScript Style Guide() {<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <h4 id="校验工具"><a href="#校验工具" class="header-anchor">#</a> 校验工具</h4> <ul><li><a href="https://github.com/douglascrockford/JSLint" target="_blank" rel="noopener noreferrer">JSLint<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://github.com/jshint/jshint" target="_blank" rel="noopener noreferrer">JSHint<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://github.com/eslint/eslint" target="_blank" rel="noopener noreferrer">ESLint<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <h3 id="b-chrome-开发者工具"><a href="#b-chrome-开发者工具" class="header-anchor">#</a> B Chrome 开发者工具</h3> <h3 id="c-文档相关工具"><a href="#c-文档相关工具" class="header-anchor">#</a> C 文档相关工具</h3> <ul><li>电子文档制作工具: <a href="https://github.com/egoist/docute" target="_blank" rel="noopener noreferrer">docute<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li>流程图工具：<a href="http://logicnet.dk/DiagramDesigner/" target="_blank" rel="noopener noreferrer">DiagramDesigner<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main></div><div class="global-ui"><div></div></div></div>
    <script src="/assets/js/app.1b64b8f6.js" defer></script><script src="/assets/js/8.78de4c0a.js" defer></script><script src="/assets/js/18.0a391090.js" defer></script>
  </body>
</html>
