<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Mybatis-9.28 | 菜鸡白</title>
    <meta name="generator" content="VuePress 1.7.1">
    <script>
            var _hmt = _hmt || [];
            (function() {
              var hm = document.createElement("script");
              hm.src = "https://hm.baidu.com/hm.js?79265c513a9ad13e0f451d8a4d580df2";
              var s = document.getElementsByTagName("script")[0]; 
              s.parentNode.insertBefore(hm, s);
            })();
            
            </script>
    <script src="/assets/js/autopush-baidu.js"></script>
    <meta name="description" content="自主、跨界、终生学习">
    <meta name="keywords" content="菜鸡白、白亚鹏、前端、后端、java、python">
    <meta name="baidu-site-verification" content="code-vmZR2p48j9">
    
    <link rel="preload" href="/assets/css/0.styles.85051b5f.css" as="style"><link rel="preload" href="/assets/js/app.1b64b8f6.js" as="script"><link rel="preload" href="/assets/js/8.78de4c0a.js" as="script"><link rel="preload" href="/assets/js/12.96ea9ee6.js" as="script"><link rel="prefetch" href="/assets/js/10.a4c3c0d8.js"><link rel="prefetch" href="/assets/js/11.35a075fd.js"><link rel="prefetch" href="/assets/js/13.d66514f3.js"><link rel="prefetch" href="/assets/js/14.cba52797.js"><link rel="prefetch" href="/assets/js/15.14fe690a.js"><link rel="prefetch" href="/assets/js/16.0e79c2d3.js"><link rel="prefetch" href="/assets/js/17.6bc5c79c.js"><link rel="prefetch" href="/assets/js/18.0a391090.js"><link rel="prefetch" href="/assets/js/19.b33be37a.js"><link rel="prefetch" href="/assets/js/2.d56125bd.js"><link rel="prefetch" href="/assets/js/20.35ed9343.js"><link rel="prefetch" href="/assets/js/21.6745a2a1.js"><link rel="prefetch" href="/assets/js/22.9c480348.js"><link rel="prefetch" href="/assets/js/23.d010aa61.js"><link rel="prefetch" href="/assets/js/24.577ccb08.js"><link rel="prefetch" href="/assets/js/25.c95f8440.js"><link rel="prefetch" href="/assets/js/26.a371244a.js"><link rel="prefetch" href="/assets/js/27.a3d689da.js"><link rel="prefetch" href="/assets/js/28.800bfc29.js"><link rel="prefetch" href="/assets/js/29.a0512e4f.js"><link rel="prefetch" href="/assets/js/3.0fb7dd2f.js"><link rel="prefetch" href="/assets/js/30.cfca40c7.js"><link rel="prefetch" href="/assets/js/31.a860c9e5.js"><link rel="prefetch" href="/assets/js/32.b6c35af9.js"><link rel="prefetch" href="/assets/js/33.75478728.js"><link rel="prefetch" href="/assets/js/34.f4a2aeb1.js"><link rel="prefetch" href="/assets/js/35.f796ea16.js"><link rel="prefetch" href="/assets/js/36.f0e46069.js"><link rel="prefetch" href="/assets/js/37.d6c19fd6.js"><link rel="prefetch" href="/assets/js/38.f0458dd7.js"><link rel="prefetch" href="/assets/js/39.98f9f395.js"><link rel="prefetch" href="/assets/js/4.d0ac3b7b.js"><link rel="prefetch" href="/assets/js/40.3b244258.js"><link rel="prefetch" href="/assets/js/41.5a5bed69.js"><link rel="prefetch" href="/assets/js/42.b3b48570.js"><link rel="prefetch" href="/assets/js/43.3b86fb01.js"><link rel="prefetch" href="/assets/js/44.62a3a656.js"><link rel="prefetch" href="/assets/js/5.e3422018.js"><link rel="prefetch" href="/assets/js/6.91247d69.js"><link rel="prefetch" href="/assets/js/7.a1d116bf.js"><link rel="prefetch" href="/assets/js/9.d1da5b1f.js">
    <link rel="stylesheet" href="/assets/css/0.styles.85051b5f.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/assets/images/cjb.png " alt="菜鸡白" class="logo"> <span class="site-name can-hide">菜鸡白</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="文档1" class="dropdown-title"><span class="title">文档1</span> <span class="arrow down"></span></button> <button type="button" aria-label="文档1" class="mobile-dropdown-title"><span class="title">文档1</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/documents1/html/html.html" class="nav-link">
  html
</a></li><li class="dropdown-item"><!----> <a href="/documents1/css/css.html" class="nav-link">
  css
</a></li><li class="dropdown-item"><!----> <a href="/documents1/h5c3/h5c3.html" class="nav-link">
  h5c3
</a></li><li class="dropdown-item"><!----> <a href="/documents1/flex/flex.html" class="nav-link">
  布局
</a></li><li class="dropdown-item"><!----> <a href="/documents1/jquery/jquery.html" class="nav-link">
  jQuery
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="文档2" class="dropdown-title"><span class="title">文档2</span> <span class="arrow down"></span></button> <button type="button" aria-label="文档2" class="mobile-dropdown-title"><span class="title">文档2</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/documents2/html/html.html" class="nav-link">
  html
</a></li><li class="dropdown-item"><!----> <a href="/documents2/css/css.html" class="nav-link">
  css
</a></li><li class="dropdown-item"><!----> <a href="/documents2/js1/javascript基础.html" class="nav-link">
  JavaScript基础
</a></li><li class="dropdown-item"><!----> <a href="/documents2/web-api/web-api.html" class="nav-link">
  web api
</a></li><li class="dropdown-item"><!----> <a href="/documents2/js2/javascript高级.html" class="nav-link">
  JavaScript高级
</a></li><li class="dropdown-item"><!----> <a href="/documents2/canvas/canvas.html" class="nav-link">
  canvas
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="文档3" class="dropdown-title"><span class="title">文档3</span> <span class="arrow down"></span></button> <button type="button" aria-label="文档3" class="mobile-dropdown-title"><span class="title">文档3</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/documents3/html/01-HTML.html" class="nav-link">
  html
</a></li><li class="dropdown-item"><!----> <a href="/documents3/css/CSS.html" class="nav-link">
  css
</a></li><li class="dropdown-item"><!----> <a href="/documents3/js1/01-JavaScript基础.html" class="nav-link">
  JavaScript基础
</a></li><li class="dropdown-item"><!----> <a href="/documents3/web-api/02-Web API.html" class="nav-link">
  web api
</a></li><li class="dropdown-item"><!----> <a href="/documents3/js2/03-JavaScript高级.html" class="nav-link">
  JavaScript高级
</a></li><li class="dropdown-item"><!----> <a href="/documents3/jQuery/04-jQuery.html" class="nav-link">
  jQuery
</a></li><li class="dropdown-item"><!----> <a href="/documents3/canvas/canvas.html" class="nav-link">
  canvas
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="JAVA" class="dropdown-title"><span class="title">JAVA</span> <span class="arrow down"></span></button> <button type="button" aria-label="JAVA" class="mobile-dropdown-title"><span class="title">JAVA</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/JAVA/JavaWeb/JavaWeb.html" class="nav-link">
  Java Web
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="KS-JAVA" class="dropdown-title"><span class="title">KS-JAVA</span> <span class="arrow down"></span></button> <button type="button" aria-label="KS-JAVA" class="mobile-dropdown-title"><span class="title">KS-JAVA</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/ks_java/JavaSE/JavaSE.html" class="nav-link">
  JavaSE
</a></li><li class="dropdown-item"><!----> <a href="/ks_java/mysql/MySQL.html" class="nav-link">
  MySQL
</a></li><li class="dropdown-item"><!----> <a href="/ks_java/JavaWeb/JavaWeb.html" class="nav-link">
  JavaWeb
</a></li><li class="dropdown-item"><!----> <a href="/ks_java/MyBatis/MyBatis.html" class="nav-link">
  MyBatis
</a></li></ul></div></div><div class="nav-item"><a href="/tools/" class="nav-link">
  工具
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="零碎" class="dropdown-title"><span class="title">零碎</span> <span class="arrow down"></span></button> <button type="button" aria-label="零碎" class="mobile-dropdown-title"><span class="title">零碎</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/piecemeal/html.html" class="nav-link">
  html
</a></li><li class="dropdown-item"><!----> <a href="/piecemeal/css.html" class="nav-link">
  css
</a></li><li class="dropdown-item"><!----> <a href="/piecemeal/javascript.html" class="nav-link">
  JavaScript
</a></li><li class="dropdown-item"><!----> <a href="/piecemeal/vue.html" class="nav-link">
  Vue
</a></li><li class="dropdown-item"><!----> <a href="/piecemeal/node.html" class="nav-link">
  node
</a></li><li class="dropdown-item"><!----> <a href="/piecemeal/small-program.html" class="nav-link">
  小程序
</a></li><li class="dropdown-item"><!----> <a href="/piecemeal/git.html" class="nav-link">
  git
</a></li><li class="dropdown-item"><!----> <a href="/piecemeal/markdown/" class="nav-link">
  markdown
</a></li><li class="dropdown-item"><!----> <a href="/piecemeal/interview/simpread-一位前端小姐姐的五万字面试宝典.html" class="nav-link">
  面试
</a></li><li class="dropdown-item"><!----> <a href="/piecemeal/interview/simpread-2019 前端最全面试题.html" class="nav-link">
  面试2
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="分享" class="dropdown-title"><span class="title">分享</span> <span class="arrow down"></span></button> <button type="button" aria-label="分享" class="mobile-dropdown-title"><span class="title">分享</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/share/site.html" class="nav-link">
  站点
</a></li><li class="dropdown-item"><h4>
          搜商
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/share/search/engine/" class="nav-link">
  搜索引擎
</a></li><li class="dropdown-subitem"><a href="/share/search/skill/google搜索技巧.html" class="nav-link">
  搜索艺术
</a></li><li class="dropdown-subitem"><a href="/share/search/skill/github高级搜索.html" class="nav-link">
  github高级搜索
</a></li></ul></li></ul></div></div><div class="nav-item"><a href="/about/" class="nav-link">
  关于
</a></div><div class="nav-item"><a href="http://ypll.xyz/python" target="_blank" rel="noopener noreferrer" class="nav-link external">
  python基础教程
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://github.com/b-yp/b-yp.github.io" target="_blank" rel="noopener noreferrer" class="nav-link external">
  github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="文档1" class="dropdown-title"><span class="title">文档1</span> <span class="arrow down"></span></button> <button type="button" aria-label="文档1" class="mobile-dropdown-title"><span class="title">文档1</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/documents1/html/html.html" class="nav-link">
  html
</a></li><li class="dropdown-item"><!----> <a href="/documents1/css/css.html" class="nav-link">
  css
</a></li><li class="dropdown-item"><!----> <a href="/documents1/h5c3/h5c3.html" class="nav-link">
  h5c3
</a></li><li class="dropdown-item"><!----> <a href="/documents1/flex/flex.html" class="nav-link">
  布局
</a></li><li class="dropdown-item"><!----> <a href="/documents1/jquery/jquery.html" class="nav-link">
  jQuery
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="文档2" class="dropdown-title"><span class="title">文档2</span> <span class="arrow down"></span></button> <button type="button" aria-label="文档2" class="mobile-dropdown-title"><span class="title">文档2</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/documents2/html/html.html" class="nav-link">
  html
</a></li><li class="dropdown-item"><!----> <a href="/documents2/css/css.html" class="nav-link">
  css
</a></li><li class="dropdown-item"><!----> <a href="/documents2/js1/javascript基础.html" class="nav-link">
  JavaScript基础
</a></li><li class="dropdown-item"><!----> <a href="/documents2/web-api/web-api.html" class="nav-link">
  web api
</a></li><li class="dropdown-item"><!----> <a href="/documents2/js2/javascript高级.html" class="nav-link">
  JavaScript高级
</a></li><li class="dropdown-item"><!----> <a href="/documents2/canvas/canvas.html" class="nav-link">
  canvas
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="文档3" class="dropdown-title"><span class="title">文档3</span> <span class="arrow down"></span></button> <button type="button" aria-label="文档3" class="mobile-dropdown-title"><span class="title">文档3</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/documents3/html/01-HTML.html" class="nav-link">
  html
</a></li><li class="dropdown-item"><!----> <a href="/documents3/css/CSS.html" class="nav-link">
  css
</a></li><li class="dropdown-item"><!----> <a href="/documents3/js1/01-JavaScript基础.html" class="nav-link">
  JavaScript基础
</a></li><li class="dropdown-item"><!----> <a href="/documents3/web-api/02-Web API.html" class="nav-link">
  web api
</a></li><li class="dropdown-item"><!----> <a href="/documents3/js2/03-JavaScript高级.html" class="nav-link">
  JavaScript高级
</a></li><li class="dropdown-item"><!----> <a href="/documents3/jQuery/04-jQuery.html" class="nav-link">
  jQuery
</a></li><li class="dropdown-item"><!----> <a href="/documents3/canvas/canvas.html" class="nav-link">
  canvas
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="JAVA" class="dropdown-title"><span class="title">JAVA</span> <span class="arrow down"></span></button> <button type="button" aria-label="JAVA" class="mobile-dropdown-title"><span class="title">JAVA</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/JAVA/JavaWeb/JavaWeb.html" class="nav-link">
  Java Web
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="KS-JAVA" class="dropdown-title"><span class="title">KS-JAVA</span> <span class="arrow down"></span></button> <button type="button" aria-label="KS-JAVA" class="mobile-dropdown-title"><span class="title">KS-JAVA</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/ks_java/JavaSE/JavaSE.html" class="nav-link">
  JavaSE
</a></li><li class="dropdown-item"><!----> <a href="/ks_java/mysql/MySQL.html" class="nav-link">
  MySQL
</a></li><li class="dropdown-item"><!----> <a href="/ks_java/JavaWeb/JavaWeb.html" class="nav-link">
  JavaWeb
</a></li><li class="dropdown-item"><!----> <a href="/ks_java/MyBatis/MyBatis.html" class="nav-link">
  MyBatis
</a></li></ul></div></div><div class="nav-item"><a href="/tools/" class="nav-link">
  工具
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="零碎" class="dropdown-title"><span class="title">零碎</span> <span class="arrow down"></span></button> <button type="button" aria-label="零碎" class="mobile-dropdown-title"><span class="title">零碎</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/piecemeal/html.html" class="nav-link">
  html
</a></li><li class="dropdown-item"><!----> <a href="/piecemeal/css.html" class="nav-link">
  css
</a></li><li class="dropdown-item"><!----> <a href="/piecemeal/javascript.html" class="nav-link">
  JavaScript
</a></li><li class="dropdown-item"><!----> <a href="/piecemeal/vue.html" class="nav-link">
  Vue
</a></li><li class="dropdown-item"><!----> <a href="/piecemeal/node.html" class="nav-link">
  node
</a></li><li class="dropdown-item"><!----> <a href="/piecemeal/small-program.html" class="nav-link">
  小程序
</a></li><li class="dropdown-item"><!----> <a href="/piecemeal/git.html" class="nav-link">
  git
</a></li><li class="dropdown-item"><!----> <a href="/piecemeal/markdown/" class="nav-link">
  markdown
</a></li><li class="dropdown-item"><!----> <a href="/piecemeal/interview/simpread-一位前端小姐姐的五万字面试宝典.html" class="nav-link">
  面试
</a></li><li class="dropdown-item"><!----> <a href="/piecemeal/interview/simpread-2019 前端最全面试题.html" class="nav-link">
  面试2
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="分享" class="dropdown-title"><span class="title">分享</span> <span class="arrow down"></span></button> <button type="button" aria-label="分享" class="mobile-dropdown-title"><span class="title">分享</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/share/site.html" class="nav-link">
  站点
</a></li><li class="dropdown-item"><h4>
          搜商
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/share/search/engine/" class="nav-link">
  搜索引擎
</a></li><li class="dropdown-subitem"><a href="/share/search/skill/google搜索技巧.html" class="nav-link">
  搜索艺术
</a></li><li class="dropdown-subitem"><a href="/share/search/skill/github高级搜索.html" class="nav-link">
  github高级搜索
</a></li></ul></li></ul></div></div><div class="nav-item"><a href="/about/" class="nav-link">
  关于
</a></div><div class="nav-item"><a href="http://ypll.xyz/python" target="_blank" rel="noopener noreferrer" class="nav-link external">
  python基础教程
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://github.com/b-yp/b-yp.github.io" target="_blank" rel="noopener noreferrer" class="nav-link external">
  github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Mybatis-9.28</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/ks_java/Mybatis/Mybatis.html#mybatis-9-28" class="sidebar-link">Mybatis-9.28</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/ks_java/Mybatis/Mybatis.html#_1、简介" class="sidebar-link">1、简介</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/ks_java/Mybatis/Mybatis.html#_1-1、什么是mybatis" class="sidebar-link">1.1、什么是Mybatis</a></li><li class="sidebar-sub-header"><a href="/ks_java/Mybatis/Mybatis.html#_1-2、持久化" class="sidebar-link">1.2、持久化</a></li><li class="sidebar-sub-header"><a href="/ks_java/Mybatis/Mybatis.html#_1-3、持久层" class="sidebar-link">1.3、持久层</a></li><li class="sidebar-sub-header"><a href="/ks_java/Mybatis/Mybatis.html#_1-4-为什么需要mybatis" class="sidebar-link">1.4 为什么需要Mybatis？</a></li></ul></li><li><a href="/ks_java/Mybatis/Mybatis.html#_2、第一个mybatis程序" class="sidebar-link">2、第一个Mybatis程序</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/ks_java/Mybatis/Mybatis.html#_2-1、搭建环境" class="sidebar-link">2.1、搭建环境</a></li><li class="sidebar-sub-header"><a href="/ks_java/Mybatis/Mybatis.html#_2-2、创建一个模块" class="sidebar-link">2.2、创建一个模块</a></li><li class="sidebar-sub-header"><a href="/ks_java/Mybatis/Mybatis.html#_2-3、编写代码" class="sidebar-link">2.3、编写代码</a></li><li class="sidebar-sub-header"><a href="/ks_java/Mybatis/Mybatis.html#_2-4、测试" class="sidebar-link">2.4、测试</a></li></ul></li><li><a href="/ks_java/Mybatis/Mybatis.html#_3、crud" class="sidebar-link">3、CRUD</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/ks_java/Mybatis/Mybatis.html#_1、namespace" class="sidebar-link">1、namespace</a></li><li class="sidebar-sub-header"><a href="/ks_java/Mybatis/Mybatis.html#_2、select" class="sidebar-link">2、select</a></li><li class="sidebar-sub-header"><a href="/ks_java/Mybatis/Mybatis.html#_3、insert" class="sidebar-link">3、Insert</a></li><li class="sidebar-sub-header"><a href="/ks_java/Mybatis/Mybatis.html#_4、update" class="sidebar-link">4、update</a></li><li class="sidebar-sub-header"><a href="/ks_java/Mybatis/Mybatis.html#_5、delete" class="sidebar-link">5、Delete</a></li><li class="sidebar-sub-header"><a href="/ks_java/Mybatis/Mybatis.html#_6、分析错误" class="sidebar-link">6、分析错误</a></li><li class="sidebar-sub-header"><a href="/ks_java/Mybatis/Mybatis.html#_7、万能map" class="sidebar-link">7、万能Map</a></li><li class="sidebar-sub-header"><a href="/ks_java/Mybatis/Mybatis.html#_8、思考题" class="sidebar-link">8、思考题</a></li></ul></li><li><a href="/ks_java/Mybatis/Mybatis.html#_4、配置解析" class="sidebar-link">4、配置解析</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/ks_java/Mybatis/Mybatis.html#_1、核心配置文件" class="sidebar-link">1、核心配置文件</a></li><li class="sidebar-sub-header"><a href="/ks_java/Mybatis/Mybatis.html#_2、环境配置-environments" class="sidebar-link">2、环境配置（environments）</a></li><li class="sidebar-sub-header"><a href="/ks_java/Mybatis/Mybatis.html#_3、属性-properties" class="sidebar-link">3、属性（properties）</a></li><li class="sidebar-sub-header"><a href="/ks_java/Mybatis/Mybatis.html#_4、类型别名-typealiases" class="sidebar-link">4、类型别名（typeAliases）</a></li><li class="sidebar-sub-header"><a href="/ks_java/Mybatis/Mybatis.html#_5、设置" class="sidebar-link">5、设置</a></li><li class="sidebar-sub-header"><a href="/ks_java/Mybatis/Mybatis.html#_6、其他配置" class="sidebar-link">6、其他配置</a></li><li class="sidebar-sub-header"><a href="/ks_java/Mybatis/Mybatis.html#_7、映射器-mappers" class="sidebar-link">7、映射器（mappers）</a></li><li class="sidebar-sub-header"><a href="/ks_java/Mybatis/Mybatis.html#_8、生命周期和作用域" class="sidebar-link">8、生命周期和作用域</a></li></ul></li><li><a href="/ks_java/Mybatis/Mybatis.html#_5、解决属性名和字段名不一致的问题" class="sidebar-link">5、解决属性名和字段名不一致的问题</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/ks_java/Mybatis/Mybatis.html#_1、-问题" class="sidebar-link">1、 问题</a></li><li class="sidebar-sub-header"><a href="/ks_java/Mybatis/Mybatis.html#_2、resultmap" class="sidebar-link">2、resultMap</a></li></ul></li><li><a href="/ks_java/Mybatis/Mybatis.html#_6、日志" class="sidebar-link">6、日志</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/ks_java/Mybatis/Mybatis.html#_6-1、日志工厂" class="sidebar-link">6.1、日志工厂</a></li><li class="sidebar-sub-header"><a href="/ks_java/Mybatis/Mybatis.html#_6-2、log4j" class="sidebar-link">6.2、Log4j</a></li></ul></li><li><a href="/ks_java/Mybatis/Mybatis.html#_7、分页" class="sidebar-link">7、分页</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/ks_java/Mybatis/Mybatis.html#_7-1、使用limit分页" class="sidebar-link">7.1、使用Limit分页</a></li><li class="sidebar-sub-header"><a href="/ks_java/Mybatis/Mybatis.html#_7-2、rowbounds分页" class="sidebar-link">7.2、RowBounds分页</a></li><li class="sidebar-sub-header"><a href="/ks_java/Mybatis/Mybatis.html#_7-3、分页插件" class="sidebar-link">7.3、分页插件</a></li></ul></li><li><a href="/ks_java/Mybatis/Mybatis.html#_8、使用注解开发" class="sidebar-link">8、使用注解开发</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/ks_java/Mybatis/Mybatis.html#_8-1、面向接口编程" class="sidebar-link">8.1、面向接口编程</a></li><li class="sidebar-sub-header"><a href="/ks_java/Mybatis/Mybatis.html#_8-2、使用注解开发" class="sidebar-link">8.2、使用注解开发</a></li><li class="sidebar-sub-header"><a href="/ks_java/Mybatis/Mybatis.html#_8-3、crud" class="sidebar-link">8.3、CRUD</a></li></ul></li><li><a href="/ks_java/Mybatis/Mybatis.html#_9、lombok" class="sidebar-link">9、Lombok</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/ks_java/Mybatis/Mybatis.html#_10、多对一处理" class="sidebar-link">10、多对一处理</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/ks_java/Mybatis/Mybatis.html#测试环境搭建" class="sidebar-link">测试环境搭建</a></li><li class="sidebar-sub-header"><a href="/ks_java/Mybatis/Mybatis.html#按照查询嵌套处理" class="sidebar-link">按照查询嵌套处理</a></li><li class="sidebar-sub-header"><a href="/ks_java/Mybatis/Mybatis.html#按照结果嵌套处理" class="sidebar-link">按照结果嵌套处理</a></li></ul></li><li><a href="/ks_java/Mybatis/Mybatis.html#_11、一对多处理" class="sidebar-link">11、一对多处理</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/ks_java/Mybatis/Mybatis.html#环境搭建" class="sidebar-link">环境搭建</a></li><li class="sidebar-sub-header"><a href="/ks_java/Mybatis/Mybatis.html#按照结果嵌套处理-2" class="sidebar-link">按照结果嵌套处理</a></li><li class="sidebar-sub-header"><a href="/ks_java/Mybatis/Mybatis.html#按照查询嵌套处理-2" class="sidebar-link">按照查询嵌套处理</a></li><li class="sidebar-sub-header"><a href="/ks_java/Mybatis/Mybatis.html#小结" class="sidebar-link">小结</a></li></ul></li><li><a href="/ks_java/Mybatis/Mybatis.html#_12、动态-sql" class="sidebar-link">12、动态 SQL</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/ks_java/Mybatis/Mybatis.html#搭建环境" class="sidebar-link">搭建环境</a></li><li class="sidebar-sub-header"><a href="/ks_java/Mybatis/Mybatis.html#if" class="sidebar-link">IF</a></li><li class="sidebar-sub-header"><a href="/ks_java/Mybatis/Mybatis.html#choose-when-otherwise" class="sidebar-link">choose (when, otherwise)</a></li><li class="sidebar-sub-header"><a href="/ks_java/Mybatis/Mybatis.html#trim-where-set" class="sidebar-link">trim (where,set)</a></li><li class="sidebar-sub-header"><a href="/ks_java/Mybatis/Mybatis.html#sql片段" class="sidebar-link">SQL片段</a></li><li class="sidebar-sub-header"><a href="/ks_java/Mybatis/Mybatis.html#foreach" class="sidebar-link">Foreach</a></li></ul></li><li><a href="/ks_java/Mybatis/Mybatis.html#_13、缓存-了解" class="sidebar-link">13、缓存 （了解）</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/ks_java/Mybatis/Mybatis.html#_13-1、简介" class="sidebar-link">13.1、简介</a></li><li class="sidebar-sub-header"><a href="/ks_java/Mybatis/Mybatis.html#_13-2、mybatis缓存" class="sidebar-link">13.2、Mybatis缓存</a></li><li class="sidebar-sub-header"><a href="/ks_java/Mybatis/Mybatis.html#_13-3、一级缓存" class="sidebar-link">13.3、一级缓存</a></li><li class="sidebar-sub-header"><a href="/ks_java/Mybatis/Mybatis.html#_13-4、二级缓存" class="sidebar-link">13.4、二级缓存</a></li><li class="sidebar-sub-header"><a href="/ks_java/Mybatis/Mybatis.html#_13-5、缓存原理" class="sidebar-link">13.5、缓存原理</a></li><li class="sidebar-sub-header"><a href="/ks_java/Mybatis/Mybatis.html#_13-6、自定义缓存-ehcache" class="sidebar-link">13.6、自定义缓存-ehcache</a></li></ul></li><li><a href="/ks_java/Mybatis/Mybatis.html#练习-29道练习题实战" class="sidebar-link">练习：29道练习题实战！</a><ul class="sidebar-sub-headers"></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h2 id="mybatis-9-28"><a href="#mybatis-9-28" class="header-anchor">#</a> Mybatis-9.28</h2> <p>环境：</p> <ul><li>JDK1.8</li> <li>Mysql 5.7</li> <li>maven 3.6.1</li> <li>IDEA</li></ul> <p>回顾：</p> <ul><li>JDBC</li> <li>Mysql</li> <li>Java基础</li> <li>Maven</li> <li>Junit</li></ul> <p>SSM框架：配置文件的。  最好的方式：看官网文档；</p> <h2 id="_1、简介"><a href="#_1、简介" class="header-anchor">#</a> 1、简介</h2> <h3 id="_1-1、什么是mybatis"><a href="#_1-1、什么是mybatis" class="header-anchor">#</a> 1.1、什么是Mybatis</h3> <p><img src="/assets/img/1569633932712.6fb0b9de.png" alt="1569633932712"></p> <ul><li>MyBatis 是一款优秀的<strong>持久层框架</strong></li> <li>它支持定制化 SQL、存储过程以及高级映射。</li> <li>MyBatis 避免了几乎所有的 JDBC 代码和手动设置参数以及获取结果集。</li> <li>MyBatis 可以使用简单的 XML 或注解来配置和映射原生类型、接口和 Java 的 POJO（Plain Old Java Objects，普通老式 Java 对象）为数据库中的记录。</li> <li>MyBatis 本是<a href="https://baike.baidu.com/item/apache/6265" target="_blank" rel="noopener noreferrer">apache<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>的一个开源项目<a href="https://baike.baidu.com/item/iBatis" target="_blank" rel="noopener noreferrer">iBatis<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>, 2010年这个项目由apache software foundation 迁移到了google code，并且改名为MyBatis 。</li> <li>2013年11月迁移到Github。</li></ul> <p>如何获得Mybatis？</p> <ul><li><p>maven仓库：</p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token comment">&lt;!-- https://mvnrepository.com/artifact/org.mybatis/mybatis --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.mybatis<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>mybatis<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>3.5.2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre></div></li> <li><p>Github ： https://github.com/mybatis/mybatis-3/releases</p></li> <li><p>中文文档：https://mybatis.org/mybatis-3/zh/index.html</p></li></ul> <h3 id="_1-2、持久化"><a href="#_1-2、持久化" class="header-anchor">#</a> 1.2、持久化</h3> <p>数据持久化</p> <ul><li>持久化就是将程序的数据在持久状态和瞬时状态转化的过程</li> <li>内存：<strong>断电即失</strong></li> <li>数据库(Jdbc)，io文件持久化。</li> <li>生活：冷藏. 罐头。</li></ul> <p><strong>为什么需要需要持久化？</strong></p> <ul><li><p>有一些对象，不能让他丢掉。</p></li> <li><p>内存太贵了</p></li></ul> <h3 id="_1-3、持久层"><a href="#_1-3、持久层" class="header-anchor">#</a> 1.3、持久层</h3> <p>Dao层，Service层，Controller层….</p> <ul><li>完成持久化工作的代码块</li> <li>层界限十分明显。</li></ul> <h3 id="_1-4-为什么需要mybatis"><a href="#_1-4-为什么需要mybatis" class="header-anchor">#</a> 1.4 为什么需要Mybatis？</h3> <ul><li>帮助程序猿将数据存入到数据库中。</li> <li>方便</li> <li>传统的JDBC代码太复杂了。简化。框架。自动化。</li> <li>不用Mybatis也可以。更容易上手。 <strong>技术没有高低之分</strong></li> <li>优点：
<ul><li>简单易学</li> <li>灵活</li> <li>sql和代码的分离，提高了可维护性。</li> <li>提供映射标签，支持对象与数据库的orm字段关系映射</li> <li>提供对象关系映射标签，支持对象关系组建维护</li> <li>提供xml标签，支持编写动态sql。</li></ul></li></ul> <p><strong>最重要的一点：使用的人多！</strong></p> <p>Spring   SpringMVC    SpringBoot</p> <h2 id="_2、第一个mybatis程序"><a href="#_2、第一个mybatis程序" class="header-anchor">#</a> 2、第一个Mybatis程序</h2> <p>思路：搭建环境--&gt;导入Mybatis--&gt;编写代码--&gt;测试！</p> <h3 id="_2-1、搭建环境"><a href="#_2-1、搭建环境" class="header-anchor">#</a> 2.1、搭建环境</h3> <p>搭建数据库</p> <div class="language-java extra-class"><pre class="language-java"><code>CREATE DATABASE `mybatis`<span class="token punctuation">;</span>

USE `mybatis`<span class="token punctuation">;</span>

CREATE TABLE `user`<span class="token punctuation">(</span>
  `id` <span class="token function">INT</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span> NOT NULL <span class="token class-name">PRIMARY</span> KEY<span class="token punctuation">,</span>
  `name` <span class="token function">VARCHAR</span><span class="token punctuation">(</span><span class="token number">30</span><span class="token punctuation">)</span> <span class="token class-name">DEFAULT</span> NULL<span class="token punctuation">,</span>
  `pwd` <span class="token function">VARCHAR</span><span class="token punctuation">(</span><span class="token number">30</span><span class="token punctuation">)</span> <span class="token class-name">DEFAULT</span> NULL
<span class="token punctuation">)</span>ENGINE<span class="token operator">=</span>INNODB <span class="token class-name">DEFAULT</span> CHARSET<span class="token operator">=</span>utf8<span class="token punctuation">;</span>

INSERT INTO `user`<span class="token punctuation">(</span>`id`<span class="token punctuation">,</span>`name`<span class="token punctuation">,</span>`pwd`<span class="token punctuation">)</span> VALUES 
<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token string">'狂神'</span><span class="token punctuation">,</span><span class="token string">'123456'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token string">'张三'</span><span class="token punctuation">,</span><span class="token string">'123456'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token string">'李四'</span><span class="token punctuation">,</span><span class="token string">'123890'</span><span class="token punctuation">)</span>
</code></pre></div><p>新建项目</p> <ol><li><p>新建一个普通的maven项目</p></li> <li><p>删除src目录</p></li> <li><p>导入maven依赖</p> <div class="language-xml extra-class"><pre class="language-xml"><code>
    <span class="token comment">&lt;!--导入依赖--&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependencies</span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!--mysql驱动--&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>mysql<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>mysql-connector-java<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>5.1.47<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!--mybatis--&gt;</span>
        <span class="token comment">&lt;!-- https://mvnrepository.com/artifact/org.mybatis/mybatis --&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.mybatis<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>mybatis<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>3.5.2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!--junit--&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>junit<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>junit<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>4.12<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependencies</span><span class="token punctuation">&gt;</span></span>
</code></pre></div></li></ol> <h3 id="_2-2、创建一个模块"><a href="#_2-2、创建一个模块" class="header-anchor">#</a> 2.2、创建一个模块</h3> <ul><li><p>编写mybatis的核心配置文件</p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token prolog">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;</span>
<span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">configuration</span>
        <span class="token name">PUBLIC</span> <span class="token string">&quot;-//mybatis.org//DTD Config 3.0//EN&quot;</span>
        <span class="token string">&quot;http://mybatis.org/dtd/mybatis-3-config.dtd&quot;</span><span class="token punctuation">&gt;</span></span>
<span class="token comment">&lt;!--configuration核心配置文件--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>configuration</span><span class="token punctuation">&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>environments</span> <span class="token attr-name">default</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>development<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>environment</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>development<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>transactionManager</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>JDBC<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dataSource</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>POOLED<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>driver<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.mysql.jdbc.Driver<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>url<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>jdbc:mysql://localhost:3306/mybatis?useSSL=true<span class="token entity named-entity" title="&amp;">&amp;amp;</span>useUnicode=true<span class="token entity named-entity" title="&amp;">&amp;amp;</span>characterEncoding=UTF-8<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>username<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>root<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>password<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>123456<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dataSource</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>environment</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>environments</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>configuration</span><span class="token punctuation">&gt;</span></span>
</code></pre></div></li> <li><p>编写mybatis工具类</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">//sqlSessionFactory --&gt; sqlSession</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MybatisUtils</span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">SqlSessionFactory</span> sqlSessionFactory<span class="token punctuation">;</span>

    <span class="token keyword">static</span><span class="token punctuation">{</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token comment">//使用Mybatis第一步：获取sqlSessionFactory对象</span>
            <span class="token class-name">String</span> resource <span class="token operator">=</span> <span class="token string">&quot;mybatis-config.xml&quot;</span><span class="token punctuation">;</span>
            <span class="token class-name">InputStream</span> inputStream <span class="token operator">=</span> <span class="token class-name">Resources</span><span class="token punctuation">.</span><span class="token function">getResourceAsStream</span><span class="token punctuation">(</span>resource<span class="token punctuation">)</span><span class="token punctuation">;</span>
            sqlSessionFactory <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SqlSessionFactoryBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span>inputStream<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IOException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

    <span class="token punctuation">}</span>

    <span class="token comment">//既然有了 SqlSessionFactory，顾名思义，我们就可以从中获得 SqlSession 的实例了。</span>
    <span class="token comment">// SqlSession 完全包含了面向数据库执行 SQL 命令所需的所有方法。</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">SqlSession</span>  <span class="token function">getSqlSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">return</span> sqlSessionFactory<span class="token punctuation">.</span><span class="token function">openSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>

</code></pre></div></li></ul> <h3 id="_2-3、编写代码"><a href="#_2-3、编写代码" class="header-anchor">#</a> 2.3、编写代码</h3> <ul><li><p>实体类</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>kuang<span class="token punctuation">.</span>pojo</span><span class="token punctuation">;</span>

<span class="token comment">//实体类</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">User</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token keyword">int</span> id<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> pwd<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">User</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">User</span><span class="token punctuation">(</span><span class="token keyword">int</span> id<span class="token punctuation">,</span> <span class="token class-name">String</span> name<span class="token punctuation">,</span> <span class="token class-name">String</span> pwd<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>id <span class="token operator">=</span> id<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>pwd <span class="token operator">=</span> pwd<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> id<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setId</span><span class="token punctuation">(</span><span class="token keyword">int</span> id<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>id <span class="token operator">=</span> id<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> name<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setName</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getPwd</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> pwd<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setPwd</span><span class="token punctuation">(</span><span class="token class-name">String</span> pwd<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>pwd <span class="token operator">=</span> pwd<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token string">&quot;User{&quot;</span> <span class="token operator">+</span>
                <span class="token string">&quot;id=&quot;</span> <span class="token operator">+</span> id <span class="token operator">+</span>
                <span class="token string">&quot;, name='&quot;</span> <span class="token operator">+</span> name <span class="token operator">+</span> <span class="token string">'\''</span> <span class="token operator">+</span>
                <span class="token string">&quot;, pwd='&quot;</span> <span class="token operator">+</span> pwd <span class="token operator">+</span> <span class="token string">'\''</span> <span class="token operator">+</span>
                <span class="token string">'}'</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre></div></li> <li><p>Dao接口</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">UserDao</span> <span class="token punctuation">{</span>
    <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">User</span><span class="token punctuation">&gt;</span></span> <span class="token function">getUserList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div></li> <li><p>接口实现类由原来的UserDaoImpl转变为一个 Mapper配置文件.</p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token prolog">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;</span>
        <span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">mapper</span>
                <span class="token name">PUBLIC</span> <span class="token string">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span>
                <span class="token string">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!--namespace=绑定一个对应的Dao/Mapper接口--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mapper</span> <span class="token attr-name">namespace</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.kuang.dao.UserDao<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>

<span class="token comment">&lt;!--select查询语句--&gt;</span>
   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>getUserList<span class="token punctuation">&quot;</span></span> <span class="token attr-name">resultType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.kuang.pojo.User<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
       select * from mybatis.user
   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>mapper</span><span class="token punctuation">&gt;</span></span>
</code></pre></div></li></ul> <h3 id="_2-4、测试"><a href="#_2-4、测试" class="header-anchor">#</a> 2.4、测试</h3> <p>注意点：</p> <p>org.apache.ibatis.binding.BindingException: Type interface com.kuang.dao.UserDao is not known to the MapperRegistry.</p> <p><strong>MapperRegistry是什么？</strong></p> <p>核心配置文件中注册 mappers</p> <ul><li><p>junit测试</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">test</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token comment">//第一步：获得SqlSession对象</span>
    <span class="token class-name">SqlSession</span> sqlSession <span class="token operator">=</span> <span class="token class-name">MybatisUtils</span><span class="token punctuation">.</span><span class="token function">getSqlSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>


    <span class="token comment">//方式一：getMapper</span>
    <span class="token class-name">UserDao</span> userDao <span class="token operator">=</span> sqlSession<span class="token punctuation">.</span><span class="token function">getMapper</span><span class="token punctuation">(</span><span class="token class-name">UserDao</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">User</span><span class="token punctuation">&gt;</span></span> userList <span class="token operator">=</span> userDao<span class="token punctuation">.</span><span class="token function">getUserList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">User</span> user <span class="token operator">:</span> userList<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>



    <span class="token comment">//关闭SqlSession</span>
    sqlSession<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</code></pre></div></li></ul> <p>你们可以能会遇到的问题：</p> <ol><li>配置文件没有注册</li> <li>绑定接口错误。</li> <li>方法名不对</li> <li>返回类型不对</li> <li>Maven导出资源问题</li></ol> <h2 id="_3、crud"><a href="#_3、crud" class="header-anchor">#</a> 3、CRUD</h2> <h3 id="_1、namespace"><a href="#_1、namespace" class="header-anchor">#</a> 1、namespace</h3> <p>namespace中的包名要和 Dao/mapper 接口的包名一致！</p> <h3 id="_2、select"><a href="#_2、select" class="header-anchor">#</a> 2、select</h3> <p>选择，查询语句;</p> <ul><li>id : 就是对应的namespace中的方法名；</li> <li>resultType：Sql语句执行的返回值！</li> <li>parameterType ： 参数类型！</li></ul> <ol><li><p>编写接口</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">//根据ID查询用户</span>
<span class="token class-name">User</span> <span class="token function">getUserById</span><span class="token punctuation">(</span><span class="token keyword">int</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></li> <li><p>编写对应的mapper中的sql语句</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token operator">&lt;</span>select id<span class="token operator">=</span><span class="token string">&quot;getUserById&quot;</span> parameterType<span class="token operator">=</span><span class="token string">&quot;int&quot;</span> resultType<span class="token operator">=</span><span class="token string">&quot;com.kuang.pojo.User&quot;</span><span class="token operator">&gt;</span>
        select <span class="token operator">*</span> from mybatis<span class="token punctuation">.</span>user where id <span class="token operator">=</span> #<span class="token punctuation">{</span>id<span class="token punctuation">}</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>select<span class="token operator">&gt;</span>

</code></pre></div></li> <li><p>测试</p> <div class="language-java extra-class"><pre class="language-java"><code>    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">getUserById</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">SqlSession</span> sqlSession <span class="token operator">=</span> <span class="token class-name">MybatisUtils</span><span class="token punctuation">.</span><span class="token function">getSqlSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">UserMapper</span> mapper <span class="token operator">=</span> sqlSession<span class="token punctuation">.</span><span class="token function">getMapper</span><span class="token punctuation">(</span><span class="token class-name">UserMapper</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">User</span> user <span class="token operator">=</span> mapper<span class="token punctuation">.</span><span class="token function">getUserById</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">;</span>

        sqlSession<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

</code></pre></div></li></ol> <h3 id="_3、insert"><a href="#_3、insert" class="header-anchor">#</a> 3、Insert</h3> <div class="language-xml extra-class"><pre class="language-xml"><code>    <span class="token comment">&lt;!--对象中的属性，可以直接取出来--&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>insert</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>addUser<span class="token punctuation">&quot;</span></span> <span class="token attr-name">parameterType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.kuang.pojo.User<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        insert into mybatis.user (id, name, pwd) values (#{id},#{name},#{pwd});
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>insert</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h3 id="_4、update"><a href="#_4、update" class="header-anchor">#</a> 4、update</h3> <div class="language-xml extra-class"><pre class="language-xml"><code>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>update</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>updateUser<span class="token punctuation">&quot;</span></span> <span class="token attr-name">parameterType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.kuang.pojo.User<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        update mybatis.user set name=#{name},pwd=#{pwd}  where id = #{id} ;
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>update</span><span class="token punctuation">&gt;</span></span>

</code></pre></div><h3 id="_5、delete"><a href="#_5、delete" class="header-anchor">#</a> 5、Delete</h3> <div class="language-xml extra-class"><pre class="language-xml"><code>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>delete</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>deleteUser<span class="token punctuation">&quot;</span></span> <span class="token attr-name">parameterType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>int<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        delete from mybatis.user where id = #{id};
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>delete</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>注意点：</p> <ul><li>增删改需要提交事务！</li></ul> <h3 id="_6、分析错误"><a href="#_6、分析错误" class="header-anchor">#</a> 6、分析错误</h3> <ul><li>标签不要匹配错</li> <li>resource 绑定mapper，需要使用路径！</li> <li>程序配置文件必须符合规范！</li> <li>NullPointerException，没有注册到资源!</li> <li>输出的xml文件中存在中文乱码问题！</li> <li>maven资源没有导出问题！</li></ul> <h3 id="_7、万能map"><a href="#_7、万能map" class="header-anchor">#</a> 7、万能Map</h3> <p>假设，我们的实体类，或者数据库中的表，字段或者参数过多，我们应当考虑使用Map！</p> <div class="language-java extra-class"><pre class="language-java"><code>    <span class="token comment">//万能的Map</span>
    <span class="token keyword">int</span> <span class="token function">addUser2</span><span class="token punctuation">(</span><span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span><span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> map<span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre></div><div class="language-xml extra-class"><pre class="language-xml"><code>
    <span class="token comment">&lt;!--对象中的属性，可以直接取出来    传递map的key--&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>insert</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>addUser<span class="token punctuation">&quot;</span></span> <span class="token attr-name">parameterType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>map<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        insert into mybatis.user (id, pwd) values (#{userid},#{passWord});
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>insert</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><div class="language-xml extra-class"><pre class="language-xml"><code>    @Test
    public void addUser2(){
        SqlSession sqlSession = MybatisUtils.getSqlSession();

        UserMapper mapper = sqlSession.getMapper(UserMapper.class);


        Map<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>String,</span> <span class="token attr-name">Object</span><span class="token punctuation">&gt;</span></span> map = new HashMap<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>String,</span> <span class="token attr-name">Object</span><span class="token punctuation">&gt;</span></span>();

        map.put(&quot;userid&quot;,5);
        map.put(&quot;passWord&quot;,&quot;2222333&quot;);

        mapper.addUser2(map);

        sqlSession.close();
    }

</code></pre></div><p>Map传递参数，直接在sql中取出key即可！    【parameterType=&quot;map&quot;】</p> <p>对象传递参数，直接在sql中取对象的属性即可！【parameterType=&quot;Object&quot;】</p> <p>只有一个基本类型参数的情况下，可以直接在sql中取到！</p> <p>多个参数用Map，<strong>或者注解！</strong></p> <h3 id="_8、思考题"><a href="#_8、思考题" class="header-anchor">#</a> 8、思考题</h3> <p>模糊查询怎么写？</p> <ol><li><p>Java代码执行的时候，传递通配符 % %</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">User</span><span class="token punctuation">&gt;</span></span> userList <span class="token operator">=</span> mapper<span class="token punctuation">.</span><span class="token function">getUserLike</span><span class="token punctuation">(</span><span class="token string">&quot;%李%&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></li> <li><p>在sql拼接中使用通配符！</p> <div class="language-java extra-class"><pre class="language-java"><code>select <span class="token operator">*</span> from mybatis<span class="token punctuation">.</span>user where name like <span class="token string">&quot;%&quot;</span>#<span class="token punctuation">{</span>value<span class="token punctuation">}</span><span class="token string">&quot;%&quot;</span>
</code></pre></div></li></ol> <h2 id="_4、配置解析"><a href="#_4、配置解析" class="header-anchor">#</a> 4、配置解析</h2> <h3 id="_1、核心配置文件"><a href="#_1、核心配置文件" class="header-anchor">#</a> 1、核心配置文件</h3> <ul><li><p>mybatis-config.xml</p></li> <li><p>MyBatis 的配置文件包含了会深深影响 MyBatis 行为的设置和属性信息。</p> <div class="language-xml extra-class"><pre class="language-xml"><code>configuration（配置）
properties（属性）
settings（设置）
typeAliases（类型别名）
typeHandlers（类型处理器）
objectFactory（对象工厂）
plugins（插件）
environments（环境配置）
environment（环境变量）
transactionManager（事务管理器）
dataSource（数据源）
databaseIdProvider（数据库厂商标识）
mappers（映射器）
</code></pre></div></li></ul> <h3 id="_2、环境配置-environments"><a href="#_2、环境配置-environments" class="header-anchor">#</a> 2、环境配置（environments）</h3> <p>MyBatis 可以配置成适应多种环境</p> <p><strong>不过要记住：尽管可以配置多个环境，但每个 SqlSessionFactory 实例只能选择一种环境。</strong></p> <p>学会使用配置多套运行环境！</p> <p>Mybatis默认的事务管理器就是 JDBC  ， 连接池 ： POOLED</p> <h3 id="_3、属性-properties"><a href="#_3、属性-properties" class="header-anchor">#</a> 3、属性（properties）</h3> <p>我们可以通过properties属性来实现引用配置文件</p> <p>这些属性都是可外部配置且可动态替换的，既可以在典型的 Java 属性文件中配置，亦可通过 properties 元素的子元素来传递。【db.properties】</p> <p><img src="/assets/img/1569656528134.553a7be9.png" alt="1569656528134"></p> <p>编写一个配置文件</p> <p>db.properties</p> <div class="language-properties extra-class"><pre class="language-properties"><code><span class="token attr-name">driver</span><span class="token punctuation">=</span><span class="token attr-value">com.mysql.jdbc.Driver</span>
<span class="token attr-name">url</span><span class="token punctuation">=</span><span class="token attr-value">jdbc:mysql://localhost:3306/mybatis?useSSL=true&amp;useUnicode=true&amp;characterEncoding=UTF-8</span>
<span class="token attr-name">username</span><span class="token punctuation">=</span><span class="token attr-value">root</span>
<span class="token attr-name">password</span><span class="token punctuation">=</span><span class="token attr-value">123456</span>
</code></pre></div><p>在核心配置文件中映入</p> <div class="language-xml extra-class"><pre class="language-xml"><code>    <span class="token comment">&lt;!--引入外部配置文件--&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>properties</span> <span class="token attr-name">resource</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>db.properties<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>username<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>root<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>pwd<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>11111<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>properties</span><span class="token punctuation">&gt;</span></span>

</code></pre></div><ul><li>可以直接引入外部文件</li> <li>可以在其中增加一些属性配置</li> <li>如果两个文件有同一个字段，优先使用外部配置文件的！</li></ul> <h3 id="_4、类型别名-typealiases"><a href="#_4、类型别名-typealiases" class="header-anchor">#</a> 4、类型别名（typeAliases）</h3> <ul><li>类型别名是为 Java 类型设置一个短的名字。‘</li> <li>存在的意义仅在于用来减少类完全限定名的冗余。</li></ul> <div class="language-xml extra-class"><pre class="language-xml"><code>    <span class="token comment">&lt;!--可以给实体类起别名--&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>typeAliases</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>typeAlias</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.kuang.pojo.User<span class="token punctuation">&quot;</span></span> <span class="token attr-name">alias</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>User<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>typeAliases</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>也可以指定一个包名，MyBatis 会在包名下面搜索需要的 Java Bean，比如：</p> <p>扫描实体类的包，它的默认别名就为这个类的 类名，首字母小写！</p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token comment">&lt;!--可以给实体类起别名--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>typeAliases</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>package</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.kuang.pojo<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>typeAliases</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>在实体类比较少的时候，使用第一种方式。</p> <p>如果实体类十分多，建议使用第二种。</p> <p>第一种可以DIY别名，第二种则·不行·，如果非要改，需要在实体上增加注解</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@Alias</span><span class="token punctuation">(</span><span class="token string">&quot;user&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">User</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
</code></pre></div><h3 id="_5、设置"><a href="#_5、设置" class="header-anchor">#</a> 5、设置</h3> <p>这是 MyBatis 中极为重要的调整设置，它们会改变 MyBatis 的运行时行为。</p> <p><img src="/assets/img/1569657659080.85ceb64b.png" alt="1569657659080"></p> <p><img src="/assets/img/1569657672791.040c9d95.png" alt="1569657672791"></p> <h3 id="_6、其他配置"><a href="#_6、其他配置" class="header-anchor">#</a> 6、其他配置</h3> <ul><li><a href="https://mybatis.org/mybatis-3/zh/configuration.html#typeHandlers" target="_blank" rel="noopener noreferrer">typeHandlers（类型处理器）<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://mybatis.org/mybatis-3/zh/configuration.html#objectFactory" target="_blank" rel="noopener noreferrer">objectFactory（对象工厂）<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li>plugins插件
<ul><li>mybatis-generator-core</li> <li>mybatis-plus</li> <li>通用mapper</li></ul></li></ul> <h3 id="_7、映射器-mappers"><a href="#_7、映射器-mappers" class="header-anchor">#</a> 7、映射器（mappers）</h3> <p>MapperRegistry：注册绑定我们的Mapper文件；</p> <p>方式一： 【推荐使用】</p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token comment">&lt;!--每一个Mapper.XML都需要在Mybatis核心配置文件中注册！--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mappers</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mapper</span> <span class="token attr-name">resource</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com/kuang/dao/UserMapper.xml<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>mappers</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>方式二：使用class文件绑定注册</p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token comment">&lt;!--每一个Mapper.XML都需要在Mybatis核心配置文件中注册！--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mappers</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mapper</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.kuang.dao.UserMapper<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>mappers</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>注意点：</p> <ul><li>接口和他的Mapper配置文件必须同名！</li> <li>接口和他的Mapper配置文件必须在同一个包下！</li></ul> <p>方式三：使用扫描包进行注入绑定</p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token comment">&lt;!--每一个Mapper.XML都需要在Mybatis核心配置文件中注册！--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mappers</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>package</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.kuang.dao<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>mappers</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>注意点：</p> <ul><li>接口和他的Mapper配置文件必须同名！</li> <li>接口和他的Mapper配置文件必须在同一个包下！</li></ul> <p>练习时间：</p> <ul><li>将数据库配置文件外部引入</li> <li>实体类别名</li> <li>保证UserMapper 接口 和 UserMapper .xml 改为一致！并且放在同一个包下！</li></ul> <h3 id="_8、生命周期和作用域"><a href="#_8、生命周期和作用域" class="header-anchor">#</a> 8、生命周期和作用域</h3> <p><img src="/assets/img/1569660357745.0c1ac5ef.png" alt="1569660357745"></p> <p>生命周期，和作用域，是至关重要的，因为错误的使用会导致非常严重的<strong>并发问题</strong>。</p> <p><strong>SqlSessionFactoryBuilder：</strong></p> <ul><li>一旦创建了 SqlSessionFactory，就不再需要它了</li> <li>局部变量</li></ul> <p><strong>SqlSessionFactory：</strong></p> <ul><li>说白了就是可以想象为 ：数据库连接池</li> <li>SqlSessionFactory 一旦被创建就应该在应用的运行期间一直存在，<strong>没有任何理由丢弃它或重新创建另一个实例。</strong></li> <li>因此 SqlSessionFactory 的最佳作用域是应用作用域。</li> <li>最简单的就是使用<strong>单例模式</strong>或者静态单例模式。</li></ul> <p><strong>SqlSession</strong></p> <ul><li>连接到连接池的一个请求！</li> <li>SqlSession 的实例不是线程安全的，因此是不能被共享的，所以它的最佳的作用域是请求或方法作用域。</li> <li>用完之后需要赶紧关闭，否则资源被占用！</li></ul> <p><img src="/assets/img/1569660737088.5f131fdd.png" alt="1569660737088"></p> <p>这里面的每一个Mapper，就代表一个具体的业务！</p> <h2 id="_5、解决属性名和字段名不一致的问题"><a href="#_5、解决属性名和字段名不一致的问题" class="header-anchor">#</a> 5、解决属性名和字段名不一致的问题</h2> <h3 id="_1、-问题"><a href="#_1、-问题" class="header-anchor">#</a> 1、 问题</h3> <p>数据库中的字段</p> <p><img src="data:image/png;base64,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" alt="1569660831076"></p> <p>新建一个项目，拷贝之前的，测试实体类字段不一致的情况</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">User</span> <span class="token punctuation">{</span>
    
    <span class="token keyword">private</span> <span class="token keyword">int</span> id<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> password<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>测试出现问题</p> <p><img src="/assets/img/1569661145806.4c682351.png" alt="1569661145806"></p> <div class="language-xml extra-class"><pre class="language-xml"><code>//    select * from mybatis.user where id = #{id}
//类型处理器
//    select id,name,pwd from mybatis.user where id = #{id}
</code></pre></div><p>解决方法：</p> <ul><li><p>起别名</p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>getUserById<span class="token punctuation">&quot;</span></span> <span class="token attr-name">resultType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.kuang.pojo.User<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    select id,name,pwd as password from mybatis.user where id = #{id}
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">&gt;</span></span>
</code></pre></div></li></ul> <h3 id="_2、resultmap"><a href="#_2、resultmap" class="header-anchor">#</a> 2、resultMap</h3> <p>结果集映射</p> <div class="language- extra-class"><pre class="language-text"><code>id   name   pwd
id   name   password
</code></pre></div><div class="language-xml extra-class"><pre class="language-xml"><code><span class="token comment">&lt;!--结果集映射--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>resultMap</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>UserMap<span class="token punctuation">&quot;</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>User<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!--column数据库中的字段，property实体类中的属性--&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>id<span class="token punctuation">&quot;</span></span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>id<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>name<span class="token punctuation">&quot;</span></span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>name<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>pwd<span class="token punctuation">&quot;</span></span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>password<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>resultMap</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>getUserById<span class="token punctuation">&quot;</span></span> <span class="token attr-name">resultMap</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>UserMap<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    select * from mybatis.user where id = #{id}
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><ul><li><code>resultMap</code> 元素是 MyBatis 中最重要最强大的元素</li> <li>ResultMap 的设计思想是，对于简单的语句根本不需要配置显式的结果映射，而对于复杂一点的语句只需要描述它们的关系就行了。</li> <li><code>ResultMap</code> 最优秀的地方在于，虽然你已经对它相当了解了，但是根本就不需要显式地用到他们。</li> <li>如果世界总是这么简单就好了。</li></ul> <h2 id="_6、日志"><a href="#_6、日志" class="header-anchor">#</a> 6、日志</h2> <h3 id="_6-1、日志工厂"><a href="#_6-1、日志工厂" class="header-anchor">#</a> 6.1、日志工厂</h3> <p>如果一个数据库操作，出现了异常，我们需要排错。日志就是最好的助手！</p> <p>曾经：sout 、debug</p> <p>现在：日志工厂！</p> <p><img src="/assets/img/1569892155104.16de2148.png" alt="1569892155104"></p> <ul><li><p>SLF4J</p></li> <li><p>LOG4J  【掌握】</p></li> <li><p>LOG4J2</p></li> <li><p>JDK_LOGGING</p></li> <li><p>COMMONS_LOGGING</p></li> <li><p>STDOUT_LOGGING   【掌握】</p></li> <li><p>NO_LOGGING</p></li></ul> <p>在Mybatis中具体使用那个一日志实现，在设置中设定！</p> <p><strong>STDOUT_LOGGING标准日志输出</strong></p> <p>在mybatis核心配置文件中，配置我们的日志！</p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>settings</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>setting</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>logImpl<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>STDOUT_LOGGING<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>settings</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p><img src="/assets/img/1569892595060.56149e41.png" alt="1569892595060"></p> <h3 id="_6-2、log4j"><a href="#_6-2、log4j" class="header-anchor">#</a> 6.2、Log4j</h3> <p>什么是Log4j？</p> <ul><li>Log4j是<a href="https://baike.baidu.com/item/Apache/8512995" target="_blank" rel="noopener noreferrer">Apache<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>的一个开源项目，通过使用Log4j，我们可以控制日志信息输送的目的地是<a href="https://baike.baidu.com/item/%E6%8E%A7%E5%88%B6%E5%8F%B0/2438626" target="_blank" rel="noopener noreferrer">控制台<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>、文件、<a href="https://baike.baidu.com/item/GUI" target="_blank" rel="noopener noreferrer">GUI<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>组件</li> <li>我们也可以控制每一条日志的输出格式；</li> <li>通过定义每一条日志信息的级别，我们能够更加细致地控制日志的生成过程。</li> <li>通过一个<a href="https://baike.baidu.com/item/%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6/286550" target="_blank" rel="noopener noreferrer">配置文件<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>来灵活地进行配置，而不需要修改应用的代码。</li></ul> <ol><li><p>先导入log4j的包</p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token comment">&lt;!-- https://mvnrepository.com/artifact/log4j/log4j --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>log4j<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>log4j<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>1.2.17<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre></div></li> <li><p>log4j.properties</p> <div class="language-properties extra-class"><pre class="language-properties"><code><span class="token comment">#将等级为DEBUG的日志信息输出到console和file这两个目的地，console和file的定义在下面的代码</span>
<span class="token attr-name">log4j.rootLogger</span><span class="token punctuation">=</span><span class="token attr-value">DEBUG,console,file</span>

<span class="token comment">#控制台输出的相关设置</span>
<span class="token attr-name">log4j.appender.console</span> <span class="token punctuation">=</span> <span class="token attr-value">org.apache.log4j.ConsoleAppender</span>
<span class="token attr-name">log4j.appender.console.Target</span> <span class="token punctuation">=</span> <span class="token attr-value">System.out</span>
<span class="token attr-name">log4j.appender.console.Threshold</span><span class="token punctuation">=</span><span class="token attr-value">DEBUG</span>
<span class="token attr-name">log4j.appender.console.layout</span> <span class="token punctuation">=</span> <span class="token attr-value">org.apache.log4j.PatternLayout</span>
<span class="token attr-name">log4j.appender.console.layout.ConversionPattern</span><span class="token punctuation">=</span><span class="token attr-value">[%c]-%m%n</span>

<span class="token comment">#文件输出的相关设置</span>
<span class="token attr-name">log4j.appender.file</span> <span class="token punctuation">=</span> <span class="token attr-value">org.apache.log4j.RollingFileAppender</span>
<span class="token attr-name">log4j.appender.file.File</span><span class="token punctuation">=</span><span class="token attr-value">./log/kuang.log</span>
<span class="token attr-name">log4j.appender.file.MaxFileSize</span><span class="token punctuation">=</span><span class="token attr-value">10mb</span>
<span class="token attr-name">log4j.appender.file.Threshold</span><span class="token punctuation">=</span><span class="token attr-value">DEBUG</span>
<span class="token attr-name">log4j.appender.file.layout</span><span class="token punctuation">=</span><span class="token attr-value">org.apache.log4j.PatternLayout</span>
<span class="token attr-name">log4j.appender.file.layout.ConversionPattern</span><span class="token punctuation">=</span><span class="token attr-value">[%p][%d{yy-MM-dd}][%c]%m%n</span>

<span class="token comment">#日志输出级别</span>
<span class="token attr-name">log4j.logger.org.mybatis</span><span class="token punctuation">=</span><span class="token attr-value">DEBUG</span>
<span class="token attr-name">log4j.logger.java.sql</span><span class="token punctuation">=</span><span class="token attr-value">DEBUG</span>
<span class="token attr-name">log4j.logger.java.sql.Statement</span><span class="token punctuation">=</span><span class="token attr-value">DEBUG</span>
<span class="token attr-name">log4j.logger.java.sql.ResultSet</span><span class="token punctuation">=</span><span class="token attr-value">DEBUG</span>
<span class="token attr-name">log4j.logger.java.sql.PreparedStatement</span><span class="token punctuation">=</span><span class="token attr-value">DEBUG</span>
</code></pre></div></li> <li><p>配置log4j为日志的实现</p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>settings</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>setting</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>logImpl<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>settings</span><span class="token punctuation">&gt;</span></span>
</code></pre></div></li> <li><p>Log4j的使用！，直接测试运行刚才的查询</p> <p><img src="/assets/img/1569893505842.243d79d3.png" alt="1569893505842"></p></li></ol> <p><strong>简单使用</strong></p> <ol><li><p>在要使用Log4j 的类中，导入包  import org.apache.log4j.Logger;</p></li> <li><p>日志对象，参数为当前类的class</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">static</span> <span class="token class-name">Logger</span> logger <span class="token operator">=</span> <span class="token class-name">Logger</span><span class="token punctuation">.</span><span class="token function">getLogger</span><span class="token punctuation">(</span><span class="token class-name">UserDaoTest</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></li> <li><p>日志级别</p> <div class="language-java extra-class"><pre class="language-java"><code>logger<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;info:进入了testLog4j&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
logger<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">&quot;debug:进入了testLog4j&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
logger<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">&quot;error:进入了testLog4j&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></li></ol> <h2 id="_7、分页"><a href="#_7、分页" class="header-anchor">#</a> 7、分页</h2> <p><strong>思考：为什么要分页？</strong></p> <ul><li>减少数据的处理量</li></ul> <h3 id="_7-1、使用limit分页"><a href="#_7-1、使用limit分页" class="header-anchor">#</a> 7.1、使用Limit分页</h3> <div class="language-sql extra-class"><pre class="language-sql"><code>语法：<span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">from</span> <span class="token keyword">user</span> <span class="token keyword">limit</span> startIndex<span class="token punctuation">,</span>pageSize<span class="token punctuation">;</span>
<span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">from</span> <span class="token keyword">user</span> <span class="token keyword">limit</span> <span class="token number">3</span><span class="token punctuation">;</span>  <span class="token comment">#[0,n]</span>
</code></pre></div><p>使用Mybatis实现分页，核心SQL</p> <ol><li><p>接口</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">//分页</span>
<span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">User</span><span class="token punctuation">&gt;</span></span> <span class="token function">getUserByLimit</span><span class="token punctuation">(</span><span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> map<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></li> <li><p>Mapper.xml</p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token comment">&lt;!--//分页--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>getUserByLimit<span class="token punctuation">&quot;</span></span> <span class="token attr-name">parameterType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>map<span class="token punctuation">&quot;</span></span> <span class="token attr-name">resultMap</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>UserMap<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    select * from  mybatis.user limit #{startIndex},#{pageSize}
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">&gt;</span></span>
</code></pre></div></li> <li><p>测试</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">getUserByLimit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
<span class="token class-name">SqlSession</span> sqlSession <span class="token operator">=</span> <span class="token class-name">MybatisUtils</span><span class="token punctuation">.</span><span class="token function">getSqlSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">UserMapper</span> mapper <span class="token operator">=</span> sqlSession<span class="token punctuation">.</span><span class="token function">getMapper</span><span class="token punctuation">(</span><span class="token class-name">UserMapper</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> map <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;startIndex&quot;</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;pageSize&quot;</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">User</span><span class="token punctuation">&gt;</span></span> userList <span class="token operator">=</span>  mapper<span class="token punctuation">.</span><span class="token function">getUserByLimit</span><span class="token punctuation">(</span>map<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">User</span> user <span class="token operator">:</span> userList<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    sqlSession<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

</code></pre></div></li></ol> <h3 id="_7-2、rowbounds分页"><a href="#_7-2、rowbounds分页" class="header-anchor">#</a> 7.2、RowBounds分页</h3> <p>不再使用SQL实现分页</p> <ol><li><p>接口</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">//分页2</span>
<span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">User</span><span class="token punctuation">&gt;</span></span> <span class="token function">getUserByRowBounds</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></li> <li><p>mapper.xml</p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token comment">&lt;!--分页2--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>getUserByRowBounds<span class="token punctuation">&quot;</span></span> <span class="token attr-name">resultMap</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>UserMap<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    select * from  mybatis.user
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">&gt;</span></span>
</code></pre></div></li> <li><p>测试</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">getUserByRowBounds</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
<span class="token class-name">SqlSession</span> sqlSession <span class="token operator">=</span> <span class="token class-name">MybatisUtils</span><span class="token punctuation">.</span><span class="token function">getSqlSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//RowBounds实现</span>
<span class="token class-name">RowBounds</span> rowBounds <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">RowBounds</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//通过Java代码层面实现分页</span>
<span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">User</span><span class="token punctuation">&gt;</span></span> userList <span class="token operator">=</span> sqlSession<span class="token punctuation">.</span><span class="token function">selectList</span><span class="token punctuation">(</span><span class="token string">&quot;com.kuang.dao.UserMapper.getUserByRowBounds&quot;</span><span class="token punctuation">,</span><span class="token keyword">null</span><span class="token punctuation">,</span>rowBounds<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">User</span> user <span class="token operator">:</span> userList<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    sqlSession<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre></div></li></ol> <h3 id="_7-3、分页插件"><a href="#_7-3、分页插件" class="header-anchor">#</a> 7.3、分页插件</h3> <p><img src="/assets/img/1569896603103.ed7b6935.png" alt="1569896603103"></p> <p>了解即可，万一 以后公司的架构师，说要使用，你需要知道它是什么东西！</p> <h2 id="_8、使用注解开发"><a href="#_8、使用注解开发" class="header-anchor">#</a> 8、使用注解开发</h2> <h3 id="_8-1、面向接口编程"><a href="#_8-1、面向接口编程" class="header-anchor">#</a> 8.1、面向接口编程</h3> <p>- 大家之前都学过面向对象编程，也学习过接口，但在真正的开发中，很多时候我们会选择面向接口编程
- <strong>根本原因 :  ==解耦== , 可拓展 , 提高复用 , 分层开发中 , 上层不用管具体的实现 , 大家都遵守共同的标准 , 使得开发变得容易 , 规范性更好</strong>
- 在一个面向对象的系统中，系统的各种功能是由许许多多的不同对象协作完成的。在这种情况下，各个对象内部是如何实现自己的,对系统设计人员来讲就不那么重要了；
- 而各个对象之间的协作关系则成为系统设计的关键。小到不同类之间的通信，大到各模块之间的交互，在系统设计之初都是要着重考虑的，这也是系统设计的主要工作内容。面向接口编程就是指按照这种思想来编程。</p> <p><strong>关于接口的理解</strong></p> <p>- 接口从更深层次的理解，应是定义（规范，约束）与实现（名实分离的原则）的分离。
- 接口的本身反映了系统设计人员对系统的抽象理解。
- 接口应有两类：
- 第一类是对一个个体的抽象，它可对应为一个抽象体(abstract class)；
- 第二类是对一个个体某一方面的抽象，即形成一个抽象面（interface）；
- 一个体有可能有多个抽象面。抽象体与抽象面是有区别的。</p> <p><strong>三个面向区别</strong></p> <p>- 面向对象是指，我们考虑问题时，以对象为单位，考虑它的属性及方法 .
- 面向过程是指，我们考虑问题时，以一个具体的流程（事务过程）为单位，考虑它的实现 .
- 接口设计与非接口设计是针对复用技术而言的，与面向对象（过程）不是一个问题.更多的体现就是对系统整体的架构</p> <h3 id="_8-2、使用注解开发"><a href="#_8-2、使用注解开发" class="header-anchor">#</a> 8.2、使用注解开发</h3> <ol><li><p>注解在接口上实现</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@Select</span><span class="token punctuation">(</span><span class="token string">&quot;select * from user&quot;</span><span class="token punctuation">)</span>
<span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">User</span><span class="token punctuation">&gt;</span></span> <span class="token function">getUsers</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></li> <li><p>需要再核心配置文件中绑定接口！</p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token comment">&lt;!--绑定接口--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mappers</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mapper</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.kuang.dao.UserMapper<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>mappers</span><span class="token punctuation">&gt;</span></span>
</code></pre></div></li> <li><p>测试</p></li></ol> <p>本质：反射机制实现</p> <p>底层：动态代理！</p> <p><img src="/assets/img/1569898830704.91c7be0b.png" alt="1569898830704"></p> <p><strong>Mybatis详细的执行流程！</strong></p> <p><img src="/assets/img/Temp.03fc1043.png" alt="1569898830704"></p> <h3 id="_8-3、crud"><a href="#_8-3、crud" class="header-anchor">#</a> 8.3、CRUD</h3> <p>我们可以在工具类创建的时候实现自动提交事务！</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">SqlSession</span>  <span class="token function">getSqlSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span> sqlSessionFactory<span class="token punctuation">.</span><span class="token function">openSession</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>编写接口，增加注解</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">UserMapper</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@Select</span><span class="token punctuation">(</span><span class="token string">&quot;select * from user&quot;</span><span class="token punctuation">)</span>
    <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">User</span><span class="token punctuation">&gt;</span></span> <span class="token function">getUsers</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// 方法存在多个参数，所有的参数前面必须加上 @Param(&quot;id&quot;)注解</span>
    <span class="token annotation punctuation">@Select</span><span class="token punctuation">(</span><span class="token string">&quot;select * from user where id = #{id}&quot;</span><span class="token punctuation">)</span>
    <span class="token class-name">User</span> <span class="token function">getUserByID</span><span class="token punctuation">(</span><span class="token annotation punctuation">@Param</span><span class="token punctuation">(</span><span class="token string">&quot;id&quot;</span><span class="token punctuation">)</span> <span class="token keyword">int</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span>


    <span class="token annotation punctuation">@Insert</span><span class="token punctuation">(</span><span class="token string">&quot;insert into user(id,name,pwd) values (#{id},#{name},#{password})&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">int</span> <span class="token function">addUser</span><span class="token punctuation">(</span><span class="token class-name">User</span> user<span class="token punctuation">)</span><span class="token punctuation">;</span>

    
    <span class="token annotation punctuation">@Update</span><span class="token punctuation">(</span><span class="token string">&quot;update user set name=#{name},pwd=#{password} where id = #{id}&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">int</span> <span class="token function">updateUser</span><span class="token punctuation">(</span><span class="token class-name">User</span> user<span class="token punctuation">)</span><span class="token punctuation">;</span>

    
    <span class="token annotation punctuation">@Delete</span><span class="token punctuation">(</span><span class="token string">&quot;delete from user where id = #{uid}&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">int</span> <span class="token function">deleteUser</span><span class="token punctuation">(</span><span class="token annotation punctuation">@Param</span><span class="token punctuation">(</span><span class="token string">&quot;uid&quot;</span><span class="token punctuation">)</span> <span class="token keyword">int</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>测试类</p> <p>【注意：我们必须要讲接口注册绑定到我们的核心配置文件中！】</p> <p><strong>关于@Param() 注解</strong></p> <ul><li>基本类型的参数或者String类型，需要加上</li> <li>引用类型不需要加</li> <li>如果只有一个基本类型的话，可以忽略，但是建议大家都加上！</li> <li>我们在SQL中引用的就是我们这里的 @Param() 中设定的属性名！</li></ul> <p><strong>#{}     ${} 区别</strong></p> <h2 id="_9、lombok"><a href="#_9、lombok" class="header-anchor">#</a> 9、Lombok</h2> <div class="language-java extra-class"><pre class="language-java"><code><span class="token class-name">Project</span> <span class="token class-name">Lombok</span> is a java library that automatically plugs into your editor and build tools<span class="token punctuation">,</span> spicing up your java<span class="token punctuation">.</span>
<span class="token class-name">Never</span> write another getter or equals method again<span class="token punctuation">,</span> <span class="token keyword">with</span> <span class="token namespace">one</span> annotation your <span class="token keyword">class</span> has a fully featured builder<span class="token punctuation">,</span> <span class="token class-name">Automate</span> your logging variables<span class="token punctuation">,</span> and much more<span class="token punctuation">.</span>
</code></pre></div><ul><li>java library</li> <li>plugs</li> <li>build tools</li> <li>with one annotation your class</li></ul> <p>使用步骤：</p> <ol><li><p>在IDEA中安装Lombok插件！</p></li> <li><p>在项目中导入lombok的jar包</p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.projectlombok<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>lombok<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>1.18.10<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre></div></li> <li><p>在实体类上加注解即可！</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@Data</span>
<span class="token annotation punctuation">@AllArgsConstructor</span>
<span class="token annotation punctuation">@NoArgsConstructor</span>
</code></pre></div></li></ol> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@Getter</span> and <span class="token annotation punctuation">@Setter</span>
<span class="token annotation punctuation">@FieldNameConstants</span>
<span class="token annotation punctuation">@ToString</span>
<span class="token annotation punctuation">@EqualsAndHashCode</span>
<span class="token annotation punctuation">@AllArgsConstructor</span><span class="token punctuation">,</span> <span class="token annotation punctuation">@RequiredArgsConstructor</span> and <span class="token annotation punctuation">@NoArgsConstructor</span>
<span class="token annotation punctuation">@Log</span><span class="token punctuation">,</span> <span class="token annotation punctuation">@Log4j</span><span class="token punctuation">,</span> <span class="token annotation punctuation">@Log4j2</span><span class="token punctuation">,</span> <span class="token annotation punctuation">@Slf4j</span><span class="token punctuation">,</span> <span class="token annotation punctuation">@XSlf4j</span><span class="token punctuation">,</span> <span class="token annotation punctuation">@CommonsLog</span><span class="token punctuation">,</span> <span class="token annotation punctuation">@JBossLog</span><span class="token punctuation">,</span> <span class="token annotation punctuation">@Flogger</span>
<span class="token annotation punctuation">@Data</span>
<span class="token annotation punctuation">@Builder</span>
<span class="token annotation punctuation">@Singular</span>
<span class="token annotation punctuation">@Delegate</span>
<span class="token annotation punctuation">@Value</span>
<span class="token annotation punctuation">@Accessors</span>
<span class="token annotation punctuation">@Wither</span>
<span class="token annotation punctuation">@SneakyThrows</span>
</code></pre></div><p>说明：</p> <div class="language- extra-class"><pre class="language-text"><code>@Data：无参构造，get、set、tostring、hashcode，equals
@AllArgsConstructor
@NoArgsConstructor
@EqualsAndHashCode
@ToString
@Getter
</code></pre></div><h2 id="_10、多对一处理"><a href="#_10、多对一处理" class="header-anchor">#</a> 10、多对一处理</h2> <p>多对一：</p> <p><img src="/assets/img/1569909163944.8907f57a.png" alt="1569909163944"></p> <ul><li>多个学生，对应一个老师</li> <li>对于学生这边而言，  <strong>关联</strong> ..  多个学生，关联一个老师  【多对一】</li> <li>对于老师而言， <strong>集合</strong> ， 一个老师，有很多学生 【一对多】</li></ul> <p><img src="data:image/png;base64,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" alt="1569909422471"></p> <p>SQL：</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> <span class="token punctuation">`</span>teacher<span class="token punctuation">`</span> <span class="token punctuation">(</span>
  <span class="token punctuation">`</span>id<span class="token punctuation">`</span> <span class="token keyword">INT</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>
  <span class="token punctuation">`</span>name<span class="token punctuation">`</span> <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">30</span><span class="token punctuation">)</span> <span class="token keyword">DEFAULT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>
  <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span> <span class="token punctuation">(</span><span class="token punctuation">`</span>id<span class="token punctuation">`</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span> <span class="token keyword">ENGINE</span><span class="token operator">=</span><span class="token keyword">INNODB</span> <span class="token keyword">DEFAULT</span> <span class="token keyword">CHARSET</span><span class="token operator">=</span>utf8

<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> teacher<span class="token punctuation">(</span><span class="token punctuation">`</span>id<span class="token punctuation">`</span><span class="token punctuation">,</span> <span class="token punctuation">`</span>name<span class="token punctuation">`</span><span class="token punctuation">)</span> <span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">'秦老师'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 

<span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> <span class="token punctuation">`</span>student<span class="token punctuation">`</span> <span class="token punctuation">(</span>
  <span class="token punctuation">`</span>id<span class="token punctuation">`</span> <span class="token keyword">INT</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>
  <span class="token punctuation">`</span>name<span class="token punctuation">`</span> <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">30</span><span class="token punctuation">)</span> <span class="token keyword">DEFAULT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>
  <span class="token punctuation">`</span>tid<span class="token punctuation">`</span> <span class="token keyword">INT</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span> <span class="token keyword">DEFAULT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>
  <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span> <span class="token punctuation">(</span><span class="token punctuation">`</span>id<span class="token punctuation">`</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token keyword">KEY</span> <span class="token punctuation">`</span>fktid<span class="token punctuation">`</span> <span class="token punctuation">(</span><span class="token punctuation">`</span>tid<span class="token punctuation">`</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token keyword">CONSTRAINT</span> <span class="token punctuation">`</span>fktid<span class="token punctuation">`</span> <span class="token keyword">FOREIGN</span> <span class="token keyword">KEY</span> <span class="token punctuation">(</span><span class="token punctuation">`</span>tid<span class="token punctuation">`</span><span class="token punctuation">)</span> <span class="token keyword">REFERENCES</span> <span class="token punctuation">`</span>teacher<span class="token punctuation">`</span> <span class="token punctuation">(</span><span class="token punctuation">`</span>id<span class="token punctuation">`</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span> <span class="token keyword">ENGINE</span><span class="token operator">=</span><span class="token keyword">INNODB</span> <span class="token keyword">DEFAULT</span> <span class="token keyword">CHARSET</span><span class="token operator">=</span>utf8


<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> <span class="token punctuation">`</span>student<span class="token punctuation">`</span> <span class="token punctuation">(</span><span class="token punctuation">`</span>id<span class="token punctuation">`</span><span class="token punctuation">,</span> <span class="token punctuation">`</span>name<span class="token punctuation">`</span><span class="token punctuation">,</span> <span class="token punctuation">`</span>tid<span class="token punctuation">`</span><span class="token punctuation">)</span> <span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token string">'1'</span><span class="token punctuation">,</span> <span class="token string">'小明'</span><span class="token punctuation">,</span> <span class="token string">'1'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> <span class="token punctuation">`</span>student<span class="token punctuation">`</span> <span class="token punctuation">(</span><span class="token punctuation">`</span>id<span class="token punctuation">`</span><span class="token punctuation">,</span> <span class="token punctuation">`</span>name<span class="token punctuation">`</span><span class="token punctuation">,</span> <span class="token punctuation">`</span>tid<span class="token punctuation">`</span><span class="token punctuation">)</span> <span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token string">'2'</span><span class="token punctuation">,</span> <span class="token string">'小红'</span><span class="token punctuation">,</span> <span class="token string">'1'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> <span class="token punctuation">`</span>student<span class="token punctuation">`</span> <span class="token punctuation">(</span><span class="token punctuation">`</span>id<span class="token punctuation">`</span><span class="token punctuation">,</span> <span class="token punctuation">`</span>name<span class="token punctuation">`</span><span class="token punctuation">,</span> <span class="token punctuation">`</span>tid<span class="token punctuation">`</span><span class="token punctuation">)</span> <span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token string">'3'</span><span class="token punctuation">,</span> <span class="token string">'小张'</span><span class="token punctuation">,</span> <span class="token string">'1'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> <span class="token punctuation">`</span>student<span class="token punctuation">`</span> <span class="token punctuation">(</span><span class="token punctuation">`</span>id<span class="token punctuation">`</span><span class="token punctuation">,</span> <span class="token punctuation">`</span>name<span class="token punctuation">`</span><span class="token punctuation">,</span> <span class="token punctuation">`</span>tid<span class="token punctuation">`</span><span class="token punctuation">)</span> <span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token string">'4'</span><span class="token punctuation">,</span> <span class="token string">'小李'</span><span class="token punctuation">,</span> <span class="token string">'1'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> <span class="token punctuation">`</span>student<span class="token punctuation">`</span> <span class="token punctuation">(</span><span class="token punctuation">`</span>id<span class="token punctuation">`</span><span class="token punctuation">,</span> <span class="token punctuation">`</span>name<span class="token punctuation">`</span><span class="token punctuation">,</span> <span class="token punctuation">`</span>tid<span class="token punctuation">`</span><span class="token punctuation">)</span> <span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token string">'5'</span><span class="token punctuation">,</span> <span class="token string">'小王'</span><span class="token punctuation">,</span> <span class="token string">'1'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre></div><h3 id="测试环境搭建"><a href="#测试环境搭建" class="header-anchor">#</a> 测试环境搭建</h3> <ol><li>导入lombok</li> <li>新建实体类 Teacher，Student</li> <li>建立Mapper接口</li> <li>建立Mapper.XML文件</li> <li>在核心配置文件中绑定注册我们的Mapper接口或者文件！【方式很多，随心选】</li> <li>测试查询是否能够成功！</li></ol> <h3 id="按照查询嵌套处理"><a href="#按照查询嵌套处理" class="header-anchor">#</a> 按照查询嵌套处理</h3> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token comment">&lt;!--
    思路:
        1. 查询所有的学生信息
        2. 根据查询出来的学生的tid，寻找对应的老师！  子查询
    --&gt;</span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>getStudent<span class="token punctuation">&quot;</span></span> <span class="token attr-name">resultMap</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>StudentTeacher<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    select * from student
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>resultMap</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>StudentTeacher<span class="token punctuation">&quot;</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Student<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>id<span class="token punctuation">&quot;</span></span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>id<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>name<span class="token punctuation">&quot;</span></span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>name<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token comment">&lt;!--复杂的属性，我们需要单独处理 对象： association 集合： collection --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>association</span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>teacher<span class="token punctuation">&quot;</span></span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>tid<span class="token punctuation">&quot;</span></span> <span class="token attr-name">javaType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Teacher<span class="token punctuation">&quot;</span></span> <span class="token attr-name">select</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>getTeacher<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>resultMap</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>getTeacher<span class="token punctuation">&quot;</span></span> <span class="token attr-name">resultType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Teacher<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    select * from teacher where id = #{id}
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">&gt;</span></span>

</code></pre></div><h3 id="按照结果嵌套处理"><a href="#按照结果嵌套处理" class="header-anchor">#</a> 按照结果嵌套处理</h3> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token comment">&lt;!--按照结果嵌套处理--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>getStudent2<span class="token punctuation">&quot;</span></span> <span class="token attr-name">resultMap</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>StudentTeacher2<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    select s.id sid,s.name sname,t.name tname
    from student s,teacher t
    where s.tid = t.id;
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>resultMap</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>StudentTeacher2<span class="token punctuation">&quot;</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Student<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>id<span class="token punctuation">&quot;</span></span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>sid<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>name<span class="token punctuation">&quot;</span></span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>sname<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>association</span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>teacher<span class="token punctuation">&quot;</span></span> <span class="token attr-name">javaType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Teacher<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>name<span class="token punctuation">&quot;</span></span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>tname<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>association</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>resultMap</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>回顾Mysql 多对一查询方式：</p> <ul><li>子查询</li> <li>联表查询</li></ul> <h2 id="_11、一对多处理"><a href="#_11、一对多处理" class="header-anchor">#</a> 11、一对多处理</h2> <p>比如：一个老师拥有多个学生！</p> <p>对于老师而言，就是一对多的关系!</p> <h3 id="环境搭建"><a href="#环境搭建" class="header-anchor">#</a> 环境搭建</h3> <ol><li>环境搭建，和刚才一样</li></ol> <p><strong>实体类</strong></p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@Data</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Student</span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token keyword">int</span> id<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token keyword">int</span> tid<span class="token punctuation">;</span>

<span class="token punctuation">}</span>

</code></pre></div><div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@Data</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Teacher</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token keyword">int</span> id<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>

    <span class="token comment">//一个老师拥有多个学生</span>
    <span class="token keyword">private</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Student</span><span class="token punctuation">&gt;</span></span> students<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="按照结果嵌套处理-2"><a href="#按照结果嵌套处理-2" class="header-anchor">#</a> 按照结果嵌套处理</h3> <div class="language-xml extra-class"><pre class="language-xml"><code>
    <span class="token comment">&lt;!--按结果嵌套查询--&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>getTeacher<span class="token punctuation">&quot;</span></span> <span class="token attr-name">resultMap</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>TeacherStudent<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        select s.id sid, s.name sname, t.name tname,t.id tid
        from student s,teacher t
        where s.tid = t.id and t.id = #{tid}
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>resultMap</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>TeacherStudent<span class="token punctuation">&quot;</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Teacher<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>id<span class="token punctuation">&quot;</span></span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>tid<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>name<span class="token punctuation">&quot;</span></span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>tname<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
        <span class="token comment">&lt;!--复杂的属性，我们需要单独处理 对象： association 集合： collection
        javaType=&quot;&quot; 指定属性的类型！
        集合中的泛型信息，我们使用ofType获取
        --&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>collection</span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>students<span class="token punctuation">&quot;</span></span> <span class="token attr-name">ofType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Student<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>id<span class="token punctuation">&quot;</span></span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>sid<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>name<span class="token punctuation">&quot;</span></span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>sname<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>tid<span class="token punctuation">&quot;</span></span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>tid<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>collection</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>resultMap</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h3 id="按照查询嵌套处理-2"><a href="#按照查询嵌套处理-2" class="header-anchor">#</a> 按照查询嵌套处理</h3> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>getTeacher2<span class="token punctuation">&quot;</span></span> <span class="token attr-name">resultMap</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>TeacherStudent2<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    select * from mybatis.teacher where id = #{tid}
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>resultMap</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>TeacherStudent2<span class="token punctuation">&quot;</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Teacher<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>collection</span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>students<span class="token punctuation">&quot;</span></span> <span class="token attr-name">javaType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ArrayList<span class="token punctuation">&quot;</span></span> <span class="token attr-name">ofType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Student<span class="token punctuation">&quot;</span></span> <span class="token attr-name">select</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>getStudentByTeacherId<span class="token punctuation">&quot;</span></span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>id<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>resultMap</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>getStudentByTeacherId<span class="token punctuation">&quot;</span></span> <span class="token attr-name">resultType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Student<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    select * from mybatis.student where tid = #{tid}
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h3 id="小结"><a href="#小结" class="header-anchor">#</a> 小结</h3> <ol><li>关联 - association   【多对一】</li> <li>集合 - collection   【一对多】</li> <li>javaType    &amp;   ofType
<ol><li>JavaType  用来指定实体类中属性的类型</li> <li>ofType  用来指定映射到List或者集合中的 pojo类型，泛型中的约束类型！</li></ol></li></ol> <p>注意点：</p> <ul><li>保证SQL的可读性，尽量保证通俗易懂</li> <li>注意一对多和多对一中，属性名和字段的问题！</li> <li>如果问题不好排查错误，可以使用日志 ， 建议使用 Log4j</li></ul> <p><strong>慢SQL       1s        1000s</strong></p> <p>面试高频</p> <ul><li>Mysql引擎</li> <li>InnoDB底层原理</li> <li>索引</li> <li>索引优化！</li></ul> <h2 id="_12、动态-sql"><a href="#_12、动态-sql" class="header-anchor">#</a> 12、动态 SQL</h2> <p>==<strong>什么是动态SQL：动态SQL就是指根据不同的条件生成不同的SQL语句</strong>==</p> <p>利用动态 SQL 这一特性可以彻底摆脱这种痛苦。</p> <div class="language-xml extra-class"><pre class="language-xml"><code>动态 SQL 元素和 JSTL 或基于类似 XML 的文本处理器相似。在 MyBatis 之前的版本中，有很多元素需要花时间了解。MyBatis 3 大大精简了元素种类，现在只需学习原来一半的元素便可。MyBatis 采用功能强大的基于 OGNL 的表达式来淘汰其它大部分元素。

if
choose (when, otherwise)
trim (where, set)
foreach
</code></pre></div><h3 id="搭建环境"><a href="#搭建环境" class="header-anchor">#</a> 搭建环境</h3> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> <span class="token punctuation">`</span>blog<span class="token punctuation">`</span> <span class="token punctuation">(</span>
  <span class="token punctuation">`</span>id<span class="token punctuation">`</span> <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token keyword">COMMENT</span> <span class="token string">'博客id'</span><span class="token punctuation">,</span>
  <span class="token punctuation">`</span>title<span class="token punctuation">`</span> <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token keyword">COMMENT</span> <span class="token string">'博客标题'</span><span class="token punctuation">,</span>
  <span class="token punctuation">`</span>author<span class="token punctuation">`</span> <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">30</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token keyword">COMMENT</span> <span class="token string">'博客作者'</span><span class="token punctuation">,</span>
  <span class="token punctuation">`</span>create_time<span class="token punctuation">`</span> <span class="token keyword">datetime</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token keyword">COMMENT</span> <span class="token string">'创建时间'</span><span class="token punctuation">,</span>
  <span class="token punctuation">`</span>views<span class="token punctuation">`</span> <span class="token keyword">int</span><span class="token punctuation">(</span><span class="token number">30</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token keyword">COMMENT</span> <span class="token string">'浏览量'</span>
<span class="token punctuation">)</span> <span class="token keyword">ENGINE</span><span class="token operator">=</span><span class="token keyword">InnoDB</span> <span class="token keyword">DEFAULT</span> <span class="token keyword">CHARSET</span><span class="token operator">=</span>utf8

</code></pre></div><p>创建一个基础工程</p> <ol><li><p>导包</p></li> <li><p>编写配置文件</p></li> <li><p>编写实体类</p> <div class="language-java extra-class"><pre class="language-java"><code>
<span class="token annotation punctuation">@Data</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Blog</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token keyword">int</span> id<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> title<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> author<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">Date</span> createTime<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token keyword">int</span> views<span class="token punctuation">;</span>
    
    
<span class="token punctuation">}</span>
</code></pre></div></li> <li><p>编写实体类对应Mapper接口 和 Mapper.XML文件</p></li></ol> <h3 id="if"><a href="#if" class="header-anchor">#</a> IF</h3> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>queryBlogIF<span class="token punctuation">&quot;</span></span> <span class="token attr-name">parameterType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>map<span class="token punctuation">&quot;</span></span> <span class="token attr-name">resultType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>blog<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    select * from mybatis.blog where 1=1
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>if</span> <span class="token attr-name">test</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>title != null<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        and title = #{title}
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>if</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>if</span> <span class="token attr-name">test</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>author != null<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        and author = #{author}
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>if</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h3 id="choose-when-otherwise"><a href="#choose-when-otherwise" class="header-anchor">#</a> choose (when, otherwise)</h3> <div class="language-xml extra-class"><pre class="language-xml"><code>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>queryBlogChoose<span class="token punctuation">&quot;</span></span> <span class="token attr-name">parameterType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>map<span class="token punctuation">&quot;</span></span> <span class="token attr-name">resultType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>blog<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        select * from mybatis.blog
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>where</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>choose</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>when</span> <span class="token attr-name">test</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>title != null<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
                    title = #{title}
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>when</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>when</span> <span class="token attr-name">test</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>author != null<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
                    and author = #{author}
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>when</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>otherwise</span><span class="token punctuation">&gt;</span></span>
                    and views = #{views}
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>otherwise</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>choose</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>where</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h3 id="trim-where-set"><a href="#trim-where-set" class="header-anchor">#</a> trim (where,set)</h3> <div class="language-xml extra-class"><pre class="language-xml"><code>select * from mybatis.blog
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>where</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>if</span> <span class="token attr-name">test</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>title != null<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        title = #{title}
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>if</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>if</span> <span class="token attr-name">test</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>author != null<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        and author = #{author}
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>if</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>where</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><div class="language-xml extra-class"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>update</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>updateBlog<span class="token punctuation">&quot;</span></span> <span class="token attr-name">parameterType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>map<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    update mybatis.blog
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>set</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>if</span> <span class="token attr-name">test</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>title != null<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
            title = #{title},
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>if</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>if</span> <span class="token attr-name">test</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>author != null<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
            author = #{author}
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>if</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>set</span><span class="token punctuation">&gt;</span></span>
    where id = #{id}
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>update</span><span class="token punctuation">&gt;</span></span>

</code></pre></div><p>==<strong>所谓的动态SQL，本质还是SQL语句 ， 只是我们可以在SQL层面，去执行一个逻辑代码</strong>==</p> <p>if</p> <p>where ， set  ， choose ，when</p> <h3 id="sql片段"><a href="#sql片段" class="header-anchor">#</a> SQL片段</h3> <p>有的时候，我们可能会将一些功能的部分抽取出来，方便复用！</p> <ol><li><p>使用SQL标签抽取公共的部分</p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>sql</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>if-title-author<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>if</span> <span class="token attr-name">test</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>title != null<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        title = #{title}
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>if</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>if</span> <span class="token attr-name">test</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>author != null<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        and author = #{author}
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>if</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>sql</span><span class="token punctuation">&gt;</span></span>
</code></pre></div></li> <li><p>在需要使用的地方使用Include标签引用即可</p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>queryBlogIF<span class="token punctuation">&quot;</span></span> <span class="token attr-name">parameterType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>map<span class="token punctuation">&quot;</span></span> <span class="token attr-name">resultType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>blog<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    select * from mybatis.blog
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>where</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>include</span> <span class="token attr-name">refid</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>if-title-author<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>include</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>where</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">&gt;</span></span>
</code></pre></div></li></ol> <p>注意事项：</p> <ul><li>最好基于单表来定义SQL片段！</li> <li>不要存在where标签</li></ul> <h3 id="foreach"><a href="#foreach" class="header-anchor">#</a> Foreach</h3> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> <span class="token keyword">user</span> <span class="token keyword">where</span> <span class="token number">1</span><span class="token operator">=</span><span class="token number">1</span> <span class="token operator">and</span> 

  <span class="token operator">&lt;</span>foreach item<span class="token operator">=</span><span class="token string">&quot;id&quot;</span> collection<span class="token operator">=</span><span class="token string">&quot;ids&quot;</span>
      <span class="token keyword">open</span><span class="token operator">=</span><span class="token string">&quot;(&quot;</span> separator<span class="token operator">=</span><span class="token string">&quot;or&quot;</span> <span class="token keyword">close</span><span class="token operator">=</span><span class="token string">&quot;)&quot;</span><span class="token operator">&gt;</span>
        <span class="token comment">#{id}</span>
  <span class="token operator">&lt;</span><span class="token operator">/</span>foreach<span class="token operator">&gt;</span>

<span class="token punctuation">(</span>id<span class="token operator">=</span><span class="token number">1</span> <span class="token operator">or</span> id<span class="token operator">=</span><span class="token number">2</span> <span class="token operator">or</span> id<span class="token operator">=</span><span class="token number">3</span><span class="token punctuation">)</span>

</code></pre></div><p><img src="/assets/img/1569979229205.da29d017.png" alt="1569979229205"></p> <p><img src="/assets/img/1569979339190.6d4cdd15.png" alt="1569979339190"></p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token comment">&lt;!--
        select * from mybatis.blog where 1=1 and (id=1 or id = 2 or id=3)

        我们现在传递一个万能的map ， 这map中可以存在一个集合！
--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>queryBlogForeach<span class="token punctuation">&quot;</span></span> <span class="token attr-name">parameterType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>map<span class="token punctuation">&quot;</span></span> <span class="token attr-name">resultType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>blog<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    select * from mybatis.blog

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>where</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>foreach</span> <span class="token attr-name">collection</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ids<span class="token punctuation">&quot;</span></span> <span class="token attr-name">item</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>id<span class="token punctuation">&quot;</span></span> <span class="token attr-name">open</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>and (<span class="token punctuation">&quot;</span></span> <span class="token attr-name">close</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>)<span class="token punctuation">&quot;</span></span> <span class="token attr-name">separator</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>or<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
            id = #{id}
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>foreach</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>where</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">&gt;</span></span>

</code></pre></div><p>==动态SQL就是在拼接SQL语句，我们只要保证SQL的正确性，按照SQL的格式，去排列组合就可以了==</p> <p>建议：</p> <ul><li>现在Mysql中写出完整的SQL,再对应的去修改成为我们的动态SQL实现通用即可！</li></ul> <h2 id="_13、缓存-了解"><a href="#_13、缓存-了解" class="header-anchor">#</a> 13、缓存 （了解）</h2> <h3 id="_13-1、简介"><a href="#_13-1、简介" class="header-anchor">#</a> 13.1、简介</h3> <div class="language- extra-class"><pre class="language-text"><code>查询  ：  连接数据库 ，耗资源！
	一次查询的结果，给他暂存在一个可以直接取到的地方！--&gt; 内存 ： 缓存
	
我们再次查询相同数据的时候，直接走缓存，就不用走数据库了
</code></pre></div><ol><li><p>什么是缓存 [ Cache ]？</p> <ul><li>存在内存中的临时数据。</li> <li>将用户经常查询的数据放在缓存（内存）中，用户去查询数据就不用从磁盘上(关系型数据库数据文件)查询，从缓存中查询，从而提高查询效率，解决了高并发系统的性能问题。</li></ul></li> <li><p>为什么使用缓存？</p> <ul><li>减少和数据库的交互次数，减少系统开销，提高系统效率。</li></ul></li> <li><p>什么样的数据能使用缓存？</p> <ul><li>经常查询并且不经常改变的数据。【可以使用缓存】</li></ul></li></ol> <h3 id="_13-2、mybatis缓存"><a href="#_13-2、mybatis缓存" class="header-anchor">#</a> 13.2、Mybatis缓存</h3> <ul><li>MyBatis包含一个非常强大的查询缓存特性，它可以非常方便地定制和配置缓存。缓存可以极大的提升查询效率。</li> <li>MyBatis系统中默认定义了两级缓存：<strong>一级缓存</strong>和<strong>二级缓存</strong> <ul><li><p>默认情况下，只有一级缓存开启。（SqlSession级别的缓存，也称为本地缓存）</p></li> <li><p>二级缓存需要手动开启和配置，他是基于namespace级别的缓存。</p></li> <li><p>为了提高扩展性，MyBatis定义了缓存接口Cache。我们可以通过实现Cache接口来自定义二级缓存</p></li></ul></li></ul> <h3 id="_13-3、一级缓存"><a href="#_13-3、一级缓存" class="header-anchor">#</a> 13.3、一级缓存</h3> <ul><li>一级缓存也叫本地缓存：  SqlSession
<ul><li>与数据库同一次会话期间查询到的数据会放在本地缓存中。</li> <li>以后如果需要获取相同的数据，直接从缓存中拿，没必须再去查询数据库；</li></ul></li></ul> <p>测试步骤：</p> <ol><li>开启日志！</li> <li>测试在一个Sesion中查询两次相同记录</li> <li>查看日志输出</li></ol> <p><img src="/assets/img/1569983650437.b622369b.png" alt="1569983650437"></p> <p>缓存失效的情况：</p> <ol><li><p>查询不同的东西</p></li> <li><p>增删改操作，可能会改变原来的数据，所以必定会刷新缓存！</p> <p><img src="/assets/img/1569983952321.b4396b7a.png" alt="1569983952321"></p></li> <li><p>查询不同的Mapper.xml</p></li> <li><p>手动清理缓存！</p> <p><img src="/assets/img/1569984008824.c24cc164.png" alt="1569984008824"></p></li></ol> <p>小结：一级缓存默认是开启的，只在一次SqlSession中有效，也就是拿到连接到关闭连接这个区间段！</p> <p>一级缓存就是一个Map。</p> <h3 id="_13-4、二级缓存"><a href="#_13-4、二级缓存" class="header-anchor">#</a> 13.4、二级缓存</h3> <ul><li>二级缓存也叫全局缓存，一级缓存作用域太低了，所以诞生了二级缓存</li> <li>基于namespace级别的缓存，一个名称空间，对应一个二级缓存；</li> <li>工作机制
<ul><li>一个会话查询一条数据，这个数据就会被放在当前会话的一级缓存中；</li> <li>如果当前会话关闭了，这个会话对应的一级缓存就没了；但是我们想要的是，会话关闭了，一级缓存中的数据被保存到二级缓存中；</li> <li>新的会话查询信息，就可以从二级缓存中获取内容；</li> <li>不同的mapper查出的数据会放在自己对应的缓存（map）中；</li></ul></li></ul> <p>步骤：</p> <ol><li><p>开启全局缓存</p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token comment">&lt;!--显示的开启全局缓存--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>setting</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>cacheEnabled<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>true<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
</code></pre></div></li> <li><p>在要使用二级缓存的Mapper中开启</p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token comment">&lt;!--在当前Mapper.xml中使用二级缓存--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>cache</span><span class="token punctuation">/&gt;</span></span>
</code></pre></div><p>也可以自定义参数</p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token comment">&lt;!--在当前Mapper.xml中使用二级缓存--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>cache</span>  <span class="token attr-name">eviction</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>FIFO<span class="token punctuation">&quot;</span></span>
       <span class="token attr-name">flushInterval</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>60000<span class="token punctuation">&quot;</span></span>
       <span class="token attr-name">size</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>512<span class="token punctuation">&quot;</span></span>
       <span class="token attr-name">readOnly</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>true<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
</code></pre></div></li> <li><p>测试</p> <ol><li><p>问题:我们需要将实体类序列化！否则就会报错！</p> <div class="language- extra-class"><pre class="language-text"><code>Caused by: java.io.NotSerializableException: com.kuang.pojo.User
</code></pre></div></li></ol></li></ol> <p>小结：</p> <ul><li>只要开启了二级缓存，在同一个Mapper下就有效</li> <li>所有的数据都会先放在一级缓存中；</li> <li>只有当会话提交，或者关闭的时候，才会提交到二级缓冲中！</li></ul> <h3 id="_13-5、缓存原理"><a href="#_13-5、缓存原理" class="header-anchor">#</a> 13.5、缓存原理</h3> <p><img src="/assets/img/1569985541106.8121889c.png" alt="1569985541106"></p> <h3 id="_13-6、自定义缓存-ehcache"><a href="#_13-6、自定义缓存-ehcache" class="header-anchor">#</a> 13.6、自定义缓存-ehcache</h3> <div class="language-xml extra-class"><pre class="language-xml"><code>Ehcache是一种广泛使用的开源Java分布式缓存。主要面向通用缓存
</code></pre></div><p>要在程序中使用ehcache，先要导包！</p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token comment">&lt;!-- https://mvnrepository.com/artifact/org.mybatis.caches/mybatis-ehcache --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.mybatis.caches<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>mybatis-ehcache<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>1.1.0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>在mapper中指定使用我们的ehcache缓存实现！</p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token comment">&lt;!--在当前Mapper.xml中使用二级缓存--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>cache</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>org.mybatis.caches.ehcache.EhcacheCache<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
</code></pre></div><p>ehcache.xml</p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token prolog">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ehcache</span> <span class="token attr-name"><span class="token namespace">xmlns:</span>xsi</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.w3.org/2001/XMLSchema-instance<span class="token punctuation">&quot;</span></span>
         <span class="token attr-name"><span class="token namespace">xsi:</span>noNamespaceSchemaLocation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://ehcache.org/ehcache.xsd<span class="token punctuation">&quot;</span></span>
         <span class="token attr-name">updateCheck</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>false<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!--
       diskStore：为缓存路径，ehcache分为内存和磁盘两级，此属性定义磁盘的缓存位置。参数解释如下：
       user.home – 用户主目录
       user.dir  – 用户当前工作目录
       java.io.tmpdir – 默认临时文件路径
     --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>diskStore</span> <span class="token attr-name">path</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>./tmpdir/Tmp_EhCache<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
    
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>defaultCache</span>
            <span class="token attr-name">eternal</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>false<span class="token punctuation">&quot;</span></span>
            <span class="token attr-name">maxElementsInMemory</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>10000<span class="token punctuation">&quot;</span></span>
            <span class="token attr-name">overflowToDisk</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>false<span class="token punctuation">&quot;</span></span>
            <span class="token attr-name">diskPersistent</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>false<span class="token punctuation">&quot;</span></span>
            <span class="token attr-name">timeToIdleSeconds</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>1800<span class="token punctuation">&quot;</span></span>
            <span class="token attr-name">timeToLiveSeconds</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>259200<span class="token punctuation">&quot;</span></span>
            <span class="token attr-name">memoryStoreEvictionPolicy</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>LRU<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
 
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>cache</span>
            <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>cloud_user<span class="token punctuation">&quot;</span></span>
            <span class="token attr-name">eternal</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>false<span class="token punctuation">&quot;</span></span>
            <span class="token attr-name">maxElementsInMemory</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>5000<span class="token punctuation">&quot;</span></span>
            <span class="token attr-name">overflowToDisk</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>false<span class="token punctuation">&quot;</span></span>
            <span class="token attr-name">diskPersistent</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>false<span class="token punctuation">&quot;</span></span>
            <span class="token attr-name">timeToIdleSeconds</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>1800<span class="token punctuation">&quot;</span></span>
            <span class="token attr-name">timeToLiveSeconds</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>1800<span class="token punctuation">&quot;</span></span>
            <span class="token attr-name">memoryStoreEvictionPolicy</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>LRU<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token comment">&lt;!--
       defaultCache：默认缓存策略，当ehcache找不到定义的缓存时，则使用这个缓存策略。只能定义一个。
     --&gt;</span>
    <span class="token comment">&lt;!--
      name:缓存名称。
      maxElementsInMemory:缓存最大数目
      maxElementsOnDisk：硬盘最大缓存个数。
      eternal:对象是否永久有效，一但设置了，timeout将不起作用。
      overflowToDisk:是否保存到磁盘，当系统当机时
      timeToIdleSeconds:设置对象在失效前的允许闲置时间（单位：秒）。仅当eternal=false对象不是永久有效时使用，可选属性，默认值是0，也就是可闲置时间无穷大。
      timeToLiveSeconds:设置对象在失效前允许存活时间（单位：秒）。最大时间介于创建时间和失效时间之间。仅当eternal=false对象不是永久有效时使用，默认是0.，也就是对象存活时间无穷大。
      diskPersistent：是否缓存虚拟机重启期数据 Whether the disk store persists between restarts of the Virtual Machine. The default value is false.
      diskSpoolBufferSizeMB：这个参数设置DiskStore（磁盘缓存）的缓存区大小。默认是30MB。每个Cache都应该有自己的一个缓冲区。
      diskExpiryThreadIntervalSeconds：磁盘失效线程运行时间间隔，默认是120秒。
      memoryStoreEvictionPolicy：当达到maxElementsInMemory限制时，Ehcache将会根据指定的策略去清理内存。默认策略是LRU（最近最少使用）。你可以设置为FIFO（先进先出）或是LFU（较少使用）。
      clearOnFlush：内存数量最大时是否清除。
      memoryStoreEvictionPolicy:可选策略有：LRU（最近最少使用，默认策略）、FIFO（先进先出）、LFU（最少访问次数）。
      FIFO，first in first out，这个是大家最熟的，先进先出。
      LFU， Less Frequently Used，就是上面例子中使用的策略，直白一点就是讲一直以来最少被使用的。如上面所讲，缓存的元素有一个hit属性，hit值最小的将会被清出缓存。
      LRU，Least Recently Used，最近最少使用的，缓存的元素有一个时间戳，当缓存容量满了，而又需要腾出地方来缓存新的元素的时候，那么现有缓存元素中时间戳离当前时间最远的元素将被清出缓存。
   --&gt;</span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ehcache</span><span class="token punctuation">&gt;</span></span>

</code></pre></div><p>Redis数据库来做缓存！  K-V</p> <h2 id="练习-29道练习题实战"><a href="#练习-29道练习题实战" class="header-anchor">#</a> 练习：29道练习题实战！</h2></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main></div><div class="global-ui"><div></div></div></div>
    <script src="/assets/js/app.1b64b8f6.js" defer></script><script src="/assets/js/8.78de4c0a.js" defer></script><script src="/assets/js/12.96ea9ee6.js" defer></script>
  </body>
</html>
